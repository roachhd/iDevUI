(function(){var a=!1;this.Class=function(){};Class.extend=function(b){function c(){!a&&this.init&&this.init.apply(this,arguments)}var d=this.prototype;a=!0;var f=new this;a=!1;for(var g in b)f[g]="function"==typeof b[g]&&"function"==typeof d[g]?function(a,b){return function(){var c=this._super;this._super=d[a];var f=b.apply(this,arguments);this._super=c;return f}}(g,b[g]):b[g];c.prototype=f;c.prototype.constructor=c;c.extend=arguments.callee;return c}})();
var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){a=String(a);for(b=b||2;a.length<b;)a="0"+a;return a};return function(f,g,i){var m=dateFormat;1==arguments.length&&("[object String]"==Object.prototype.toString.call(f)&&!/\d/.test(f))&&(g=f,f=void 0);f=f?new Date(f):new Date;if(isNaN(f))throw SyntaxError("invalid date");
g=String(m.masks[g]||g||m.masks["default"]);"UTC:"==g.slice(0,4)&&(g=g.slice(4),i=!0);var k=i?"getUTC":"get",j=f[k+"Date"](),h=f[k+"Day"](),q=f[k+"Month"](),l=f[k+"FullYear"](),n=f[k+"Hours"](),r=f[k+"Minutes"](),y=f[k+"Seconds"](),k=f[k+"Milliseconds"](),u=i?0:f.getTimezoneOffset(),v={d:j,dd:d(j),ddd:m.i18n.dayNames[h],dddd:m.i18n.dayNames[h+7],m:q+1,mm:d(q+1),mmm:m.i18n.monthNames[q],mmmm:m.i18n.monthNames[q+12],yy:String(l).slice(2),yyyy:l,h:n%12||12,hh:d(n%12||12),H:n,HH:d(n),M:r,MM:d(r),s:y,
ss:d(y),l:d(k,3),L:d(99<k?Math.round(k/10):k),t:12>n?"a":"p",tt:12>n?"am":"pm",T:12>n?"A":"P",TT:12>n?"AM":"PM",Z:i?"UTC":(String(f).match(b)||[""]).pop().replace(c,""),o:(0<u?"-":"+")+d(100*Math.floor(Math.abs(u)/60)+Math.abs(u)%60,4),S:["th","st","nd","rd"][3<j%10?0:(10!=j%100-j%10)*j%10]};return g.replace(a,function(a){return a in v?v[a]:a.slice(1,a.length-1)})}}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",uDateTime:"yyyymmddHHMMss"};dateFormat.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
Date.prototype.format=function(a,b){return dateFormat(this,a,b)};
var _language={sLanguage:"english",words:null,setLanguage:function(a){this.sLanguage=a},load:function(){if("english"!=this.sLanguage){var a=document.createElement("script");a.type="text/javascript";a.src=_preferences.languagepath+this.sLanguage+".js";-1==navigator.userAgent.toLowerCase().indexOf("msie 7")||-1==navigator.userAgent.toLowerCase().indexOf("msie 8")?a.onreadystatechange=function(){"loaded"==this.readyState&&idev.errorHandler("Loaded:"+_language.sLanguage)}:a.onload=function(){$debug("Loaded:"+
_language.sLanguage)};document.getElementsByTagName("head")[0].appendChild(a)}},translate:function(a){var b=!1;if(null==a)return"";if(null==this.words)return a;if(""==a)return"";if("english"==this.sLanguage)return a;65<=a.charCodeAt(0)&&97>=a.charCodeAt(0)&&(b=!0);sForeignWord=this.words[a.toLowerCase()];null==sForeignWord&&(sForeignWord=a);b&&(sForeignWord=idev.utils.ucwords(sForeignWord));return sForeignWord}},idevObject=Class.extend({}),idevColors=idevObject.extend({init:function(){this.colors=
[];this.colors.blue={startColor:"#000011",endColor:"#0099dd:45-#06c",borderColor:"#06c",fontColor:"#fff",border:!0};this.colors.silver={startColor:"#ccc",endColor:"#ededed:45-#ddd",borderColor:"#ddd",fontColor:"#222",border:!0};this.colors.red={startColor:"#440000",endColor:"#d00:45-#a00",borderColor:"#a00",fontColor:"#fff",border:!0};this.colors.purple={startColor:"#110000",endColor:"#aa0066:45-#550022",borderColor:"#550022",fontColor:"#fff",border:!0};this.colors.black={startColor:"#000",endColor:"#555:45-#333",
borderColor:"#333",fontColor:"#fff",border:!0};this.colors.green={startColor:"#001100",endColor:"#00cc00:45-#090",borderColor:"#090",fontColor:"#fff",border:!0};this.colors.orange={startColor:"#551100",endColor:"#ff6600:45-#FF6600",borderColor:"#99aa00",fontColor:"#fff",border:!0}},gradientColors:function(a){var b=this.colors[a.color.toLowerCase()];b&&(a.startColor=b.startColor,a.endColor=b.endColor,a.borderColor=b.borderColor,a.fontColor=b.fontColor,a.border=b.border)},addColor:function(a,b){this.colors[a.toLowerCase()]=
b},removeColor:function(a){this.colors[a.toLowerCase()]=null}}),idevResize=idevObject.extend({init:function(a){this.widget=a;this.resizable=!0;this.resizing=!1;this.rsh=this.rsw=8;this.resizeColor="#000";this.handlers="nw,n,ne,w,e,sw,s,se,"},isResizing:function(){return this.resizing},add:function(){if(!this.resizing){this.widget.beforeResize();idev._isDraggable=this.widget.isDraggable();idev._resizeTarget=this.widget;var a=parseInt($("#"+this.widget.id).width())-this.rsw,b=parseInt($("#"+this.widget.id).height())-
this.rsh,c="<div id='"+this.widget.id+"-drframe' style='position:absolute;top:"+this.rsh/2+"px;left:"+this.rsw/2+"px;border:1px dashed "+this.resizeColor+";width:"+a+"px;height:"+b+"px;z-index:990;'></div>";this.resizable&&(-1!=this.handlers.indexOf("nw,")&&(c+="<div id='"+this.widget.id+"-drhandlenw' style='position:absolute;top:0px;left:0px;width:"+this.rsw+"px;height:"+this.rsh+"px;border:1px solid #000;background-color:#fff;z-index:999;cursor:nw-resize;'></div>"),-1!=this.handlers.indexOf("ne,")&&
(c+="<div id='"+this.widget.id+"-drhandlene' style='position:absolute;top:0px;left:"+(a-2)+"px;width:"+this.rsw+"px;height:"+this.rsh+"px;border:1px solid #000;background-color:#fff;z-index:999;cursor:ne-resize;'></div>"),-1!=this.handlers.indexOf("se,")&&(c+="<div id='"+this.widget.id+"-drhandlese' style='position:absolute;top:"+(b-2)+"px;left:"+(a-2)+"px;width:"+this.rsw+"px;height:"+this.rsh+"px;border:1px solid #000;background-color:#fff;z-index:999;cursor:se-resize;'></div>"),-1!=this.handlers.indexOf("sw,")&&
(c+="<div id='"+this.widget.id+"-drhandlesw' style='position:absolute;top:"+(b-2)+"px;left:0px;width:"+this.rsw+"px;height:"+this.rsh+"px;border:1px solid #000;background-color:#fff;z-index:999;cursor:sw-resize;'></div>"),-1!=this.handlers.indexOf("n,")&&(c+="<div id='"+this.widget.id+"-drhandlen' style='position:absolute;top:0px;left:"+a/2+"px;width:"+this.rsw+"px;height:"+this.rsh+"px;border:1px solid #000;background-color:#fff;z-index:999;cursor:n-resize;'></div>"),-1!=this.handlers.indexOf("w,")&&
(c+="<div id='"+this.widget.id+"-drhandlew' style='position:absolute;top:"+b/2+"px;left:0px;width:"+this.rsw+"px;height:"+this.rsh+"px;border:1px solid #000;background-color:#fff;z-index:999;cursor:w-resize;'></div>"),-1!=this.handlers.indexOf("e,")&&(c+="<div id='"+this.widget.id+"-drhandlee' style='position:absolute;top:"+b/2+"px;left:"+(a-2)+"px;width:"+this.rsw+"px;height:"+this.rsh+"px;border:1px solid #000;background-color:#fff;z-index:999;cursor:e-resize;'></div>"),-1!=this.handlers.indexOf("s,")&&
(c+="<div id='"+this.widget.id+"-drhandles' style='position:absolute;top:"+(b-2)+"px;left:"+a/2+"px;width:"+this.rsw+"px;height:"+this.rsh+"px;border:1px solid #000;background-color:#fff;z-index:999;cursor:s-resize;'></div>"));$("#"+this.widget.id).append(c);$("#"+this.widget.id).attr("draggable","Y");$("#"+this.widget.id).attr("resizable","Y");this.resizing=!0}},remove:function(){this.resizing&&($("#"+this.widget.id+"-drframe").remove(),this.resizable&&(-1!=this.handlers.indexOf("nw,")&&$("#"+this.widget.id+
"-drhandlenw").remove(),-1!=this.handlers.indexOf("ne,")&&$("#"+this.widget.id+"-drhandlene").remove(),-1!=this.handlers.indexOf("se,")&&$("#"+this.widget.id+"-drhandlese").remove(),-1!=this.handlers.indexOf("sw,")&&$("#"+this.widget.id+"-drhandlesw").remove(),-1!=this.handlers.indexOf("w,")&&$("#"+this.widget.id+"-drhandlew").remove(),-1!=this.handlers.indexOf("e,")&&$("#"+this.widget.id+"-drhandlee").remove(),-1!=this.handlers.indexOf("n,")&&$("#"+this.widget.id+"-drhandlen").remove(),-1!=this.handlers.indexOf("s,")&&
$("#"+this.widget.id+"-drhandles").remove()),$("#"+this.widget.id).attr("draggable","N"),$("#"+this.widget.id).attr("resizable","N"),this.widget.setDraggable(idev._isDraggable),this.resizing=!1,this.widget.afterResize())},syncSize:function(){if(this.resizable){var a=parseInt($("#"+this.widget.id).width())-this.rsw,b=parseInt($("#"+this.widget.id).height())-this.rsh;$("#"+this.widget.id+"-drframe").width(a);$("#"+this.widget.id+"-drframe").height(b);$("#"+this.widget.id+"-drhandlene").css("left",a-
2);$("#"+this.widget.id+"-drhandlee").css("left",a-2);$("#"+this.widget.id+"-drhandlee").css("top",b/2);$("#"+this.widget.id+"-drhandlew").css("top",b/2);$("#"+this.widget.id+"-drhandlese").css("left",a-2);$("#"+this.widget.id+"-drhandlese").css("top",b-2);$("#"+this.widget.id+"-drhandles").css("top",b-2);$("#"+this.widget.id+"-drhandles").css("left",a/2);$("#"+this.widget.id+"-drhandlen").css("left",a/2);$("#"+this.widget.id+"-drhandlesw").css("top",b-2)}},change:function(a,b,c,d){$("#"+this.widget.id);
$("#"+this.widget.id).css("left",a);$("#"+this.widget.id).css("top",b);this.resizable&&($("#"+this.widget.id).css("width",c),$("#"+this.widget.id).css("height",d),$("#"+this.widget.id).css("max-width",c),$("#"+this.widget.id).css("max-height",d),this.syncSize(),this.widget.doLayout())}}),idevDD=idevObject.extend({init:function(a){this.widget=a;this.allowDrag=a.config.allowDrag;this.allowDrop=a.config.allowDrop;this.dragText=a.config.dragText||"Dragging";this.tpl=new idev.wTemplate("<div id='{id}' style='position:absolute;left:{x}px;top:{y}px;width:{width}px;height:{height}px;z-index:999;{style}'>",
"<img id='{id}-drag' src='{drag}' style='display:none;'/><img id='{id}-nodrop' src='{nodrop}' style='display:none;'/>","{text}","</div>");this.bShowDragTip=!1},startDD:function(a){if(this.widget.events.onDrag){var b=this.widget.events.onDrag(this.widget,a);null!=b&&(this.dragText=b)}this.tx=a.clientX;this.ty=a.clientY;this.bShowDragTip=!0;idev.dropWidget=null},move:function(a){if(this.bShowDragTip){var b=[];b.id=this.widget.id+"-dd";b.x=this.tx-50;b.y=this.ty-14;b.width=100;b.height=20;b.style="background:#fff;border:2px solid #ccc;cursor:pointer;font-size:10pt;font-family:sans_serif;";
b.text=this.dragText;b.drag=_preferences.libpath+"images/drag.png";b.nodrop=_preferences.libpath+"images/nodrop.png";b=this.tpl.render(b);$("#container").append(b);this.allowDrop?$("#"+this.widget.id+"-dd-drag").show():$("#"+this.widget.id+"-dd-nodrop").show()}this.bShowDragTip=!1;var a=idev.utils.mousePosition(a),c=a.x-idev._sX,d=a.y-idev._sY,f=document.getElementById(this.widget.id+"-dd");f&&(idev._sX=a.x,idev._sY=a.y,$delay(100,function(){var a=parseInt(f.style.top.replace("px","")),b=parseInt(f.style.left.replace("px",
""));f.style.left=b+c+"px";f.style.top=a+d+"px"},f))},canDrop:function(a){if(null!=a){var b=a.id+"-dd";this.widget.dd.allowDrop||($("#"+b+"-drag").hide(),$("#"+b+"-nodrop").show(),idev.dropWidget=null);if(this.widget.events.canDrop)try{this.widget.events.canDrop(a,this.widget)?($("#"+b+"-drag").show(),$("#"+b+"-nodrop").hide(),idev.dropWidget=this.widget):($("#"+b+"-drag").hide(),$("#"+b+"-nodrop").show(),idev.dropWidget=null)}catch(c){idev.errorHandler("CanDrop Error:"+c.message),$("#"+b+"-drag").hide(),
$("#"+b+"-nodrop").show(),idev.dropWidget=null}else this.widget.dd.allowDrop?($("#"+b+"-drag").show(),$("#"+b+"-nodrop").hide(),idev.dropWidget=this.widget):($("#"+b+"-drag").hide(),$("#"+b+"-nodrop").show(),idev.dropWidget=null)}},onDrop:function(){if(idev.dropWidget.events.onDrop)try{idev.dropWidget.events.onDrop(idev.dropWidget,this.widget)}catch(a){idev.errorHandler("onDrop Error:"+a.message)}},endDD:function(){if(idev.dropWidget)try{this.onDrop()}catch(a){idev.errorHandler("onDrop Error:"+a.message)}$("#"+
this.widget.id+"-dd").css("cursor","default");$delay(100,function(a){$("#"+a.id+"-dd").remove()},this.widget)}}),idevLayoutManager=idevObject.extend({init:function(a){this.widget=a;this.id=a.id;this.layout=a.layout;this.area=a.area;this.events=a.events;this.parent=a.parent;this.title=a.title;this.tbar=a.tbar;this.bbar=a.bbar},collapseArea:function(){if(this.widget.expanded)if("west"==this.area){var a=this.widget.width-18;this.events.collapsed&&this.events.collapsed(this.widget);$("#"+this.id+"-expand").addClass("ui-panel-btn-expand-w");
$("#"+this.id+"-expand").removeClass("ui-panel-btn-collapse-w");$("#"+this.parent.id+"-content-west").attr("width","18");$("#"+this.id).css("margin-left",0-a);$("#"+this.id+"-filler").css("visibility","visible");for(var b=0;b<this.parent.widgets.length;b++){var c=this.parent.widgets[b].id,d=this.parent.widgets[b].area;"center"==d&&(d=$("#"+c).width()+a,$("#"+c).width(d),$("#"+c).css("max-width",d),(c=$get(c))&&c.doLayout())}this.widget.expanded=!1}else if("east"==this.area){a=this.widget.width-18;
this.events.collapsed&&this.events.collapsed(this.widget);$("#"+this.id+"-expand").addClass("ui-panel-btn-collapse-e");$("#"+this.id+"-expand").removeClass("ui-panel-btn-expand-e");$("#"+this.parent.id+"-content-east").attr("width","18");$("#"+this.id+"-filler").css("visibility","visible");for(b=0;b<this.parent.widgets.length;b++)c=this.parent.widgets[b].id,d=this.parent.widgets[b].area,"center"==d&&(d=$("#"+c).width()+a,$("#"+c).width(d),$("#"+c).css("max-width",d),(c=$get(c))&&c.doLayout());this.widget.expanded=
!1}else if("south"==this.area){var f=$("#"+this.id+"-title").height(),a=$("#"+this.id).height()-f;$("#"+this.id).css("height",f);this.events.collapsed&&this.events.collapsed(this.widget);$("#"+this.id+"-expand").removeClass("ui-panel-btn-expand");$("#"+this.id+"-expand").addClass("ui-panel-btn-collapse");$("#"+this.parent.id+"-content-row-south").attr("height",f);for(b=0;b<this.parent.widgets.length;b++)if(c=this.parent.widgets[b].id,d=this.parent.widgets[b].area,"center"==d||"west"==d||"east"==d){f=
$("#"+c).height()+a;$("#"+c).css("height",f);$("#"+c).css("max-height",f);f=$("#"+c+"-body").height()+a;$("#"+c+"-body").css("height",f);$("#"+c+"-body").css("max-height",f);if("west"==d||"east"==d)f=$("#"+c+"-filler").height()+a,$("#"+c+"-filler").css("height",f);(c=$get(c))&&c.doLayout()}this.widget.expanded=!1}else{f=$("#"+this.id+"-title").height();a=this.widget.height-f;$("#"+this.id).css("height",f);this.events.collapsed&&this.events.collapsed(this.widget);$("#"+this.id+"-expand").addClass("ui-panel-btn-expand");
$("#"+this.id+"-expand").removeClass("ui-panel-btn-collapse");$("#"+this.parent.id+"-content-row-north").attr("height",f);this.widget.expanded=!1;for(b=0;b<this.parent.widgets.length;b++)if(c=this.parent.widgets[b].id,d=this.parent.widgets[b].area,"center"==d||"west"==d||"east"==d){f=$("#"+c).height()+a;$("#"+c).css("height",f);$("#"+c).css("max-height",f);f=$("#"+c+"-body").height()+a;$("#"+c+"-body").css("height",f);$("#"+c+"-body").css("max-height",f);if("west"==d||"east"==d)f=$("#"+c+"-filler").height()+
a,$("#"+c+"-filler").css("height",f);(c=$get(c))&&c.doLayout()}}},expandArea:function(){if(!this.widget.expanded){if("west"==this.area){var a=this.widget.width-18;$("#"+this.parent.id+"-content-west").attr("width",this.widget.width);$("#"+this.id).css("margin-left",0);this.events.expanded&&this.events.expanded(this.widget);$("#"+this.id+"-expand").addClass("ui-panel-btn-collapse-w");$("#"+this.id+"-expand").removeClass("ui-panel-btn-expand-w");$("#"+this.id+"-filler").css("visibility","hidden");for(var b=
0;b<this.parent.widgets.length;b++){var c=this.parent.widgets[b].id,d=this.parent.widgets[b].area;if("center"==d){var f=$("#"+c).width()-a;$("#"+c).width(f);$("#"+c).css("max-width",f);(c=$get(c))&&c.doLayout()}}}else if("east"==this.area){a=this.widget.width-18;$("#"+this.parent.id+"-content-east").attr("width",this.widget.width);this.events.expanded&&this.events.expanded(this.widget);$("#"+this.id+"-expand").removeClass("ui-panel-btn-collapse-e");$("#"+this.id+"-expand").addClass("ui-panel-btn-expand-e");
$("#"+this.id+"-filler").css("visibility","hidden");for(b=0;b<this.parent.widgets.length;b++)c=this.parent.widgets[b].id,d=this.parent.widgets[b].area,"center"==d&&(f=$("#"+c).width()-a,$("#"+c).width(f),$("#"+c).css("max-width",f),(c=$get(c))&&c.doLayout())}else{"south"==this.area?(f=$("#"+this.id+"-title").height(),b=this.widget.config.height,a=b-f,$("#"+this.id).css("height",b),this.events.collapsed&&this.events.collapsed(this.widget),$("#"+this.id+"-expand").addClass("ui-panel-btn-expand"),$("#"+
this.id+"-expand").removeClass("ui-panel-btn-collapse"),$("#"+this.parent.id+"-content-row-south").attr("height",this.height)):(f=$("#"+this.id+"-title").height(),b=this.widget.config.height,a=b-f,$("#"+this.id).css("height",b),this.events.collapsed&&this.events.collapsed(this.widget),$("#"+this.id+"-expand").removeClass("ui-panel-btn-expand"),$("#"+this.id+"-expand").addClass("ui-panel-btn-collapse"),$("#"+this.parent.id+"-content-row-north").attr("height",this.widget.height));for(b=0;b<this.parent.widgets.length;b++)if(c=
this.parent.widgets[b].id,d=this.parent.widgets[b].area,"center"==d||"west"==d||"east"==d){f=$("#"+c).height()-a;$("#"+c).css("height",f);$("#"+c).css("max-height",f);f=$("#"+c+"-body").height()-a;$("#"+c+"-body").css("height",f);$("#"+c+"-body").css("max-height",f);if("west"==d||"east"==d)f=$("#"+c+"-filler").height()-a,$("#"+c+"-filler").css("height",f);(c=$get(c))&&c.doLayout()}}this.widget.expanded=!0}},collapsePanel:function(){if(this.widget.expanded){var a=$("#"+this.id+"-title").height();$("#"+
this.id).css("height",a);$("#"+this.id).css("max-height",a);this.events.collapsed&&this.events.collapsed(this.widget);$("#"+this.id+"-expand").addClass("ui-panel-btn-plus");$("#"+this.id+"-expand").removeClass("ui-panel-btn-minus");this.widget.expanded=!1}},expandPanel:function(){if(!this.widget.expanded){var a=$("#"+this.parent.id).height(),b=$("#"+this.parent.id+"-title").height(),a=a-b-(this.parent.widgets.length-1)*idev.defaultTitleHeight;$("#"+this.id).css("height",a);$("#"+this.id).css("max-height",
a);this.events.collapsed&&this.events.collapsed(this.widget);$("#"+this.id+"-expand").removeClass("ui-panel-btn-plus");$("#"+this.id+"-expand").addClass("ui-panel-btn-minus");for(a=0;a<this.parent.widgets.length;a++)b=$get(this.parent.widgets[a].id),b.expanded&&b.layoutManager.collapsePanel();this.widget.expanded=!0;this.widget.doLayout()}},expand:function(){"frame"==this.parent.layout?this.expandArea():"accordion"==this.parent.layout?this.expandPanel():this.widget.expand()},collapse:function(){"frame"==
this.parent.layout?this.collapseArea():"accordion"==this.parent.layout?this.collapsePanel():this.widget.collapse(this.widget.titleHeight)},resizePanel:function(){var a=this.widget.height,b=this.widget.width;this.widget.title&&(a-=this.widget.titleHeight);this.widget.tbar&&(a-=this.widget.tbarHeight);this.widget.bbar&&(a-=this.widget.bbarHeight);$("#"+this.id+"-background").css("width",b);$("#"+this.id+"-background").css("max-width",b);$("#"+this.id+"-body").css("width",b);$("#"+this.id+"-body").css("max-width",
b);$("#"+this.id+"-content").css("width",b);$("#"+this.id+"-content").css("max-width",b);this.widget.expanded&&($("#"+this.id+"-body").css("height",a),$("#"+this.id+"-content").css("height",a));this.widget.title&&($("#"+this.id+"-title").css("width",b),$("#"+this.id+"-title").css("max-width",b));this.widget.tbar&&($("#"+this.id+"-tbar").css("width",b),$("#"+this.id+"-tbar").css("max-width",b),this.widget.tbar.doLayout());this.widget.bbar&&($("#"+this.id+"-bbar").css("width",b),$("#"+this.id+"-bbar").css("max-width",
b),this.widget.bbar.doLayout());("west"==this.widgetarea||"east"==this.widgetarea)&&$("#"+this.id+"-filler").css("height",a);return a},doLayout:function(){try{var a=$("#"+this.id).width(),b=$("#"+this.id).height();this.widget.width=a;this.widget.height=b;if("fit"==this.layout)for(var c=this.resizePanel(),d=0;d<this.widget.children.length;d++)this.widget.children[d].resize(a,c),this.widget.children[d].doLayout();else if("frame"==this.layout){this.resizePanel();c=a;this.widget.title&&(b-=$("#"+this.id+
"-title").height());for(d=0;d<this.widget.children.length;d++){if("west"==this.widget.children[d].area){var f=this.widget.children[d].getWidth();this.widget.children[d].expanded||(f=24);c-=f}"east"==this.widget.children[d].area&&(f=this.widget.children[d].getWidth(),this.widget.children[d].expanded||(f=24),c-=f);if("north"==this.widget.children[d].area){var g=this.widget.children[d].getHeight();this.widget.children[d].expanded||(g=$("#"+this.widget.children[d].id+"-title").height());b-=g}"south"==
this.widget.children[d].area&&(g=this.widget.children[d].getHeight(),this.widget.children[d].expanded||(g=$("#"+this.widget.children[d].id+"-title").height()),b-=g)}$("#"+this.id+"-content-table").attr("width",f);for(d=0;d<this.widget.children.length;d++){var i=this.widget.children[d].id;"south"==this.widget.children[d].area?($("#"+i).css("width",a),$("#"+i).css("max-width",a),$("#"+i+"-body").css("width",a),$("#"+i+"-body").css("max-width",a),$("#"+i+"-background").css("width",a),$("#"+i+"-background").css("max-width",
a)):"north"==this.widget.children[d].area?($("#"+i).css("width",a),$("#"+i).css("max-width",a),$("#"+i+"-body").css("width",a),$("#"+i+"-body").css("max-width",a),$("#"+i+"-background").css("width",a),$("#"+i+"-background").css("max-width",a)):"west"==this.widget.children[d].area?($("#"+i).css("height",b),$("#"+i).css("max-height",b),$("#"+i+"-body").css("height",b),$("#"+i+"-body").css("max-height",b),$("#"+i+"-background").css("height",b),$("#"+i+"-background").css("max-height",b),this.widget.children[d].doLayout()):
"center"==this.widget.children[d].area?($("#"+i).css("height",b),$("#"+i).css("max-height",b),$("#"+i+"-body").css("height",b),$("#"+i+"-body").css("max-height",b),$("#"+i+"-background").css("height",b),$("#"+i+"-background").css("max-height",b),$("#"+i).css("width",c),$("#"+i).css("max-width",c),$("#"+i+"-body").css("width",c),$("#"+i+"-body").css("max-width",c),$("#"+i+"-background").css("width",c),$("#"+i+"-background").css("max-width",c),this.widget.children[d].doLayout()):"east"==this.widget.children[d].area&&
($("#"+i).css("height",b),$("#"+i).css("max-height",b),$("#"+i+"-body").css("height",b),$("#"+i+"-body").css("max-height",b),$("#"+i+"-background").css("height",b),$("#"+i+"-background").css("max-height",b),this.widget.children[d].doLayout())}}else if("accordion"==this.layout){c=this.resizePanel();this.widget.children.length&&(c-=(this.widget.children.length-1)*idev.defaultTitleHeight);for(d=0;d<this.widget.children.length;d++)this.widget.children[d].expanded&&($("#"+this.widget.children[d].id).css("height",
c),$("#"+this.widget.children[d].id).css("max-height",c)),$("#"+this.widget.children[d].id).css("width",a),$("#"+this.widget.children[d].id).css("max-width",a),this.widget.children[d].expanded?this.widget.children[d].resize(a,c):this.widget.children[d].resize(a,this.widget.children[d].titleHeight)}else{this.resizePanel();for(d=0;d<this.widget.children.length;d++)try{this.widget.children[d].doLayout()}catch(m){alert("DL Error:",m.description),alert(this.widget.children[d].wtype)}}}catch(k){alert("LAYOUT Error:",
k.description)}}}),baseWidget=idevObject.extend({init:function(a){this.config=null==a?{}:a;this.deferredRender=this.rendered=!1;null!=this.config.id&&$get(this.config.id)&&(idev.errorHandler("Duplicate Widget ID : "+this.config.id),this.config.id=null,a.id=null);this.id=null==this.config.id?idev.internal.nextUIID():this.config.id;this.wtype=this.config.wtype;this.page=this.config.page;this.parent=this.config.parent;this.tpl=new idev.wTemplate;this.data=null==this.config.data?{}:this.config.data;this.dd=
new idevDD(this);this.renderTo=this.config.renderTo;this.field=null==this.config.field?"":this.config.field;this.cls=null==this.config.cls?"":this.config.cls;this.style=null==this.config.style?"":this.config.style;this.labelStyle=null==this.config.labelStyle?"":this.config.labelStyle;this.x=this.config.x;this.y=this.config.y;this.right=this.config.right;this.bottom=this.config.bottom;this.width=this.config.width;this.height=this.config.height;this.minwidth=this.config.minwidth;this.minheight=this.config.minheight;
this.autoDestroy=null==this.config.autoDestroy?!1:this.config.autoDestroy;this.hidden=null==this.config.hidden?!1:this.config.hidden;this.hideType=null==this.config.hideType?"display":this.config.hideType;this.parent&&"ui-toolbar"==this.parent.id&&(this.hideType="visibility");this.enabled=null==this.config.enabled?!0:this.config.enabled;this.padding=null==this.config.padding?0:this.config.padding;this.border=null==this.config.border?!1:this.config.border;this.borderStyle=null==this.config.borderStyle?
"":this.config.borderStyle;this.borderColor=null==this.config.borderColor?"":this.config.borderColor;this.ds=this.config.ds;this.fn=null==this.config.fn?{}:this.config.fn;this.fn.parent=this;this.events=null==this.config.events?{}:this.config.events;this.widgets=this.config.widgets||[];this.autoScroll=null==this.config.autoScroll?!1:this.config.autoScroll;this.html=null==this.config.html?"":this.config.html;this.text=null==this.config.text?"":this.config.text;this.color=null==this.config.color?"":
this.config.color;this.value=null==this.config.value?"":this.config.value;this.animSpeed=null==this.config.animSpeed?1E3:this.config.animSpeed;this.expandTime=this.config.expandTime||500;this.attr=this.config.attr;this.nofloat=this.config.nofloat;this.anchor=this.config.anchor||"";this.anchorMargin=this.config.anchorMargin||{left:0,top:0,right:0,bottom:0};this.radius=idev.convertNulls(this.config.radius,4);a=this.alignAchor();this.width=a.width;this.height=a.height;this.expanded=!0;this.parent&&"string"==
typeof this.x&&"@"==this.x.substr(0,1)&&(a=$("#"+this.parent.id).width(),this.x=null==a?parseInt(this.x.substr(1)):a-parseInt(this.x.substr(1)));this.config.right&&(a=$("#"+this.parent.id).width(),this.x=null==a?this.config.right:a-this.config.right);this.parent&&"string"==typeof this.y&&"@"==this.y.substr(0,1)&&(a=$("#"+this.parent.id).height(),this.y=null==a?parseInt(this.y.substr(1)):a-parseInt(this.y.substr(1)));this.config.bottom&&(a=$("#"+this.parent.id).height(),this.y=null==a?this.config.bottom:
a-this.config.bottom);this.border&&""==this.borderStyle&&(""!==this.borderColor?this.borderStyle="1px solid "+this.borderColor+";":"panel"==this.wtype?this.config.panelCls+=" ui-border":this.cls+=" ui-border");null!=this.width&&(this.width=parseInt(this.width));null!=this.minwidth&&this.width<this.minwidth&&(this.width=this.minwidth);null!=this.height&&("listbox"!=this.wtype&&"auto"==this.height?this.height=null:"auto"!=this.height&&(this.height=parseInt(this.height)));null!=this.minheight&&this.height<
this.minheight&&(this.height=this.minheight);null!=this.x&&(this.x=parseInt(this.x));null!=this.y&&(this.y=parseInt(this.y));null!=this.right&&(this.right=parseInt(this.right));null!=this.bottom&&(this.bottom=parseInt(this.bottom));"button"==this.wtype&&null==this.height&&(this.height=40);"button"==this.wtype&&null==this.width&&(this.width=80);this.calcElementStyle();this.roundCorners=null==this.config.roundCorners?!1:this.config.roundCorners;this.layout=null==this.config.layout?"":this.config.layout;
this.labelCls=this.config.labelCls||"";this.resizer=new idevResize(this);this.children=[];this.config.id=this.id;this.events.dblClick&&(this.events.dblclick=this.events.dblClick);this.events.afterRender&&(this.events.afterrender=this.events.afterRender);this.layoutConfig=this.config.layoutConfig;this.variable=this.config.variable;this.inLayout=this.resizing=!1},alignAchor:function(){var a={width:this.width,height:this.height};if(""!=this.anchor){this.rendered&&(a.height=this.getHeight(),a.width=this.getWidth());
var b=$("#"+this.renderTo).position();if(b){var c=this.parent.getInnerHeight(),d=this.parent.getInnerWidth();null==this.anchorMargin.left&&(this.anchorMargin.left=0);null==this.anchorMargin.top&&(this.anchorMargin.top=0);null==this.anchorMargin.right&&(this.anchorMargin.right=0);null==this.anchorMargin.bottom&&(this.anchorMargin.bottom=0);null==this.x&&null==this.y&&(c-=this.anchorMargin.top+this.anchorMargin.bottom,d-=this.anchorMargin.left+this.anchorMargin.right,this.parent.padding&&(d-=2*this.parent.padding));
null!=this.x&&(d-=this.x);null!=this.right&&(d-=this.right);null!=this.y&&(c-=this.y);null!=this.bottom&&(c-=this.bottom);-1!==this.anchor.indexOf("top")&&(a.height=c-b.top);-1!==this.anchor.indexOf("left")&&(a.width=d-b.left)}}return a},cssQuirks:function(a,b){return idev.internal.cssQuirks(a,b)},calcElementStyle:function(){this.elementStyle="";if(null!=this.x||null!=this.y)this.elementStyle+="position:absolute;";null!=this.x&&(this.elementStyle+="left:"+this.x+"px;");null!=this.y&&(this.elementStyle+=
"top:"+this.y+"px;");null!=this.width&&(this.elementStyle+="max-width:"+this.width+"px;width:"+this.width+"px;");null!=this.height&&(this.elementStyle="auto"==this.height?this.elementStyle+("height:"+this.height+";"):this.elementStyle+("max-height:"+this.height+"px;height:"+this.height+"px;"));this.hidden&&"visibility"==this.hideType?this.elementStyle+="visibility:hidden;":this.hidden&&(this.elementStyle+="display:none;");this.nofloat&&(this.elementStyle+="float:none;")},setDraggable:function(a){a?
$("#"+this.id).attr("draggable","Y"):$("#"+this.id).attr("draggable","N")},isDraggable:function(){return"Y"==$("#"+this.id).attr("draggable")?!0:!1},remove:function(){if(this.parent)for(var a=0;a<this.parent.widgets.length;a++)this.parent.widgets[a].id==this.id&&this.parent.widgets.splice(a,1)},destroy:function(a){this.events.destroy&&this.events.destroy(this);this.ds&&this.ds.unbind(this);this.ondestroy();if(this.widgets)for(var b=0;b<this.widgets.length;b++){var c=idev.get(this.widgets[b].id);try{c.destroy()}catch(d){}}this.tpl&&
delete this.tpl;this.iScroll&&delete this.iScroll;idev.internal.remove(this.id);$delay(100,function(a){delete a},this);a&&this.remove()},getPosition:function(){var a={x:0,y:0},b=$("#"+this.id).position();b&&(a.x=b.left,a.y=b.top);return a},css:function(a,b){return $("#"+this.id).css(a,b)},attr:function(a,b){return $("#"+this.id).attr(a,b)},bringForward:function(){var a=$("#"+this.id).css("z-index"),a="auto"==a?0:parseInt(a);$("#"+this.id).css("z-index",a+1)},sendBack:function(){var a=$("#"+this.id).css("z-index"),
a="auto"==a?0:parseInt(a);$("#"+this.id).css("z-index",a-1)},hide:function(){this.hidden=!0;"visibility"==this.hideType?$("#"+this.id).css("visibility","hidden"):$("#"+this.id).hide();this.onhide()},show:function(){this.hidden=!1;if("visibility"==this.hideType){$("#"+this.id).css("visibility","visible");idev.isIE8()&&"icon"==this.wtype&&this.refresh();try{for(var a=0;a<this.widgets.length;a++)idev.get(this.widgets[a].id).onshow()}catch(b){}}else $("#"+this.id).show();this.onshow()},isVisible:function(){return $("#"+
this.id).is(":visible")},fadeOut:function(a,b,c){null==a&&(a=this.animSpeed);$("#"+this.id).fadeOut(a,b,c)},fadeIn:function(a,b,c){null==a&&(a=this.animSpeed);$("#"+this.id).fadeIn(a,b,c)},fadeToggle:function(a,b,c){$("#"+this.id).fadeToggle(speed,b,c)},moveTo:function(a,b,c,d,f){null==d&&(d="linear");null==c&&(c="fast");$("#"+this.id).animate({left:a,top:b},c,d,f)},moveBy:function(a,b,c,d,f){null==d&&(d="linear");null==c&&(c="fast");$("#"+this.id).animate({left:"+="+a,top:"+="+b},c,d,f)},animate:function(a,
b,c,d){null!=a&&(null==c&&(c="linear"),null==b&&(b="fast"),$("#"+this.id).animate(a,b,c,d))},focus:function(){("input"==this.wtype||"textarea"==this.wtype||"combo"==this.wtype)&&$delay(100,function(a){a=document.getElementById(a+"-input");a.focus();if(idev.isFF()){var b=a.value.length;a.focus();a.setSelectionRange(b,b)}else a.value=a.value},this.id)},widgetCount:function(){return this.widgets.length},enable:function(a){this.enabled=a;"button"==this.wtype&&this.enableButton(a)},isEnabled:function(){return this.enabled},
getWidth:function(){return $("#"+this.id).width()},getHeight:function(){return $("#"+this.id).height()},getInnerWidth:function(){return $("#"+this.id).innerWidth()},getInnerHeight:function(){return $("#"+this.id).innerHeight()},getParent:function(){var a=this.renderTo,b=a.indexOf("-",3);-1!=b&&(a=a.substr(0,b));return idev.get(a)},getWidget:function(a){return 0>a||a>=this.widgets.length?null:this.children[a]},resize:function(a,b){if(!this.resizing){this.resizing=!0;$("#"+this.id).css("width",a);$("#"+
this.id).css("max-width",a);$("#"+this.id).css("height",b);$("#"+this.id).css("max-height",b);("west"==this.area||"east"==this.area)&&$("#"+this.id+"-filler").css("height",b);this.width=a;this.height=b;if(this.events.onResize)this.events.onResize(this);this.doLayout();this.resizing=!1}},fireEvent:function(a,b){try{return this.events[a].call(this,this,b),!0}catch(c){return!1}},doResize:function(a){a?this.resizer.add():this.resizer.remove()},collapse:function(a){$("#"+this.id).animate({height:a+"px"},
this.expandTime);this.expanded=!1;$("#"+this.id+"-expand").addClass("ui-panel-btn-expand");$("#"+this.id+"-expand").removeClass("ui-panel-btn-collapse")},expand:function(){$("#"+this.id).animate({height:this.height+"px"},this.expandTime);this.expanded=!0;$("#"+this.id+"-expand").removeClass("ui-panel-btn-expand");$("#"+this.id+"-expand").addClass("ui-panel-btn-collapse")},collapseWidth:function(a){$("#"+this.id).animate({width:a+"px"},this.expandTime);this.expanded=!1},expandWidth:function(){$("#"+
this.id).animate({width:this.width+"px"},this.expandTime);this.expanded=!0},addEvent:function(a,b){$("#"+this.id).bind(a,b)},removeEvent:function(a){$("#"+this.id).unbind(a)},doLayout:function(){if(!this.inLayout){this.inLayout=!0;if(this.bottom){var a=0,a="panel"==this.parent.wtype?$("#"+this.parent.id+"-content").height()-this.bottom:$("#"+this.parent.id).height()-this.bottom;$("#"+this.id).css("top",a)}this.right&&(a=0,a="panel"==this.parent.wtype?$("#"+this.parent.id+"-content").width()-this.right:
$("#"+this.parent.id).width()-this.right,$("#"+this.id).css("left",a));""!=this.anchor&&(a=this.alignAchor(),$("#"+this.id).width(a.width),$("#"+this.id).height(a.height));if(this.events.onLayout)this.events.onLayout(this);for(a=0;a<this.children.length;a++)this.children[a].doLayout();this.inLayout=!1}},beforeResize:function(){},afterResize:function(){},ondestroy:function(){},onhide:function(){this.parent&&"form"==this.parent.layout&&$("#"+this.renderTo+"-label").hide();this.events.hide&&this.events.hide(this);
for(var a=0;a<this.widgets.length;a++){var b=idev.get(this.widgets[a].id);try{b.onhide()}catch(c){}}},onshow:function(){this.parent&&"form"==this.parent.layout&&!0!==this.hidden&&$("#"+this.renderTo+"-label").show();this.events.show&&this.events.show(this);try{for(var a=0;a<this.widgets.length;a++)idev.get(this.widgets[a].id).onshow()}catch(b){}},refresh:function(){},setOpacity:function(a,b){if(!isNaN(a)){var c=this;b&&(c+="-"+b);c.css("opacity",a)}},getValue:function(){return""},setValue:function(){}}),
idevCore=idevObject.extend({init:function(){this.body=document.body;this.pageManager=new this.pageManagerClass;this.agent=navigator.userAgent.toLowerCase();this.widgets=[];this.plugins=[];this.pgHeight=this.pgWidth=null;this.heightadj=0;this.body="container";this.orient="profile";this.app=this.geoerror=this.geoposition=null;this.controlHeight=this.ey=this.sy=this.ex=this.sx=0;this.swipping=this.hasPopup=!1;this.path="js/idevui/";this.languagepath="js/";this.blankimage="images/s.gif";this.fadeInTime=
this.fadeOutTime=1E3;this.animationTime=500;this.modals=this.uiid=0;this.charWidth=8;this._dragging=!1;this.designMode=!0;this.dependancy=[];this.loadedFiles=[];this.hideFN=this.hideWidget=null;_preferences.config=_preferences.config||{};_preferences.button=_preferences.button||{};_preferences.ux=_preferences.ux||[];_preferences.imports=_preferences.imports||[];_preferences.config.norightclick=null==_preferences.config.norightclick?!0:_preferences.config.norightclick;_preferences.config.fitDocument=
null==_preferences.config.fitDocument?!0:_preferences.config.fitDocument;_preferences.config.pageFit=null==_preferences.config.pageFit?!0:_preferences.config.pageFit;_preferences.config.trapunload=null==_preferences.config.trapunload?!0:_preferences.config.trapunload;_preferences.config.unloadText=null==_preferences.config.unloadText?!1:_preferences.config.unloadText;_preferences.useCSS3=null==_preferences.useCSS3?!0:_preferences.useCSS3;if(_preferences.meta)for(var a=0;a<_preferences.meta.length;a++)this.dependancy.push(_preferences.meta[a]);
this.dependancy.push(_preferences.libpath+"idevui.css");_preferences.theme?-1==_preferences.theme.indexOf("/")?this.dependancy.push(_preferences.libpath+"themes/"+_preferences.theme+"/theme.css"):this.dependancy.push(_preferences.theme):this.dependancy.push(_preferences.libpath+"themes/default/theme.css");_preferences.styling&&this.dependancy.push(_preferences.styling);this.dependancy.push(_preferences.libpath+"jquery17min.js");this.dependancy.push(_preferences.libpath+"jquerycookie.js");this.dependancy.push(_preferences.libpath+
"raphaelmin.js");this.dependancy.push(_preferences.libpath+"iscroll.js");this.dependancy.push(_preferences.libpath+"icons.js");this.dependancy.push(_preferences.libpath+"jquery.animateshadow.js");_preferences.title&&(document.title=_preferences.title);this.colors=new idevColors;this.url=String(window.location);this.rawUrl=String(window.location);this.parameters=[];if(0<this.url.indexOf("?")){var b=this.url.indexOf("?"),c=this.url.substr(b+1);this.url=this.url.substr(0,b);b=c.split("&");for(a in b){if("string"!=
typeof b[a])break;c=b[a].split("=");this.parameters[c[0]]=c[1]}}this.standaloneOffset=0;this.events={onstartdrag:null,ondrag:null,onenddrag:null,onmousemove:null,onmousedown:null,onmouseup:null};this.dataShare={};this.fn={};this.rkey=13;for(this.rAlphabet="";93>this.rAlphabet.length;)a=String.fromCharCode(Math.floor(95*Math.random()+1)+32),"%"!=a&&("*"!=a&&-1==this.rAlphabet.indexOf(a))&&(this.rAlphabet+=a);this.defaultMWidth=250;this.defaultMHeight=150;this.defaultMPadding=10;this.defaultMBtnWidth=
70;this.defaultMBtnHeight=26;this.defaultMIconSize=48;this.defaultMFontSize=14;this.defaultMBBarHeight=34;this.defaultMBGCls="ui-message-body";this.defaultMCls="ui-message-content";this.defaultMTitleCls="ui-message-title";this.defaultMTbarCls="ui-message-tbar";this.defaultMBbarCls="ui-message-bbar";this.defaultMShadow=!1;this.defaultTitleHeight=24;this.focusHighlight=!1;this.highlightCSS="0px 0px 8px #336699";this.isIE9()&&this.internal.addStyle(".ie9gradient{filter:none !important;}")},funcs:{},
internal:{cssQuirks:function(a,b){idev.isIE9()&&(a+=" ie9gradient");idev.isIE8()&&b&&(a+=" ui-modern");return a},killBackSpace:function(a){a=a?a:window.event;if(70==a.keyCode&&a.ctrlKey||114==a.keyCode)return a.preventDefault(),!1;var b=a.target?a.target:a.srcElement?a.srcElement:null;return b&&b.tagName&&b.type&&/(password)|(text)|(file)/.test(b.type.toLowerCase())||"textarea"==b.tagName.toLowerCase()?!0:8==(a.keyCode?a.keyCode:a.which?a.which:null)&&null==a.target?(a.preventDefault&&a.preventDefault(),
!1):!0},load:function(){"object"===typeof idevLoader&&(idevLoader.steps=idev.dependancy.length);"object"===typeof idevLoader&&idevLoader.step(idev.dependancyIndex);if(idev.dependancyIndex==idev.dependancy.length)idev.internal.prepare(),"object"===typeof idevLoader&&idevLoader.remove();else if("object"==typeof idev.dependancy[idev.dependancyIndex])idev.internal.addMeta(idev.dependancy[idev.dependancyIndex]),idev.dependancyIndex++;else{var a=idev.dependancy[idev.dependancyIndex].toLowerCase();""==a?
(idev.dependancyIndex++,idev.internal.load()):(-1!=a.indexOf(".css")?idev.internal.addStyleSheet(idev.dependancy[idev.dependancyIndex],idev.internal.load):idev.internal.addScript(idev.dependancy[idev.dependancyIndex],idev.internal.load),idev.dependancyIndex++)}},refreshCSS:function(a){var b,c;for(b=0;c=document.getElementsByTagName("link")[b];b++)if(-1!=c.getAttribute("rel").indexOf("style")&&-1!=c.getAttribute("href").indexOf(a)){var d=c.href.replace(/(&|\\?)forceReload=d /,"");c.href=d+(0<=d.indexOf("?")?
"&":"?")+"forceReload="+(new Date).valueOf()}},callback:function(){},loadDependants:function(){_language.setLanguage(_preferences.language);idev.dependancyIndex=0;"english"!=_preferences.language&&idev.dependancy.push(_preferences.languagepath+_preferences.language+".js");idev.isIE7()&&idev.dependancy.push(_preferences.libpath+"/charts/excanvasmin.js");idev.isIE8()&&idev.dependancy.push(_preferences.libpath+"/charts/excanvasmin.js");_preferences.config.charts&&(idev.dependancy.push(_preferences.libpath+
"charts/jqueryflotmin.js"),idev.dependancy.push(_preferences.libpath+"charts/jqueryflotaxislabels.js"),idev.dependancy.push(_preferences.libpath+"charts/jqueryflotpiemin.js"));if(_preferences.ux)for(var a=0;a<_preferences.ux.length;a++)idev.dependancy.push(_preferences.libpath+"ux/"+_preferences.ux[a]);if(_preferences.imports)for(a=0;a<_preferences.imports.length;a++)idev.dependancy.push(_preferences.apppath+_preferences.imports[a]);_preferences.events&&("function"==typeof _preferences.events.beforeLoad&&
_preferences.events.beforeLoad(),"function"==typeof _preferences.events.beforeload&&_preferences.events.beforeload());idev.dependancy.push(_preferences.apppath+_preferences.app);idev.internal.load()},prepare:function(){idev.extensions();$(document).ready(function(){idev.dom=$;idev.pgHeight=$(document).height();idev.pgWidth=$(document).width();$("#container").html("");idev.internal.bind();idev.app.events&&("function"==typeof idev.app.events.beforeRender&&idev.app.events.beforeRender(),"function"==
typeof idev.app.events.beforerender&&idev.app.events.beforerender());idev.internal.render();idev.app.events&&(idev.isTouch()&&window.scrollTo(0,1),"function"==typeof idev.app.events.afterRender&&idev.app.events.afterRender(),"function"==typeof idev.app.events.afterrender&&idev.app.events.afterrender());idev.app.width&&$("#container").width(idev.app.width);idev.app.height&&$("#container").height(idev.app.height);idev.callback();if(idev.isIPad()||idev.isIPhone()||idev.isAndroid())"portrait"==_preferences.orientation||
"landscape"==_preferences.orientation?"landscape"==_preferences.orientation?$("body").attr("orient","landscape"):$("body").attr("orient","profile"):(idev.currentWidth=window.innerWidth,setInterval(idev.internal.onUpdateLayout,500))})},isLoaded:function(a){for(var b=0;b<idev.loadedFiles.length;b++)if(idev.loadedFiles[b]==a)return!0;return!1},addStyle:function(a){var b=document.createElement("link"),a=encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,
"%2A").replace(/%20/g,"+");document.head=document.head||document.getElementsByTagName("head"[0]);b.href="data:text/css,"+a;b.rel="stylesheet";document.head.appendChild(b)},addStyleSheet:function(a,b){if(idev.internal.isLoaded(a))b&&b(a);else{idev.loadedFiles.push(a);var c=document.createElement("link");c.rel="stylesheet";c.href=a;c.callback=b;$debug(a);idev.isIE7()||idev.isIE8()?c.onreadystatechange=function(){if("loaded"==this.readyState||"complete"==this.readyState)idev.loadedFiles.push(a),this.callback(a)}:
$delay(200,function(b){b&&b(a)},b);document.getElementsByTagName("head")[0].appendChild(c)}},addScript:function(a,b,c){if(idev.internal.isLoaded(a))idev.errorHandler("Already Loaded"),b&&b(c);else{idev.loadedFiles.push(a);var d=document.createElement("script");d.type="text/javascript";d.src=a;d.callback=b;$debug(a);idev.isIE7()||idev.isIE8()?d.onreadystatechange=function(){if("loaded"==this.readyState||"complete"==this.readyState)"undefined"!=typeof $&&null==idev.pgWidth&&(idev.pgHeight=$(document).height(),
idev.pgWidth=$(document).width()),b&&this.callback(c,a)}:(d.onload=function(){"undefined"!=typeof $&&null==idev.pgWidth&&(idev.pgHeight=$(document).height(),window.navigator.standalone&&idev.isIPad()&&(idev.pgHeight-=20),idev.pgWidth=$(document).width());idev.loadedFiles.push(a);b&&this.callback(c,a)},d.onerror=function(){idev.errorHandler("Failed to load script '"+a+"'");b&&this.callback(c,a)});document.getElementsByTagName("head")[0].appendChild(d)}},addMeta:function(a,b){var c=document.createElement("meta");
c.name=a.name;c.content=a.content;document.getElementsByTagName("head")[0].appendChild(c);b&&idev.utils.delay(100,function(b){b(a)},b)},bind:function(){if("undefined"!=typeof document.addEventListener)document.addEventListener("keydown",idev.internal.killBackSpace,!1);else if("undefined"!=typeof document.attachEvent)document.attachEvent("onkeydown",idev.internal.killBackSpace);else if(null!=document.onkeydown){var a=document.onkeydown;document.onkeydown=function(b){a(b);idev.internal.killBackSpace(b)}}else document.onkeydown=
idev.internal.killBackSpace;window.onerror=function(a,c,d){_preferences.verbose&&alert("JavaScript error:\n\n"+a+"\n\nOn line "+d+"\n\n"+c);idev.errorHandler(a+"\n  On line "+d+"\n  "+c);return!0};_preferences.config.trapunload&&(window.onbeforeunload=function(){return _preferences.config.unloadText?_preferences.config.unloadText:"Are you sure that you wish to exit the application?"});$(window).resize(function(a){idev.pageManager.syncSize(a);if(null!=idev.app.events)if("function"==typeof idev.events.onResize)idev.app.events.onResize(a);
else if("function"==typeof idev.events.onresize)idev.app.events.onresize(a)});if(_preferences.config.norightclick||_preferences.config.noRightClick)document.oncontextmenu=function(){return!1};$(document).bind("mousedown",function(a){var c=0;idev.mousedowntime=new Date;idev.mousemoved=!1;idev.mousestartx=a.pageX;idev.mousestarty=a.pageY;idev.mouseendx=a.pageX;idev.mouseendy=a.pageY;null==a&&(a=window.event);idev.isIE7()&&(c=1);idev.isIE8()&&(c=1);if(idev.events.onmousedown)idev.events.onmousedown(a);
idev.hideFN&&(idev.hideFN(idev.hideWidget,a),idev.hideFN=null,idev.hideWidget=null);idev.orgEvent=a;if(idev.hideWidget){var d=null!=a.target?a.target:a.srcElement;d&&d.id.substr(0,idev.hideWidget.id.length)!=idev.hideWidget.id&&$delay(300,function(){idev.hideWidget&&(idev.hideWidget.parent&&(idev.hideWidget.parent.visible=!1),idev.hideWidget.hide(),idev.hideWidget=null)})}if(a.button==c&&(d=null!=a.target?a.target:a.srcElement,c=!1,!(d.id&&-1!=d.id.indexOf("-wrapper")))){idev.dd=!1;idev.widgetMoved=
!1;for(idev._dragWidgetId=d.id;d;){d.id&&-1!=d.id.indexOf("-title")&&(c=!0);idev._dragWidget=idev.get(d.id);if(idev._dragWidget&&idev._dragWidget.dd.allowDrag)return idev._dragWidget.dd.startDD(a),idev.dd=!0,document.onselectstart=function(){return!1},d.ondragstart=function(){return!1},c=idev.utils.mousePosition(a),idev._sX=c.x,idev._sY=c.y,!1;var f=$("#"+d.id).attr("draggable");if("Y"==f){!c&&idev._dragWidget&&"window"!=idev._dragWidget.wtype&&(c=!0);break}if(idev._dragWidget&&"button"==idev._dragWidget.wtype&&
(f=$("#"+d.id).attr("draggable"),"Y"!=f))return;d=d.parentNode;if(null==d)return}if("window"!=idev._dragWidget.wtype||c){idev._resizable=!1;-1!=idev._dragWidgetId.indexOf("-drhandle")&&(idev._resizable="Y"==$("#"+d.id).attr("resizable")?!0:!1);if(idev._dragWidget.events.beforedrag&&!1===idev._dragWidget.events.beforedrag(idev._dragWidget))return!1;if(idev._dragWidget.resizer.isResizing()||!("panel"==idev._dragWidget.wtype&&idev._dragWidget.title&&-1==idev._dragWidgetId.indexOf("-titletext"))){idev._cursor=
null;f=idev.internal.getMouseOffset(d,a);c=idev.utils.mousePosition(a);idev._startX=f.x;idev._startY=f.y;idev._sX=c.x;idev._sY=c.y;idev._dragging=!0;idev._offsetX=10;idev._offsetY=10;idev._oldZIndex=d.style.zIndex;d.style.zIndex=2E4;idev._dragElement=d;document.onselectstart=function(){return!1};d.ondragstart=function(){return!1};idev._dragWidget.events.startdrag&&idev._dragWidget.events.startdrag(idev._dragWidget,a);if(idev.events.onstartdrag)idev.events.onstartdrag(idev._dragWidget,a);return!1}}}});
$(document).bind("mousemove",function(a){null==a&&(a=window.event);idev.mousemoved=!0;idev.mouseendx=a.pageX;idev.mouseendy=a.pageY;if(idev.dd){idev.dd=!1;idev._dragElement=null!=a.target?a.target:a.srcElement;var c=idev.findID(idev._dragElement).id,d=idev._dragWidget.id+"-dd",f=c.indexOf("-",3);-1==f&&(f=c.indexOf("_",3));-1!=f&&c!=d&&(c=c.substr(0,f),(c=$get(c))&&c.dd.canDrop(idev._dragWidget));idev._dragWidget.dd.move(a);idev.dd=!0;idev.widgetMoved=!0;a.preventDefault()}else if(idev._dragging){null==
idev._cursor&&(idev._cursor=$("#"+idev._dragElement.id).css("cursor"),$("#"+idev._dragElement.id).css("cursor","move"));var g=idev.utils.mousePosition(a),c=parseInt(g.x-idev._startX),d=parseInt(g.y-(idev._startY+idev.app.toolbar.height+idev._offsetY)),f=g.x-idev._sX,i=g.y-idev._sY;idev._sX=g.x;idev._sY=g.y;if(idev._resizable){var a=parseInt(idev._dragElement.style.left.replace("px","")),g=parseInt(idev._dragElement.style.top.replace("px","")),m=parseInt(idev._dragElement.style.width.replace("px",
"")),k=parseInt(idev._dragElement.style.height.replace("px",""));-1!=idev._dragWidgetId.indexOf("-drhandlenw")?idev._dragWidget.resizer.change(c,d,m-f,k-i):-1!=idev._dragWidgetId.indexOf("-drhandlene")?idev._dragWidget.resizer.change(a,d,m+f,k-i):-1!=idev._dragWidgetId.indexOf("-drhandlen")?idev._dragWidget.resizer.change(a,d,m,k-i):-1!=idev._dragWidgetId.indexOf("-drhandlew")?idev._dragWidget.resizer.change(c,g,m-f,k):-1!=idev._dragWidgetId.indexOf("-drhandlese")?idev._dragWidget.resizer.change(a,
g,m+f,k+i):-1!=idev._dragWidgetId.indexOf("-drhandlesw")?idev._dragWidget.resizer.change(c,g,m-f,k+i):-1!=idev._dragWidgetId.indexOf("-drhandles")?idev._dragWidget.resizer.change(a,g,m,k+i):-1!=idev._dragWidgetId.indexOf("-drhandlee")&&idev._dragWidget.resizer.change(a,g,m+f,k)}else{c=parseInt(idev._dragElement.style.left.replace("px",""));d=parseInt(idev._dragElement.style.top.replace("px",""));idev._dragElement.style.left=c+f+"px";idev._dragElement.style.top=d+i+"px";a.preventDefault();if(0!=f||
0!=i)idev.widgetMoved=!0;if(idev._dragWidget.events.ondrag)idev._dragWidget.events.ondrag(idev._dragWidget,a);if(idev.events.ondrag)idev.events.ondrag(idev._dragWidget,a)}}else if(idev.events.onmousemove)idev.events.onmousemove(a)});$(document).bind("mouseup",function(a){null==a&&(a=window.event);idev.mouseuptime=new Date;if(idev.events.onmouseup)idev.events.onmouseup(a);if(idev.dd)idev.dd=!1,idev._dragWidget&&idev._dragWidget.dd.endDD(),idev._dragWidget.dd.allowDrag&&!idev.widgetMoved&&idev._dragWidget.enabled&&
idev._dragWidget.events.click&&idev._dragWidget.events.click(idev._dragWidget,idev.orgEvent),document.onselectstart=null,a.preventDefault();else if(idev._dragging){idev._dragElement.style.zIndex=idev._oldZIndex;idev._dragElement.ondragstart=function(){return!0};null!=idev._cursor&&$("#"+idev._dragElement.id).css("cursor",idev._cursor);idev._dragElement=null;idev._dragging=!1;document.onselectstart=null;idev._dragWidget&&idev.widgetMoved&&idev._dragWidget.events.afterdrag&&idev._dragWidget.events.afterdrag(idev._dragWidget,
a);if(idev.events.onenddrag)idev.events.onenddrag(idev._dragWidget,a);a.preventDefault();a.stopPropagation();return!1}});idev.isTouch()&&(document.addEventListener("touchstart",function(a){var c=null!=a.target?a.target:a.srcElement;idev.mousedowntime=new Date;idev.mousemoved=!1;idev._swipping=!1;idev.widgetMoved=!1;var d=a.touches[0];idev.mousestartx=d.pageX;idev.mousestarty=d.pageY;idev.mouseendx=d.pageX;for(idev.mouseendy=d.pageY;c;){idev._dragWidget=idev.get(c.id);var f=$("#"+c.id).attr("draggable");
if("Y"==f)break;if(idev._dragWidget&&"button"==idev._dragWidget.wtype&&(f=$("#"+c.id).attr("draggable"),"Y"!=f))return;c=c.parentNode;if(null==c){"slide"==idev.pageManager.animationType&&-1!=a.target.id.indexOf("-content")&&(idev._swipping=!0,idev._startX=d.pageX,idev._startY=d.pageY);return}}if(idev._dragWidget.events.beforedrag&&!1===idev._dragWidget.events.beforedrag(idev._dragWidget))return!1;var f=parseInt(c.style.left.replace("px","")),g=parseInt(c.style.top.replace("px",""));idev._startX=d.pageX-
f;idev._startY=d.pageY-g;idev._dragging=!0;idev._oldZIndex=c.style.zIndex;c.style.zIndex=1E4;idev._dragElement=c;idev._dragWidget.events.startdrag&&idev._dragWidget.events.startdrag(idev._dragWidget);if(idev.events.onstartdrag)idev.events.onstartdrag(idev._dragWidget,a);return!1}),document.addEventListener("touchmove",function(a){var c=a.touches[0];idev.mouseendx=c.pageX;idev.mouseendy=c.pageY;idev.mousemoved=!0;if(idev.events.onmousemove)idev.events.onmousemove(a);idev.mousemoved=!0;if(idev._dragging&&
(idev._dragElement.style.left=c.pageX-idev._startX+"px",idev._dragElement.style.top=c.pageY-idev._startY+"px",a.preventDefault(),idev.widgetMoved=!0,idev._endX=c.pageX,idev._endY=c.pageY,idev._dragWidget.events.ondrag))idev._dragWidget.events.ondrag(idev._dragWidget,a);idev._swipping&&(c=a.touches[0],idev._endX=c.pageX,idev._endY=c.pageY);if(idev.events.onmousemove)idev.events.onmousemove(a)}),document.addEventListener("touchend",function(a){idev.mouseuptime=new Date;20>idev.mouseendx-idev.mousestartx&&
(20>idev.mouseendy-idev.mousestarty&&!idev._dragging)&&(idev.mousemoved=!1);if(idev.events.onmouseup)idev.events.onmouseup(a);if(idev._dragging&&(idev._dragElement.style.zIndex=idev._oldZIndex,idev._dragElement=null,idev._dragging=!1,document.onselectstart=null,idev._dragWidget&&idev._dragWidget.events.afterdrag&&idev._dragWidget.events.afterdrag(idev._dragWidget),idev.events.onenddrag))idev.events.onenddrag(idev._dragWidget,a);idev._swipping&&(a=idev._endX-idev._startX,100<a&&idev.prevPage(),-100>
a&&idev.nextPage(),idev._swipping=!1)}))},onUpdateLayout:function(){if(window.innerWidth!=idev.currentWidth){idev.currentWidth=window.innerWidth;var a=idev.currentWidth<$(document).width()?"profile":"landscape";idev.orient=a;if(idev.app.events&&idev.app.events.onOrientation)idev.app.events.onOrientation(idev.orient)}},onHoverIn:function(a){null==a&&(a=window.event);var b=this.id.indexOf("_");if(-1==b){var c=idev.get(this.id);null!=c.events&&null!=c.events.click&&(c.resizer.resizing||c.enabled&&c.events.hover(c,
!0,a))}else c=this.id.substr(0,b),b=this.id.substr(b+1),c=idev.get(c),null!=c.events&&null!=c.events.click&&(c.dsIndex=parseInt(b),c.resizer.resizing||c.enabled&&c.events.hover(c,!0,b,c.selected,a))},onHoverOut:function(a){null==a&&(a=window.event);var b=this.id.indexOf("_");if(-1==b){var c=idev.get(this.id);null!=c.events&&null!=c.events.click&&(c.resizer.resizing||c.enabled&&c.events.hover(c,!1,a))}else c=this.id.substr(0,b),b=this.id.substr(b+1),c=idev.get(c),null!=c.events&&null!=c.events.click&&
(c.dsIndex=parseInt(b),c.resizer.resizing||c.enabled&&c.events.hover(c,!1,b,c.selected,a))},onClick:function(a){null==a&&(a=window.event);if(!idev.widgetMoved){var b=this.id.indexOf("_",1);if(-1==b){var c=idev.get(this.id);null!=c.events&&null!=c.events.click&&(c.resizer.resizing||c.enabled&&c.events.click(c,a))}else if(c=this.id.substr(0,b),b=this.id.substr(b+1),c=idev.get(c),null!=c.events&&(c.dsIndex=parseInt(b),!c.resizer.resizing&&c.enabled)){c.autoSelect&&(-1!=c.selected&&($("#"+c.id+"_"+c.selected).removeClass(c.selectCls),
""!=c.selectColor&&c.updateItem(c.selected,"background-color","")),""!=c.selectCls&&$("#"+this.id).addClass(c.selectCls),""!=c.selectColor&&c.updateItem(b,"background-color",c.selectColor));var d=c.selected;c.selected=b;c.events.click&&c.events.click(c,b,d,a)}}},onDblClick:function(a){null==a&&(a=window.event);var b=this.id.indexOf("_");if(-1==b){var c=idev.get(this.id);null!=c.events&&null!=c.events.dblclick&&(c.resizer.resizing||c.enabled&&c.events.dblclick(c,a))}else c=this.id.substr(0,b),b=this.id.substr(b+
1),c=idev.get(c),null!=c.events&&null!=c.events.dblclick&&(c.dsIndex=parseInt(b),!c.resizer.resizing&&c.enabled&&(c.events.dblclick(c,b,c.selected,a),c.selected=b))},onContextMenu:function(a){null==a&&(a=window.event);var b=idev.get(this.id);b.events.contextMenu?b.events.contextMenu(b,a):b.events.contextmenu&&b.events.contextmenu(b,a)},onChange:function(a){null==a&&(a=window.event);var b=idev.get(this.id);b.events.change(b,a)},onLostFocus:function(a){null==a&&(a=window.event);var b=idev.get(this.id.replace("-input",
""));b&&(""!=b.watermark&&""==($("#"+b.id+"-input").val()||"")&&b.setValue(""),idev.focusHighlight&&idev.dom("#"+b.id).css("box-shadow",""),b.events.lostfocus&&b.events.lostfocus(b,a))},onFocus:function(a){null==a&&(a=window.event);var b=idev.get(this.id.replace("-input",""));b&&(""!=b.watermark&&b.watermark==$("#"+b.id+"-input").val()&&($("#"+b.id+"-input").val(""),$("#"+b.id+"-input").css("color","")),idev.focusHighlight&&idev.dom("#"+b.id).css("box-shadow",idev.highlightCSS),b.events.focus&&b.events.focus(b,
a))},onKeypress:function(a){var b=idev.get(this.id);b.events.keypress&&b.events.keypress(b,a)},beforeRender:function(a){null!=a.events&&("function"==typeof a.events.beforeRender?a.events.beforeRender(a):"function"==typeof a.events.beforerender&&a.events.beforerender(a))},afterRender:function(a){null!=a.events&&("function"==typeof a.events.afterRender?a.events.afterRender(a):"function"==typeof a.events.afterrender&&a.events.afterrender(a))},remove:function(a){for(var b=0;b<idev.widgets.length;b++){var c=
idev.widgets[b];if(null!=c.id&&c.id==a){if(c.parent&&c.parent.children)for(a=0;a<c.parent.children.length;a++)if(c.parent.children[a]==c){c.parent.children.splice(a,1);break}$("#"+c.id).remove();idev.widgets.splice(b,1);return!0}}return!1},nextUIID:function(a){idev.uiid++;for(sID=idev.uiid.toString();6>sID.length;)sID="0"+sID;return null!=a?a+sID:"ID"+sID},renderWidget:function(a,b){var c=null;b.page=a;null==b.renderTo?b.renderTo=a.id:""==b.renderTo&&(b.renderTo=a.id);if(!b.deferredRender){if(b instanceof
baseWidget)return b.render(),b.parent&&b.parent.children&&b.parent.children.push(b),b.id;switch(b.wtype){case "checkbox":c=new idev.ui.widgetCheckbox(b);break;case "radio":c=new idev.ui.widgetRadio(b);break;case "element":c=new idev.ui.widgetElement(b);break;case "html":c=new idev.ui.widgetHTML(b);break;case "spacer":c=new idev.ui.widgetSpacer(b);break;case "image":c=new idev.ui.widgetImage(b);break;case "input":case "textfield":c=new idev.ui.widgetTextField(b);break;case "textarea":c=new idev.ui.widgetTextArea(b);
break;case "combo":c=new idev.ui.widgetComboBox(b);break;case "label":c=new idev.ui.widgetLabel(b);break;case "svgbutton":c=new idev.ui.widgetSVGButton(b);break;case "button":c=new idev.ui.widgetButton(b);break;case "switch":c=new idev.ui.widgetSwitch(b);break;case "icon":c=new idev.ui.widgetIcon(b);break;case "listbox":c=new idev.ui.widgetListbox(b);break;case "panel":c=new idev.ui.widgetPanel(b);break;case "list":c=new idev.ui.widgetList(b);break;case "dataview":c=new idev.ui.widgetDataView(b);
break;case "canvas":c=new idev.ui.widgetCanvas(b);break;case "chart":c=new idev.ui.widgetChart(b);break;case "slider":c=new idev.ui.widgetSlider(b);break;case "progressbar":c=new idev.ui.widgetProgress(b);break;case "iframe":c=new idev.ui.widgetIFrame(b);break;case "object":c=new idev.ui.widgetObject(b);break;case "grid":c=new idev.ui.widgetGrid(b);break;case "tabpanel":c=new idev.ui.widgetTabPanel(b);break;case "sound":c=new idev.ui.widgetSound(b);break;case "composite":c=new idev.ui.widgetComposite(b);
break;default:var d=idev.plugins[b.wtype];d?c=new d(b):idev.errorHandler("NULL PLUGIN FOR:["+b.wtype+"]")}if(null!=c)return c.render(),b.parent&&b.parent.children&&b.parent.children.push(c),c.id;idev.errorHandler("Unknown widget '"+b.wtype+"'");return""}},renderWidgets:function(a,b,c,d,f,g){var i;if(null!=c)if(null==f&&(f=0),"table"==d){var m=0,k=0;if(null!=g&&null!=g.columns&&0!=g.columns){d=$("#"+g.id).width()-2;g.attr=null==g.attr?" cellspacing=0 cellpadding=0":g.attr;d="<table class='ui-table' id='"+
b+"-table' "+g.attr+" border=0 width='"+d+"px;'><tbody id='"+b+"-body'></tbody></table>";$("#"+b).append(d);i=b+"-body";for(var j=0;j<c.length;j++){var h=c[j];if("undefined"==typeof h)break;if(null!=h.wtype){h.page=a;h.parent=g;if(0==m){var q=h.attr||"",d="<tr>";0<g.rowHeight&&(d="<tr height="+g.rowHeight+" >");for(f=0;f<g.columns;f++){var l="",n=c[j+f];if(null!=n){if(null!=n.wtype&&n.cellStyle&&(l=n.cellStyle),b=i+"-cell"+(k+f),d+="<td valign='top' id='"+b+"' "+q+" style='"+l+"'></td>",b=q.toLowerCase().indexOf("colspan"),
-1!=b){b=q.substr(b+7);b=idev.utils.ltrim(b);b=b.replace("=","");try{var r=parseIn(b);1<r&&(f+=r-1)}catch(y){f++}}}else b=i+"-cell"+(k+f),d+="<td valign='top' id='"+b+"' "+q+"></td>"}d+="</tr>";$("#"+i).append(d)}b=i+"-cell"+k;try{h.wtype=h.wtype.toLowerCase(),h.renderTo=b,h.id=idev.internal.renderWidget(a,h)}catch(u){alert("error0:"+u.message)}m++;m==g.columns&&(m=0);k++}}}}else if("column"==d){m=k=0;r=-1;h=null==g.rowHeight?"":g.rowHeight;g.padding=g.padding||0;i=$("#"+g.id).width();l=$("#"+g.id+
"-body").height();"panel"==g.wtype&&($("#"+g.id+"-content").height(),$("#"+g.id+"-content").width());"composite"==g.wtype&&g.height&&(h=g.height);g.attr=null==g.attr?" cellspacing=0 cellpadding=0":g.attr;m=$("#"+g.id).width();for(j=0;j<c.length;j++)">>"!=c[j]?c[j].variable?r=j:m-=c[j].width:">>"!==c[j]&&"string"==typeof c[j]&&(m-=c[j].length*idev.charWidth);d="<table class='ui-table' id='"+b+"-table' border=0 "+g.attr+"><tbody id='"+b+"-body'></tbody></table>";g&&"composite"==g.wtype&&g.width&&(d=
"<table class='ui-table' id='"+b+"-table' border=0  width=100%"+g.attr+"><tbody id='"+b+"-body'></tbody></table>");$("#"+b).append(d);i=b+"-body";j=null;if(0<c.length){d="<tr id='"+b+"-row' height='"+h+"px'>";0<g.rowHeight&&(d="<tr height="+g.rowHeight+" >");g.layoutConfig&&(j=g.height-2*g.padding,"panel"==g.wtype&&(j=g.bodyheight-2*g.padding),g.layoutConfig.fit&&(d="<tr height="+j+" >"));for(f=0;f<c.length;f++)h=c[f],j=l="",null!=h.wtype&&h.cellStyle&&(l=h.cellStyle),b=i+"-cell"+(k+f),null!=g.columnAlign&&
(j=g.columnAlign.toLowerCase()),d="center"==j?d+("<td valign='center' id='"+b+"' style='"+l+"'></td>"):"bottom"==j?d+("<td valign='bottom' id='"+b+"' style='"+l+"'></td>"):d+("<td valign='top' id='"+b+"' style='"+l+"'></td>")}else d="<tr id='"+b+"-row' height='"+h+"px'>",0<g.rowHeight&&(d="<tr height="+g.rowHeight+" >"),g.layoutConfig&&(j=g.height-2*g.padding,"panel"==g.wtype&&(j=g.bodyheight-2*g.padding),g.layoutConfig.fit&&(d="<tr height="+j+" >"));$("#"+i).append(d+"</tr>");for(j=0;j<c.length;j++){h=
c[j];if(null!=h.wtype){h.page=a;h.parent=g;j==r&&(h.width=m);g.layoutConfig&&g.layoutConfig.fit&&(h.height=g.bodyheight-2*g.padding);b=i+"-cell"+k;try{h.wtype=h.wtype.toLowerCase(),h.renderTo=b,h.id=idev.internal.renderWidget(a,h)}catch(v){alert("error 1:"+v.message)}}else">>"==h?(b=i+"-cell"+k,n={wtype:"spacer",id:g.id+"-spacer",renderTo:b,width:m},idev.internal.renderWidget(a,n)):(b=i+"-cell"+k,"string"==typeof h&&(n={wtype:"html",renderTo:b,html:h},idev.internal.renderWidget(a,n)));k++}}else if("frame"==
d){g.padding=g.padding||0;i=$("#"+g.id).width();l=$("#"+g.id+"-body").height();"panel"==g.wtype&&(l=$("#"+g.id+"-content").height()-2*g.padding,i=$("#"+g.id+"-content").width()-2*g.padding);null==l&&(l=g.height-g.padding);null==i&&(i=g.width-2*g.padding);i-=0;l-=0;g.attr=null==g.attr?" cellspacing=0 cellpadding=0":g.attr;for(var d="<table class='ui-table' id='"+b+"-table' border=0 "+g.attr+" style='width:"+i+"px;height:"+l+"px;'><tbody id='"+b+"-body'>",q=m=r=n=k="",w=h=j=0,s=0,x=0,t=0,f=0;f<c.length;f++)"north"==
c[f].area&&""==k&&(j=c[f].height||0,k="<tr id='"+b+"-row-north' height='"+j+"px'>",k+="<td id='"+b+"-north' colspan='{CS}'></td></tr>"),"west"==c[f].area&&""==r&&(w=c[f].width||0,c[f].height>s&&(s=c[f].height),r+="<td id='"+b+"-west' width="+w+"></td>",t++),"center"==c[f].area&&""==m&&(c[f].height>s&&(s=c[f].height),m+="<td id='"+b+"-center'></td>",t++),"east"==c[f].area&&""==q&&(x=c[f].width||0,c[f].height>s&&(s=c[f].height),q+="<td id='"+b+"-east' width="+x+"></td>",t++),"south"==c[f].area&&""==
n&&(h=c[f].height||0,n="<tr id='"+b+"-row-south' height='"+h+"px'>",n+="<td id='"+b+"-south' colspan='{CS}'></td></tr>");0==t&&(t=1);s=l-(j+h);d=d.replace("{FH}",j+s+h);k=k.replace("{CS}",t);n=n.replace("{CS}",t);d+=k;if(""!=r||""!=m||""!=q)d+="<tr >"+r+m+q+"</tr>";d+=n;d+="</tbody></table>";$("#"+b).append(d);q=m=r=n=k="";for(j=0;j<c.length;j++)if(h=c[j],h.page=a,h.parent=g,null!=h.wtype)try{"north"==h.area&&""==k&&(h.wtype=h.wtype.toLowerCase(),h.width=i,h.renderTo=b+"-north",h.id=idev.internal.renderWidget(a,
h),k=h.id),"south"==h.area&&""==n&&(h.wtype=h.wtype.toLowerCase(),h.width=i,h.renderTo=b+"-south",h.id=idev.internal.renderWidget(a,h),n=h.id),"west"==h.area&&""==r&&(h.width=w,h.padding&&(h.width-=2),h.height=s,h.wtype=h.wtype.toLowerCase(),h.renderTo=b+"-west",h.id=idev.internal.renderWidget(a,h),r=h.id),"center"==h.area&&""==m&&(h.width=i-(w+x),h.padding&&(h.width-=2),h.height=s,h.wtype=h.wtype.toLowerCase(),h.renderTo=b+"-center",h.id=idev.internal.renderWidget(a,h),m=h.id),"east"==h.area&&""==
q&&(h.width=x,h.padding&&(h.width-=2),h.height=s,h.wtype=h.wtype.toLowerCase(),h.renderTo=b+"-east",h.id=idev.internal.renderWidget(a,h),q=h.id)}catch(z){alert("error 1:"+z.message)}}else if("accordion"==d){g.padding=g.padding||0;i=$("#"+g.id).width();$("#"+g.id+"-body").height();"panel"==g.wtype&&($("#"+g.id+"-content").height(),i=$("#"+g.id+"-content").width()-2*g.padding);null==i&&(i=g.width-2*g.padding);g.attr=null==g.attr?" cellspacing=0 cellpadding=0":g.attr;d="<table class='ui-table' id='"+
b+"-table' "+g.attr+" border=0  style='width:"+i+"px;table-layout:fixed;'><tbody id='"+b+"-body'></tbody></table>";$("#"+b).append(d);i=b+"-body";for(j=f=0;j<c.length;j++)h=c[j],null==h?idev.errorHandler("NULL Width @ "+j+" for layout"):"panel"==h.wtype&&(h.titleHeight=idev.defaultTitleHeight,f++);if(0==f)idev.errorHandler("No panels for accordion layout");else for(j=0;j<c.length;j++)if(h=c[j],null==h)idev.errorHandler("NULL Width @ "+j+" For accordion layout");else if(h.page=a,h.parent=g,"panel"==
h.wtype){l="";b=i+"-cell"+j;d="<tr>";d+="<td id='"+b+"' style='"+l+"'></td>";d+="</tr>";$("#"+i).append(d);try{h.wtype=h.wtype.toLowerCase(),null==h.style&&(h.style=""),h.style+="border:0px;",h.width=g.width,h.height=g.height-(f-1)*idev.defaultTitleHeight,h.collaped=0<j?!0:!1,h.nofloat=!0,h.expandable=!0,h.renderTo=b,h.id=idev.internal.renderWidget(a,h)}catch(A){alert("error2:"+A.message)}}}else if("row"==d){g.padding=g.padding||0;i=$("#"+g.id).width();$("#"+g.id+"-body").height();"panel"==g.wtype&&
($("#"+g.id+"-content").height(),i=$("#"+g.id+"-content").width()-2*g.padding);null==i&&(i=g.width-2*g.padding);g.rowHeight=null==g.rowHeight?"":g.rowHeight;g.center=g.center||!1;g.attr=null==g.attr?" cellspacing=0 cellpadding=0":g.attr;d="<table class='ui-table' id='"+b+"-table' "+g.attr+" border=0  style='width:"+i+"px;'><tbody id='"+b+"-body'></tbody></table>";g&&"composite"==g.wtype&&g.width&&(d="<table class='ui-table' id='"+b+"-table' "+g.attr+" border=0 width='"+g.width+"px'><tbody id='"+b+
"-body'></tbody></table>");$("#"+b).append(d);i=b+"-body";for(j=0;j<c.length;j++)if(h=c[j],null==h)idev.errorHandler("NULL Width @ "+j+" For row layout");else if(h.page=a,h.parent=g,null!=h.wtype){l="";null!=h.wtype&&h.cellStyle&&(l=h.cellStyle);b=i+"-cell"+j;d=""!=g.rowHeight?"<tr style='height:"+g.rowHeight+"px'>":"<tr>";g.config?g.config.center?d+="<td width='"+g.width+"' style='"+l+"'><center><div id='"+b+"'></div></center></td>":g.layoutConfig?g.layoutConfig.fit&&(d+="<td  id='"+b+"' width='"+
(g.width-2*g.padding)+"' style='"+l+"'></td>"):d+="<td id='"+b+"' style='"+l+"'></td>":d=g.center?d+("<td width='"+g.width+"' style='"+l+"'><center><div id='"+b+"'></div></center></td>"):d+("<td id='"+b+"' style='"+l+"'></td>");d+="</tr>";$("#"+i).append(d);try{h.wtype=h.wtype.toLowerCase(),null==h.style&&(h.style=""),h.nofloat=!0,h.renderTo=b,h.id=idev.internal.renderWidget(a,h)}catch(B){alert("error2:"+B.message)}}}else if("form"==d){g.padding=g.padding||0;$("#"+g.id).width();$("#"+g.id+"-body").height();
"panel"==g.wtype&&($("#"+g.id+"-content").height(),$("#"+g.id+"-content").width());q=null==g.attr?"":g.attr;idev.isChrome()&&(q="cellpadding=3 "+q);d="<table class='ui-table' id='"+b+"-table'  "+q+" border=0 style=''><tbody id='"+b+"-body'></tbody></table>";g&&"composite"==g.wtype&&g.width&&(d="<table class='ui-table' id='"+b+"-table'"+q+" border=0 width='"+g.width+"px'><tbody id='"+b+"-body'></tbody></table>");$("#"+b).append(d);i=b+"-body";for(j=0;j<c.length;j++)if(h=c[j],null==h)idev.errorHandler("NULL Width @ "+
j+" For form layout");else if(h.page=a,h.parent=g,null==h.wtype)"string"==typeof h&&(n=new idev.ui.widgetHTML({renderTo:b,html:h}),n.render());else{l="";null!=h.wtype&&h.cellStyle&&(l=h.cellStyle);b=i+"-cell"+j;d=h.id?h.id+"-label":b+"-label";d=h.hidden?"<tr><td valign='top' width='"+f+"px' style='width:"+f+"px;"+l+"'><span  id='"+d+"' class='ui-labeltext "+g.labelCls+"' style='"+h.labelStyle+";display:none;'>"+h.label+"</span></td><td id='"+b+"'></td></tr>":"<tr><td valign='top' width='"+f+"px' style='width:"+
f+"px;"+l+"'><span  id='"+d+"' class='ui-labeltext "+g.labelCls+"' style='"+h.labelStyle+"'>"+h.label+"</span></td><td id='"+b+"'></td></tr>";null==h.label&&(d="<tr><td id='"+b+"' colspan=2></td><td></td></tr>");$("#"+i).append(d);try{h.wtype=h.wtype.toLowerCase(),h.renderTo=b,h.id=idev.internal.renderWidget(a,h)}catch(C){alert("error3:"+C.message+"["+h.wtype+"]")}}}else if("fit"==d){i=$("#"+g.id+"-content").width();l=$("#"+g.id+"-content").height();d=g.padding||0;null==l&&(l=g.height);null==i&&(i=
g.width);if("panel"==g.wtype||"window"==g.wtype)l=$("#"+g.id+"-body").height();for(j=f=0;j<c.length;j++)if(h=c[j],null!=h)if(null==h)idev.errorHandler("NULL Width @ "+j+" For form layout");else if(0<i&&(h.width=i,d&&(h.width-=2*d),h.x=0,d&&(h.x=d)),0<l&&(h.height=l,d&&(h.height-=2*d),h.y=0,d&&(h.y=d)),h.page=a,h.parent=g,null==h.wtype)"string"==typeof h&&(n=new idev.ui.widgetHTML({renderTo:b,html:h}),n.render());else try{h.wtype=h.wtype.toLowerCase(),0<f&&(h.hidden=!0),h.hideType="visibility",h.renderTo=
b,h.id=idev.internal.renderWidget(a,h),f++}catch(D){alert("error4:"+D.message)}}else for(j=0;j<c.length;j++)if(h=c[j],null==h)idev.errorHandler("NULL Width @ "+j+" For form layout");else if(h.page=a,h.parent=g,null==h.wtype)"string"==typeof h&&(n=new idev.ui.widgetHTML({renderTo:b,html:h}),n.render());else try{h.wtype=h.wtype.toLowerCase(),h.renderTo=b,h.id=idev.internal.renderWidget(a,h)}catch(E){alert(h.wtype),alert("error5:"+E.message)}},add:function(a){idev.widgets.push(a)},render:function(){window.navigator.standalone&&
idev.isIPhone()&&(document.body.style.marginTop=30);if(_preferences.config.fitDocument||_preferences.config.fitdocument){var a=$(document).innerHeight(),b=$(document).innerWidth();window.navigator.standalone&&(a-=idev.standaloneOffset);$("#container").width(b);$("#container").height(a)}b=null==idev.app.theme?"":idev.app.theme;""!=b&&(b="-"+b);var c=$("#container").width();if(idev.app.toolbar){null==idev.app.toolbar.height&&(idev.app.toolbar.height=40);idev.app.toolbar.visible=!0;$("#container").append("<div id='ui-toolbar' class='ui-app-toolbar"+
b+"' style='height:"+idev.app.toolbar.height+"px;max-height:"+idev.app.toolbar.height+"px;'></div>");if(idev.app.toolbar.widgets){idev.app.toolbar.id="ui-toolbar";idev.app.toolbar.children=[];idev.app.toolbar.width=c;idev.app.toolbar.rowHeight=idev.app.toolbar.height;idev.app.toolbar.proxy={wtype:"composite"};for(var d in idev.app.toolbar)"id"!=d&&(idev.app.toolbar.proxy[d]=idev.app.toolbar[d]);idev.app.toolbar.proxy.renderTo="ui-toolbar";idev.app.toolbar.proxy.parent=idev.app.toolbar;idev.internal.renderWidget(null,
idev.app.toolbar.proxy)}idev.app.toolbar.height=$("#ui-toolbar").height()}else idev.app.toolbar={height:0};a=$("#container").height();idev.app.statusbar&&(null==idev.app.statusbar.height&&(idev.app.statusbar.height=40),idev.app.toolbar&&(a-=$("#ui-toolbar").height()+idev.app.statusbar.height));$("#container").append("<div id='content' class='ui-body' style='width:"+c+"px;height:"+a+"px;'></div>");if(idev.app.statusbar){null==idev.app.statusbar.height&&(idev.app.statusbar.height=40);idev.app.statusbar.visible=
!0;$("#container").append("<div id='ui-statusbar' class='ui-app-statusbar"+b+"' style='height:"+idev.app.statusbar.height+"px;max-height:"+idev.app.statusbar.height+"px;z-index:10;'></div>");if(idev.app.statusbar.widgets){idev.app.statusbar.id="ui-statusbar";idev.app.statusbar.children=[];idev.app.statusbar.width=c;idev.app.statusbar.rowHeight=idev.app.toolbar.statusbar;idev.app.statusbar.proxy={wtype:"composite"};for(d in idev.app.statusbar)"id"!=d&&(idev.app.statusbar.proxy[d]=idev.app.statusbar[d]);
idev.app.statusbar.proxy.renderTo="ui-statusbar";idev.app.statusbar.proxy.parent=idev.app.statusbar;idev.internal.renderWidget(null,idev.app.statusbar.proxy)}idev.app.statusbar.height=$("#ui-statusbar").height()}else idev.app.statusbar={height:0}},ExtractNumber:function(a){a=parseInt(a);return null==a||isNaN(a)?0:a},getPosition:function(a){var b=0,c=0;if(a){for(;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;b+=a.offsetLeft;c+=a.offsetTop}return{x:b,y:c}},mouseMove:function(a){a=
a||window.event;idev.utils.mousePosition(a)},getMouseOffset:function(a,b){var b=b||window.event,c=idev.internal.getPosition(a),d=idev.utils.mousePosition(b);return{x:d.x-c.x,y:d.y-c.y}}},errorHandler:function(a){$debug("*******************************");$debug(a);$debug("*******************************")},getParameter:function(a,b){null==b&&(b="");if("string"==typeof a)return idev.convertNulls(this.parameters[a],b);if(0<=a)for(var c in idev.parameters){if(0==a)return idev.convertNulls(idev.parameters[c],
b);a--}return b},getParameterKey:function(a,b){null==b&&(b="");if("number"!=typeof a)return b;if(0<=a)for(var c in idev.parameters){if(0==a)return c;a--}return b},isIE:function(){return-1!=this.agent.indexOf("ie")?!0:!1},isIE7:function(){return-1!=this.agent.indexOf("msie 7")?!0:!1},isIE8:function(){return-1!=this.agent.indexOf("msie 8")?!0:!1},isIE9:function(){return-1!=this.agent.indexOf("msie 9")?!0:!1},isWebkit:function(){return-1!=this.agent.indexOf("webkit")?!0:!1},isChrome:function(){return-1!=
this.agent.indexOf("chrome")?!0:!1},isFF:function(){return-1!=this.agent.indexOf("firefox")?!0:!1},isIEMobile:function(){return-1!=this.agent.indexOf("iemobile")?!0:!1},isPalm:function(){return-1!=this.agent.indexOf("webos")?!0:!1},isBlackberry:function(){return-1!=this.agent.indexOf("blackberry")?!0:!1},isIPad:function(){return-1!=this.agent.indexOf("ipad")?!0:!1},isIPhone:function(){return-1!=this.agent.indexOf("iphone")?!0:!1},isAndroid:function(){return-1!=this.agent.indexOf("android")?!0:!1},
isTouch:function(){return-1!=this.agent.indexOf("ipad")||-1!=this.agent.indexOf("iphone")||-1!=this.agent.indexOf("android")?!0:!1},isMobile:function(){return-1!=this.agent.indexOf("ipad")||-1!=this.agent.indexOf("iphone")||-1!=this.agent.indexOf("android")||-1!=this.agent.indexOf("iemobile")||-1!=this.agent.indexOf("blackberry")?!0:!1},isStandAlone:function(){return window.navigator.standalone},isMobile:function(){return-1!=this.agent.indexOf("ipad")||-1!=this.agent.indexOf("iphone")||-1!=this.agent.indexOf("android")||
-1!=this.agent.indexOf("iemobile")||-1!=this.agent.indexOf("blackberry")?!0:!1},convertNulls:function(a,b){return null==a||"undefinded"==typeof a?b:a},isClass:function(a){return a instanceof baseWidget?!0:!1},hideToolbar:function(){if(idev.app.toolbar&&idev.app.toolbar.visible){var a=idev.contentHeight+idev.app.toolbar.height;$("#ui-toolbar").hide();$("#ui-toolbar").height(0);$("#content").height(a);this.pageManager.currentPage&&this.pageManager.syncSize();idev.app.toolbar.visible=!1}},showToolbar:function(){idev.app.toolbar&&
!idev.app.toolbar.visible&&($("#ui-toolbar").show(),$("#ui-toolbar").height(idev.app.toolbar.height),$("#content").height(idev.contentHeight),this.pageManager.currentPage&&this.pageManager.syncSize(),idev.app.toolbar.visible=!0)},hideStatusbar:function(){if(idev.app.statusbar&&idev.app.statusbar.visible){var a=idev.contentHeight+idev.app.statusbar.height;$("#ui-statusbar").hide();$("#ui-statusbar").height(0);$("#content").height(a);this.pageManager.currentPage&&this.pageManager.syncSize();idev.app.statusbar.visible=
!1}},showStatusbar:function(){idev.app.statusbar&&!idev.app.statusbar.visible&&($("#ui-statusbar").show(),$("#"+idev.app.statusbar.proxy.id).show(),$("#ui-statusbar").height(idev.app.statusbar.height),$("#content").height(idev.contentHeight),this.pageManager.currentPage&&this.pageManager.syncSize(),idev.app.statusbar.visible=!0)},hideBars:function(){idev.app.statusbar.visible&&($("#ui-statusbar").hide(),$("#ui-statusbar").height(0),idev.app.statusbar.visible=!1);idev.app.toolbar.visible&&($("#ui-toolbar").hide(),
$("#ui-toolbar").height(0),idev.app.toolbar.visible=!1);var a=idev.contentHeight+idev.app.toolbar.height+idev.app.statusbar.height;$("#content").height(a);this.pageManager.currentPage&&this.pageManager.syncSize()},showBars:function(){idev.app.statusbar.visible||($("#ui-statusbar").show(),$("#"+idev.app.statusbar.proxy.id).show(),$("#ui-statusbar").height(idev.app.statusbar.height),idev.app.statusbar.visible=!0);idev.app.toolbar.visible||($("#ui-toolbar").show(),$("#"+idev.app.toolbar.proxy.id).show(),
idev.app.toolbar.children[0].show(),$("#ui-toolbar").height(idev.app.toolbar.height),idev.app.toolbar.visible=!0);$("#content").height(idev.contentHeight);this.pageManager.currentPage&&this.pageManager.syncSize()},addTouchScroll:function(a,b){"H"==b&&(b={hScroll:!0,bounce:!0,momentum:!0});return new iScroll(document.getElementById(a),b)},createWorker:function(a,b){if("undefined"==typeof Worker)return idev.ui.message("Worker Not Supported"),null;var c=new Worker(_preferences.apppath+a);null!=c&&(c.onmessage=
b);return c},get:function(a){if(""==a||null==a)return null;for(var b=0;b<this.widgets.length;b++){var c=this.widgets[b];if(null!=c.id&&c.id==a)return c}return null},lastPage:function(){return this.pageManager.lastPage},currentPage:function(){return this.pageManager.currentPage},currentPageName:function(){return this.pageManager.currentPage.name},removePageWidgets:function(a){for(var b=0;b<this.widgets.length;b++){var c=this.widgets[b];c.page&&c.page.id==a&&(c.destroy(),b--)}return null},list:function(){for(var a=
"",b=0;b<this.widgets.length;b++)a+=this.widgets[b].id+"\r\n";return a},addWidgetToPageContent:function(a,b){for(var c=0;c<this.app.pages.length;c++){var d=this.app.pages[c];if(d.id==a){if(null==d.content)break;if(null==d.content.widgets)break;d.content.widgets.push(b);return!0}}return!1},homePage:function(){this.pageManager.showPage(0);null==idev.contentHeight&&(idev.contentHeight=$("#content").height(),idev.pageHeight=$("#"+this.pageManager.currentPage.id).height())},gotoPage:function(a){this.pageManager.showPage(a);
null==idev.contentHeight&&(idev.contentHeight=$("#content").height(),idev.pageHeight=$("#"+this.pageManager.currentPage.id).height())},nextPage:function(){this.pageManager.nextPage();null==idev.contentHeight&&(idev.contentHeight=$("#content").height(),idev.pageHeight=$("#"+this.pageManager.currentPage.id).height())},prevPage:function(){this.pageManager.prevPage();null==idev.contentHeight&&(idev.contentHeight=$("#content").height(),idev.pageHeight=$("#"+this.pageManager.currentPage.id).height())},
register:function(a,b){null==b?idev.errorHandler("register null widget:"+a):idev.plugins[a.toLowerCase()]=b},bodyHeight:function(){var a=idev.pgHeight;$("#ui-toolbar").height()?a-=$("#ui-toolbar").height():idev.isIE()||(a+=17);$("#ui-statusbar").height()?a-=$("#ui-statusbar").height():idev.isIE()||(a+=17);return a},bodyWidth:function(){return idev.pgWidth},autoHide:function(a,b){if(0!=arguments.length){if(null==b)return;idev.hideFN&&idev.hideFN(idev.hideWidget,null)}idev.hideFN=b;idev.hideWidget=
a},findID:function(a){for(;""==a.id&&null!=a.parentNode;)a=a.parentNode;return a},extractIndex:function(a){for(;""==a.id&&null!=a.parentNode;)a=a.parentNode;var b=a.id.lastIndexOf("_");return-1==b?-1:parseInt(a.id.substr(b+1))},wTemplate:idevObject.extend({init:function(){this.sTemplate="";for(var a=0;a<arguments.length;a++)this.sTemplate+=arguments[a]},render:function(a){var b=this.sTemplate;try{if("object"!=typeof a||!a.constructor==Array)return b;for(var c in a)if("string"==typeof a[c]||"number"==
typeof a[c])b=idev.utils.replaceAll(b,"{"+c+"}",a[c]);return b}catch(d){idev.errorHandler("Template Data Error, data type"+typeof a)}return b},get:function(){return this.sTemplate}}),local:{successLocation:function(a){this.position=a},failedLocation:function(a){switch(a.code){case 0:alert(a.message);break;case 1:alert(a.message)}this.position=null},currentLocation:function(a,b){try{null==a&&(a=this.successLocation),null==b&&(a=this.failedLocation),navigator.geolocation.getCurrentPosition(function(b){idev.geoposition=
b;idev.geoerror=null;null!=a&&a(b)},function(a){idev.geoposition=null;idev.geoerror=a;null!=b&&b()})}catch(c){idev.geoposition=null,idev.geoerror="Geo Location Not Supported",null!=b&&b()}},localSupport:function(){return localStorage?!0:!1},storeLocal:function(a,b){if(!this.localSupport())return!1;localStorage[a]=b;return!0},removeLocal:function(a){if(!this.localSupport())return!1;localStorage.removeItem(a);return!0},countLocal:function(){return!this.localSupport()?0:localStorage.length},clearLocal:function(){if(!this.localSupport())return!1;
localStorage.clear();return!0},getLocal:function(a,b){if(!this.localSupport())return b;var c=localStorage[a];return null==c?b:c},dbSupport:function(){return window.openDatabase?!0:!1},dbOpen:function(a,b,c){if(!this.databaseSupport())return null;null==b&&(b=1E5);null==c&&(c="1.0");return openDatabase(a,c,a,b)},dbExecute:function(a,b,c,d,f){if(!this.databaseSupport())return!1;null==c&&(c=[]);a.transaction(function(a){a.executeSql(b,c,d,f)})}},data:{column:idevObject.extend({init:function(a){null==
a&&(a={});this.header=null==a.header?"":a.header;this.field=a.field;this.renderer=a.renderer;this.headerRenderer=a.headerRenderer;this.headerClick=a.headerClick;this.width=a.width||30;this.tpl=a.tpl;this.cls=a.cls||"";this.style=a.style||"";this.events=a.events||{};this.editor=a.editor;this.editID="";null==this.tpl&&(this.tpl=new idev.wTemplate("<div id='{id}-cell-{row}-{col}' class='ui-grid-cell {cls} ie9gradient' style='{style};width:{width}px;max-width:{width}px;height:{height}px;text-overflow: ellipsis; overflow: hidden;white-space: nowrap;' row='{row}' col='{col}'>",
"{value}","</div>"));this.cls=idev.internal.cssQuirks(this.cls,!0)},render:function(a){null==a.cls&&(a.cls=idev.internal.cssQuirks(this.cls));null==a.value&&(a.value="");if(null==a.style||""==a.style)a.style=this.style;null==a.height&&(a.height="");null!=this.events&&this.events.click&&(a.style+=";cursor:pointer;");return this.tpl.render(a)},edit:function(a,b){if(null!=this.editor){this.editRow=a;this.editCol=b;var c=this.parent.id+"_"+a+"_"+b,d=$("#"+c).width(),f=$("#"+c).height(),g=this.parent.ds.getAt(a);
this.parent.events.beforeEdit&&!1===this.parent.events.beforeEdit(this.parent,a,b,g)||(this.editor.width=d-2,this.editor.height=f-2,this.editor.roundCorners=!1,this.editor.value=g.get(this.field),this.editor.renderTo=c,this.editor.style="background-color:#fff;color:#000;",$("#"+c).html(""),this.editID=idev.internal.renderWidget(this.parent.page,this.editor))}},endEdit:function(){idev.utils.showBusy();if(""!=this.editID){var a=$get(this.editID),b=a.getValue(),c=this.parent.ds.getAt(this.editRow),d=
[],f=$("#"+this.parent.id+"-data").scrollTop(),g=$("#"+this.parent.id+"-data").scrollLeft();a.destroy();c.set(this.field,b);d.value=null!=this.renderer?this.renderer(c.get(this.field),c,this.editRow,this.editCol,this):c.get(this.field);d.id=this.parent.id;d.style=this.style||"";d.cls="";this.editRow%2&&(d.cls=" ui-cell-alt");d.row=this.editRow;d.col=this.editCol;d.width=this.width-5;d.height=this.parent.rowHeight;this.render(d,c,this.editRow,this.editCol);this.editID="";if(0<f||0<g)$("#"+this.parent.id+
"-data").scrollTop(f),$("#"+this.parent.id+"-data").scrollLeft(g);this.parent.events.afterEdit&&this.parent.events.afterEdit(this.parent,this.editRow,this.editCol,c,this.field,this.editor.value,d.value);idev.utils.hideBusy()}}}),columnModel:idevObject.extend({init:function(a){this.columns=null==a.columns?[]:a.columns;for(a=0;a<this.columns.length;a++){var b=this.columns[a];b instanceof idev.data.column||(this.columns[a]=new idev.data.column(b));this.columns[a].index=a;this.columns[a].cm=this}},getCount:function(){return this.columns.length},
getAt:function(a){return this.columns[a]}}),dataRecord:idevObject.extend({init:function(a){this.fields=[];this.data=[];this.binds=[];this.modified=!1;this.store=a.store;for(var b=0;b<a.fields.length;b++)this.fields.push(a.fields[b])},clone:function(){if(null==this.store)return null;var a=this.store.blankRec();a.load(this.data);return a},getRecNo:function(){var a=0;if(null==this.store)return-1;for(;this.store.records[a]!=this&&a<this.store.records.length;)a++;return a==this.store.records.length?-1:
a},load:function(a){this.data=[];for(var b=0;b<this.fields.length;b++){var c=a instanceof Array?a[b]:a[this.fields[b]];null==c&&(c="");this.data.push(c)}this.updateBinds()},getStore:function(){return this.store},loadText:function(a,b){if("string"==typeof a){null==b&&(b=",");var c=a.split(b);this.data=[];for(var d=0;d<this.fields.length&&d<c.length;d++)this.data.push(c[d]);this.updateBinds()}},set:function(a,b,c){null==c&&(c=!1);for(var d in this.fields)if(this.fields[d]==a)return this.data[d]=b,this.modified=
!0,this.store&&!c&&this.store.updateBinds(),c||this.updateBinds(),!0;return!1},get:function(a){for(var b in this.fields)if(this.fields[b]==a)return null==this.data[b]?"":this.data[b];return""},isModified:function(){return this.modified},commit:function(){this.modified=!1},asString:function(a,b){b=b||",";switch((a||"").toLowerCase()){case "csv":var c="",d;for(d in this.fields){var f=null==this.data[d]?"":this.data[d];0<d&&(c+=b);c+=f}return c;default:c="{";for(d in this.fields)f=null==this.data[d]?
"":this.data[d],0<d&&(c+=","),c="string"===typeof f?c+('"'+this.fields[d]+'":"'+f+'"'):c+('"'+this.fields[d]+'":'+f);return c+"}"}},bind:function(a){for(var b=0;b<this.binds.length;b++)if(this.binds[b]==a)return;this.binds.push(a)},updateBinds:function(){for(var a=0;a<this.binds.length;a++)try{this.binds[a].setValues()}catch(b){idev.errorHandler("DataRec binding update failed "+b.message)}}}),dataStore:idevObject.extend({init:function(a){this.records=[];this.fields=null==a.fields?[]:a.fields;this.separator=
null==a.separator?",":a.separator;this.binds=[];a.data&&this.load(a.data);this.url=a.url||"";this.params=a.params||{};this.results=a.results;this.autoDestroy=null==a.autoDestroy?!1:a.autoDestroy;this.events=a.events||{}},onload:function(a){this.events.load=a},load:function(a,b){this.records=[];if("string"==typeof a)try{a=recs=$.parseJSON(a)}catch(c){}for(var d in a){var f=new idev.data.dataRecord({fields:this.fields,store:this});"string"==typeof a[d]?f.loadText(a[d],this.separator):f.load(a[d]);this.records.push(f)}b||
this.updateBinds(!0)},fetch:function(a){if(this.url){var b=this;idev.utils.ajax({dataType:"json",url:this.url,params:this.params,success:function(c,d,f){b.jqXHR=f;!c.success&&b.events.loadexception&&b.events.loadexception(b,"Success False",c);c.total&&!isNaN(c.total)&&(b.total=c.total);b.results?b.load(c[b.results]):b.load(c.results);a&&a(b)},error:function(a,d,f){b.jqXHR=a;b.events.loadexception&&b.events.loadexception(b,d,f)}})}},updateBinds:function(a){for(var a=a||!1,b=0;b<this.binds.length;b++)try{this.binds[b]&&
this.binds[b].refresh(a)}catch(c){idev.errorHandler("Update bind failed")}null!=this.events&&"function"==typeof this.events.load&&a&&this.events.load(this)},commitAll:function(){for(var a=0;a<this.records.length;a++)this.records[a].commit()},getModified:function(){for(var a=[],b=0;b<this.records.length;b++)this.records[b].isModified()&&a.push(this.records[b]);return a},getFieldName:function(a){return this.fields[a]},fieldCount:function(){return this.fields.length},getAt:function(a){return this.records[a]},
blankRec:function(){return new idev.data.dataRecord({fields:this.fields,store:null})},add:function(a,b,c){if(null==a)return!1;if(a instanceof idevObject){if(null!=a.store)return!1;a.store=this;!0===c?this.records.unshift(a):this.records.push(a)}else{var d=new idev.data.dataRecord({fields:this.fields,store:this});"string"==typeof a?d.loadText(a):d.load(a);!0===c?this.records.unshift(d):this.records.push(d)}if(!b)return this.updateBinds(),!0},removeAll:function(){for(var a in this.records)delete this.records[a];
this.records=[];this.updateBinds()},removeAt:function(a){if(0>a||a>=this.records.length)return!1;this.records.splice(a,1);this.updateBinds();return!0},removeLast:function(){this.removeAt(this.records.length-1)},setParam:function(a,b){this.params[a]=b},getCount:function(){return this.records.length},bind:function(a){for(var b=0;b<this.binds.length;b++)if(this.binds[b]==a)return;this.binds.push(a)},unbind:function(a){for(var b=0;b<this.binds.length;b++)if(this.binds[b]==a){this.bind.slice(b,1);break}},
asString:function(a,b){a=a||"";switch(a.toLowerCase()){case "csv":var c="",d;for(d in this.records)0<d&&(c+="\r\n"),c+=this.records[d].asString(a,b);return c;default:c="[";for(d in this.records)0<d&&(c+=","),c+=this.records[d].asString();return c+"]"}},sort:function(a,b){null==b&&(b=!0);this.records.sort(function(c,d){return b?c.get(a)<d.get(a)?-1:0:c.get(a)>d.get(a)?-1:0});this.updateBinds()},find:function(a,b,c,d,f){null==c&&(c=0);null==d&&(d=!0);null==f&&(f=!0);for(f||"string"==typeof b&&(b=b.toLowerCase());c<
this.records.length;c++){var g=this.records[c].get(a);f||"string"==typeof g&&(g=g.toLowerCase());if(d)if("string"==typeof g){if(-1!=g.indexOf(b))return c}else{if(g==b)return c}else if(g==b)return c}return-1},getTotal:function(){return this.total}})},page:idevObject.extend({init:function(a){null==a.id&&(a.id=idev.internal.nextUIID("pg"),0!=$("#"+a.id).length&&(idev.errorHandler("Duplicate Page ID : "+a.id+" ["+a.name+"]"),a.id=idev.internal.nextUIID("pg")));a.events=a.events||{};this.name=a.name;this.id=
a.id;this.data=null==a.data?{}:a.data;this.fn=null==a.fn?{}:a.fn;null==this.fn.parent&&(this.fn.parent=this);this.labelWidth=a.labelWidth||70;this.orientation=a.orientation||"";this.target=a.target||"";this.header=a.header;this.content=a.content;this.footer=a.footer;null==a.pagestyle&&(a.pagestyle="");null==a.cls&&(a.cls="");null!=a.style&&(a.pagestyle=a.style);""!=a.cls&&(a.cls+="  ie9gradient");null==a.headerstyle&&(a.headerstyle="");null==a.contentstyle&&(a.contentstyle="");null==a.footerstyle&&
(a.footerstyle="");null==a.headerHTML&&(a.headerHTML="Header");null==a.contentHTML&&(a.contentHTML="Content");null==a.footerHTML&&(a.footerHTML="Footer");null!=a.height&&(a.pagestyle+="height:"+a.height+";");null==a.header&&(a.header={height:0,hidden:!0,cls:"",style:""});null==a.content&&(a.content={height:0,hidden:!0,cls:"",style:""});null==a.footer&&(a.footer={height:0,hidden:!0,cls:"",style:""});a.header.children=[];a.content.children=[];a.footer.children=[];null==a.header.cls&&(a.header.cls="");
null==a.content.cls&&(a.content.cls="");null==a.footer.cls&&(a.footer.cls="");""!=a.header.cls&&(a.header.cls+="  ie9gradient");""!=a.content.cls&&(a.content.cls+="  ie9gradient");""!=a.footer.cls&&(a.footer.cls+="  ie9gradient");this.controlledContent=!1;a.content.padding=0;if(0<idev.controlHeight)a.content.height=idev.controlHeight-(idev.app.toolbar.height+idev.app.statusbar.height+a.header.height+a.footer.height),a.contentstyle+="overflow:auto;",controlledContent=!0;else if(_preferences.config.pageFit||
_preferences.config.pagefit){var b=idev.convertNulls($("#ui-toolbar").height(),0),c=idev.convertNulls($("#ui-statusbar").height(),0);a.content.height=$("#container").height()-(b+c+a.header.height+a.footer.height);a.content.width=$("#container").width();idev.isIPad()&&(a.content.height+=10)}a.header.padding=0;null==a.header.hidden&&(a.header.hidden=!1);null==a.header.html?a.header.html="":a.data&&(null!=a.data.header&&""!=a.header.html)&&(b=new idev.wTemplate(a.header.html),a.content.html=b.render(a.data.header));
null!=a.header.height?a.headerstyle+="height:"+a.header.height+"px;":a.header.height=0;null!=a.header.padding&&(a.headerstyle+="padding:"+a.header.padding+"px;");null!=a.header.style&&(a.headerstyle+=a.header.style);a.header.hidden&&(a.headerstyle+="display:none;");a.headerstyle+="padding:0;";null==a.content.layout&&(a.content.layout="");a.content.layout=a.content.layout.toLowerCase();a.contentstyle+="position:relative;";a.content.padding&&(a.contentstyle+="padding:"+a.content.padding+"px;");null==
a.content.html?a.content.html="":a.data&&(null!=a.data.content&&""!=a.content.html)&&(b=new idev.wTemplate(a.content.html),a.content.html=b.render(a.data.content));null!=a.content.height&&(a.contentstyle+="height:"+a.content.height+"px;max-height:"+a.content.height+"px;");null!=a.content.padding&&(a.contentstyle+="padding:"+a.content.padding+";");null!=a.content.style&&(a.contentstyle+=a.content.style);a.contentstyle+="padding:0;";a.footer.padding=0;null==a.footer.hidden&&(a.footer.hidden=!1);null==
a.footer.html?a.footer.html="":a.data&&(null!=a.data.footer&&""!=a.footer.html)&&(b=new idev.wTemplate(a.footer.html),a.footer.html=b.render(a.data.footer));a.footerstyle+="position:relative;";null!=a.footer.height&&(a.footerstyle+="height:"+a.footer.height+"px;");null!=a.footer.padding&&(a.footerstyle+="padding:"+a.footer.padding+"px;");null!=a.footer.style&&(a.footerstyle+=a.footer.style);a.footer.hidden&&(a.footerstyle+="display:none;");a.footerstyle+="padding:0;";this.config=a},render:function(){var a=
"",b=this.config.content.padding||0;idev.isIE()||(b=0);$("#container").css("overflow","hidden");var b=$("#container").innerWidth()-b,c=$("#content").height(),c=c+(idev.app.toolbar.visible?0:idev.app.toolbar.height),c=c+(idev.app.statusbar.visible?0:idev.app.statusbar.height),a=a+("<div id='"+this.config.id+"' class='ui-page "+this.config.cls+"' pageName='"+this.name+"' style='width:"+b+"px;height:"+c+"px;"+this.config.pagestyle+"'>");null!=this.config.header&&(a+="<div id='"+this.config.id+"-header' class='ui-page-header "+
this.config.header.cls+"' style='"+this.config.headerstyle+";width:"+b+"px;'>",a+=this.config.header.html,a+="</div>");a+="<div id='"+this.config.id+"-content' class='ui-page-content "+this.config.content.cls+"' style='"+this.config.contentstyle+";width:"+b+"px;'>";this.controlledContent&&idev.isTouch()&&(a+="<div id='"+this.config.id+"-scroller'>");a+=this.config.content.html;this.controlledContent&&idev.isTouch()&&(a+="</div>");a+="</div>";null!=this.config.footer&&(a+="<div id='"+this.config.id+
"-footer' class='ui-page-footer "+this.config.footer.cls+"' style='"+this.config.footerstyle+";width:"+b+"px;'>",a+=this.config.footer.html,a+="</div>");$("#content").append(a+"</div>");this.controlledContent&&idev.isTouch()&&(widget.iScroll=new iScroll(document.getElementById(this.id+"-scroller")));idev.swipping&&($("#"+this.config.id+"-content").mousedown(function(){idev.sx=-1;idev.sy=-1;idev.ex=-1;idev.ey=-1}),$("#"+this.config.id+"-content").mousemove(function(a){-1==idev.sx&&(idev.sx=a.pageX,
idev.sy=a.pageY);idev.ex=a.pageX;idev.ey=a.pageY}),$("#"+this.config.id+"-content").mouseup(function(){idev.sx>idev.ex?100<Math.abs(idev.sx-idev.ex)&&idev.nextPage():100<Math.abs(idev.ex-idev.sx)&&idev.prevPage();idev.sx=-1;idev.sy=-1;idev.ex=-1}),a=document.getElementById(this.config.id+"-content"),a.ontouchstart=function(){idev.sx=-1;idev.sy=-1;idev.ex=-1;idev.ey=-1},a.ontouchmove=function(a){-1==idev.sx&&(idev.sx=a.changedTouches[0].pageX,idev.sy=a.changedTouches[0].pageY);idev.ex=a.changedTouches[0].pageX;
idev.ey=a.changedTouches[0].pageY},a.ontouchend=function(){idev.sx>idev.ex?100<Math.abs(idev.sx-idev.ex)&&idev.nextPage():100<Math.abs(idev.ex-idev.sx)&&idev.prevPage();idev.sx=-1;idev.sy=-1;idev.ex=-1})},getHeaderWidget:function(a){return 0>a||null==this.header||a>=this.header.widgets.length?null:idev.get(this.header.widgets[a].id)},getContentWidget:function(a){return 0>a||a>=this.content.widgets.length?null:idev.get(this.content.widgets[a].id)},getFooterWidget:function(a){return 0>a||null==this.footer||
a>=this.footer.widgets.length?null:idev.get(this.footer.widgets[a].id)}}),pageManagerClass:idevObject.extend({init:function(){this.pages=[];this.activeIndex=-1;this.lastPage=this.currentPage=null;this.animation=!0;this.animationType="fade";this.canNavigate=!0},createWidgets:function(a,b){null!=a.header&&(a.header.id=b.config.id+"-footer",null!=a.header.widgets&&(a.header.id=b.config.id+"-header",idev.internal.renderWidgets(b,b.config.id+"-header",a.header.widgets,a.header.layout,a.header.labelWidth,
a.header)));null!=a.content.widgets&&(a.content.id=b.config.id+"-content",idev.internal.renderWidgets(b,b.config.id+"-content",a.content.widgets,a.content.layout,a.content.labelWidth,a.content));null!=a.footer&&(a.footer.id=b.config.id+"-footer",null!=a.footer.widgets&&(a.footer.id=b.config.id+"-footer",idev.internal.renderWidgets(b,b.config.id+"-footer",a.footer.widgets,a.footer.layout,a.footer.labelWidth,a.footer)));null!=a.events&&"function"==typeof a.events.afterRender&&a.events.afterRender(b)},
addPage:function(a,b){null==a&&(a={});var c=new idev.page(a);null==c&&alert("Failed To Create Page "+b);null==b?(c.pageindex=this.pages.length,this.pages.push(c)):(this.pages[b]=c,c.pageindex=b);c.name=a.name;c.events=a.events;c.events&&(c.events.beforeRender&&c.events.beforeRender(c),c.events.beforerender&&c.events.beforerender(c));c.render();return c},add:function(a){if(null==idev.app)return!1;for(var b=0;b<idev.app.pages.length;b++)if(idev.app.pages[b].name.toLowerCase()==a.name.toLowerCase()){idev.errorHandler("Duplicate Page Name : "+
a.name);return}idev.app.pages.push(a);return!0},getPage:function(a){for(var b=0;b<this.pages.length;b++){var c=this.pages[b];if(c&&c.name.toLowerCase()==a.toLowerCase())return c}return null},pageCount:function(){return this.pages.length},remove:function(a,b){if(1==this.pages.length)return!1;if("string"==typeof a){for(var c=0;c<this.pages.length;c++){var d=this.pages[c];if(d&&d.name.toLowerCase()==a.toLowerCase()){a=c;break}}if(c==this.pages.length)return!1}d=this.pages[a];if(null==d)return!1;d.events.destroy&&
d.events.destroy(d);idev.removePageWidgets(d.id);$("#"+d.id).remove();this.activeIndex==c&&(this.activeIndex=-1);this.pages[a]=null;this.pages.splice(a,1);d.iScroll&&delete d.iScroll;var f=d.name;delete d;if(b)for(c=0;c<idev.app.pages.length;c++)if(d=idev.app.pages[c],d.name.toLowerCase()==f){idev.app.pages.splice(c,1);break}return!0},showPage:function(a){if(null==idev.app||null==a||!this.canNavigate||"number"==typeof a&&a==idev.pageManager.activeIndex)return!1;var b=this.createPage(a);if(null==b)return!1;
b.events.beforeShow&&b.events.beforeShow(this);null!=idev.pageManager.currentPage&&idev.pageManager.currentPage.events.beforeHide&&idev.pageManager.currentPage.events.beforeHide(this);idev.pageManager.lastPage=idev.pageManager.currentPage;if(!(null!=idev.pageManager.currentPage&&(a==idev.pageManager.currentPage.name||a==idev.pageManager.activeIndex))){if(idev.pageManager.newPage&&b.config.hidden)return idev.pageManager.createWidgets(idev.app.pages[idev.pageManager.pageIndex],b),idev.pageManager.canNavigate=
!0,idev.pageManager.animation?($("#"+b.id).css("visibility","visible"),$("#"+b.id).css("left",0-(idev.pgWidth+10))):($("#"+b.id).css("z-index",-10),$("#"+b.id).css("visibility","visible")),!0;if(idev.pageManager.animation){if("fade"==idev.pageManager.animationType){if(null==idev.pageManager.currentPage){$("#"+b.id).css("visibility","visible");idev.pageManager.createWidgets(idev.app.pages[idev.pageManager.pageIndex],b);idev.pageManager.activeIndex=this.pageIndex;idev.pageManager.currentPage=b;null!=
b.events&&"function"==typeof b.events.show&&b.events.show(b);return}idev.pageManager.newPage&&idev.pageManager.createWidgets(idev.app.pages[idev.pageManager.pageIndex],b);idev.pageManager.canNavigate=!1;var c=idev.pageManager.currentPage;$("#"+c.id).fadeOut(idev.fadeOutTime,function(){$("#"+c.id).css("visibility","hidden");$("#"+c.id).css("display","block");null!=idev.pageManager.currentPage.events&&"function"==typeof idev.pageManager.currentPage.events.hide&&idev.pageManager.currentPage.events.hide(b)});
idev.pageManager.activeIndex=idev.pageManager.pageIndex;idev.pageManager.currentPage=b;$("#"+b.id).css("display","none");$("#"+b.id).css("visibility","visible");$("#"+b.id).fadeIn(idev.fadeInTime,function(){idev.pageManager.activeIndex==idev.app.pages.length-1?$("#idNext").css("visibility","hidden"):$("#idNext").css("visibility","visible");0==idev.pageManager.activeIndex?$("#idBack").css("visibility","hidden"):$("#idBack").css("visibility","visible");null!=b.events&&"function"==typeof b.events.show&&
b.events.show(b);idev.pageManager.canNavigate=!0});return!0}if("slide"==idev.pageManager.animationType){if(null==idev.pageManager.currentPage){$("#"+b.id).css("visibility","visible");idev.pageManager.createWidgets(idev.app.pages[idev.pageManager.pageIndex],b);idev.pageManager.activeIndex=this.pageIndex;idev.pageManager.currentPage=b;null!=b.events&&"function"==typeof b.events.show&&b.events.show(b);return}idev.pageManager.canNavigate=!1;idev.pageManager.newPage&&idev.pageManager.createWidgets(idev.app.pages[idev.pageManager.pageIndex],
b);a=$("#"+b.id).css("left");"auto"==a&&(a=0);idev.pageManager.pageIndex>idev.pageManager.activeIndex&&0<=a?($("#"+b.id).css("z-index",2),$("#"+idev.pageManager.currentPage.id).css("z-index",10),$("#"+b.id).css("visibility","visible"),idev.utils.delay(100,function(){var a=0-(idev.pgWidth+10);$("#"+idev.pageManager.currentPage.id).animate({left:a},idev.animationTime,"linear",function(){idev.pageManager.activeIndex=idev.pageManager.pageIndex;$("#"+idev.pageManager.currentPage.id).css("visibility","hidden");
idev.pageManager.currentPage=b;idev.pageManager.canNavigate=!0;null!=b.events&&"function"==typeof b.events.show&&b.events.show(b)})})):($("#"+idev.pageManager.currentPage.id).css("z-index",0),$("#"+b.id).css("z-index",2),$("#"+b.id).css("visibility","visible"),idev.utils.delay(100,function(){$("#"+b.id).animate({left:0},idev.animationTime,"linear",function(){var a=0-(idev.pgWidth+10);$("#"+idev.pageManager.currentPage.id).css("left",a);$("#"+idev.pageManager.currentPage.id).css("visibility","hidden");
idev.pageManager.activeIndex=idev.pageManager.pageIndex;idev.pageManager.currentPage=b;idev.pageManager.canNavigate=!0;null!=b.events&&"function"==typeof b.events.show&&b.events.show(b)})}))}}else null==this.currentPage?(this.currentPage=b,this.activeIndex=this.pageIndex,$("#"+b.id).css("visibility","visible"),idev.pageManager.createWidgets(idev.app.pages[idev.pageManager.pageIndex],b)):($("#"+this.currentPage.id).css("visibility","hidden"),$("#"+this.currentPage.id).css("z-index",-10),this.currentPage=
b,this.activeIndex=this.pageIndex,$("#"+b.id).css("z-index",0),$("#"+b.id).css("visibility","visible"),idev.pageManager.newPage&&idev.pageManager.createWidgets(idev.app.pages[idev.pageManager.pageIndex],b)),null!=b.events&&"function"==typeof b.events.show&&b.events.show(b);return!0}},createPage:function(a){if(null==idev.app||null==a)return!1;idev.pageManager.newPage=!1;if("string"==typeof a){if(""==a)return!1;for(var a=a.toLowerCase(),b=0;b<idev.app.pages.length;b++){var c=idev.app.pages[b];if(c.name.toLowerCase()==
a.toLowerCase()){c=this.pages[b];if(null==c)return c=idev.app.pages[b],this.pageIndex=b,this.newPage=!0,idev.pageManager.addPage(c,b);this.pageIndex=b;return c}}}else{if(0>a||a>=idev.app.pages.length)return!1;c=this.pages[a];if(null==c)return c=idev.app.pages[a],this.pageIndex=a,this.newPage=!0,idev.pageManager.addPage(c,a);this.pageIndex=a;return c}return null},prevPage:function(){0!=idev.pageManager.activeIndex&&this.showPage(idev.pageManager.activeIndex-1)},nextPage:function(){idev.pageManager.activeIndex!=
idev.app.pages.length-1&&this.showPage(idev.pageManager.activeIndex+1)},syncSize:function(){if(null!=_preferences.config&&!0===_preferences.config.pageFit){var a=$(window).width(),b=$(window).height();idev.pgWidth=a;idev.pgHeight=b;$debug("syncSize");var c=b-($("#ui-toolbar").height()+$("#ui-statusbar").height());$("#container").width(a);$("#container").height(b);$("#content").width(a);$("#content").height(c);$("#ui-toolbar").width(a);$("#ui-statusbar").width(a);if(idev.app.toolbar&&idev.app.toolbar.children)for(b=
0;b<idev.app.toolbar.children.length;b++)idev.app.toolbar.children[b].doLayout();if(idev.app.statusbar&&idev.app.statusbar.children)for(b=0;b<idev.app.statusbar.children.length;b++)idev.app.statusbar.children[b].doLayout();for(var d=0;d<this.pages.length;d++){var f=this.pages[d];if(null!=f){var g=c-($("#"+f.id+"-header").height()+$("#"+f.id+"-footer").height());$("#"+f.id).height(c);$("#"+f.id).width(a);$("#"+f.id+"-header").width(a);$("#"+f.id+"-content").width(a);$("#"+f.id+"-content").height(g);
$("#"+f.id+"-footer").width(a);if(f.config.header)for(b=0;b<f.config.header.children.length;b++)f.config.header.children[b].doLayout();if(f.config.content)for(b=0;b<f.config.content.children.length;b++)"fit"==f.config.content.layout?f.config.content.children[b].resize(a,g):f.config.content.children[b].doLayout();if(f.config.footer)for(b=0;b<f.config.footer.children.length;b++)f.config.footer.children[b].doLayout()}}if(idev.app.events.onResize)idev.app.events.onResize()}}}),utils:{ajax:function(a){try{null!=
a.url&&(null==a.dataType&&(a.dataType="json"),null==a.type&&(a.type="POST"),a.data=a.params,a.error&&(a.failed=a.error,a.error=function(b,d,f){a.failed(b,d,f)}),$.ajax(a))}catch(b){return alert("AJAX Error"),null}},switchTheme:function(a,b){a=_preferences.libpath+"themes/"+a+"/theme.css?forceReload="+(new Date).valueOf();idev.utils.loadCSS(a,b)},loadCSS:function(a,b){try{null==b&&(b=idev.internal.callback),idev.internal.addStyleSheet(a,b)}catch(c){idev.errorHandler(c.message)}},loader:function(a,
b,c){try{var d={};d.url=a;null!=d.url&&""!=d.url&&(d.dataType="text",d.data=c,d.success=function(a){$("head").append("<script type='text/javascript'>"+a+"<\/script>");"function"==typeof b&&b()},d.error&&(d.failed=d.error,d.error=function(a,b,c){d.failed(c)}),$.ajax(d))}catch(f){alert("AJAX Load Error")}},S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},guid:function(){return(idev.utils.S4()+idev.utils.S4()+"-"+idev.utils.S4()+"-"+idev.utils.S4()+"-"+idev.utils.S4()+"-"+idev.utils.S4()+
idev.utils.S4()+idev.utils.S4()).toUpperCase()},json:function(a){try{return jQuery.parseJSON(a)}catch(b){return alert("JSON Decode Error: "+a),null}},eval:function(a,b){try{var c=eval(a);return null==c?a:c}catch(d){return b&&b(d),a}},parseJSON:function(a){try{var b=eval("tmp="+a);return null==b?a:b}catch(c){return a}},cssOpacity:function(a){return 1==a?"":"filter:alpha(opacity="+100*a+");-moz-opacity:"+a+";-khtml-opacity: "+a+";opacity: "+a+";"},ellipsis:function(a,b){for(a+="...";a.length>b&&" "!=
a.substr(a.length-3,1);)a=a.substr(0,a.length-4)+"...";return a},showBusy:function(){null==document.getElementById("_busy")&&$("#container").append("<div id='_busy' class='ui-busy'></div>");var a=$("#container").width(),b=$("#container").height(),c=$("#_busy").width(),d=$("#_busy").height();$("#_busy").css("left",a/2-c/2);$("#_busy").css("top",b/2-d/2);$("#_busy").show()},hideBusy:function(){null!=$("#_busy")&&$("#_busy").hide()},delay:function(a,b,c){"function"==typeof b&&setTimeout(function(){b(c)},
a)},replaceAll:function(a,b,c){if("string"!=typeof a)return"";if(b!=c&&""!=b)for(;-1!=a.indexOf(b);)a=a.replace(b,c);return a},round:function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},ucwords:function(a){return(a+"").replace(/^(.)|\s(.)/g,function(a){return a.toUpperCase()})},dateAdd:function(a,b,c){if("string"==typeof a){if(a=new Date(a),isNaN(a))throw"DateAdd: Date is not a valid date";}else if("object"!=typeof a||-1==a.constructor.toString().indexOf("Date()"))throw"DateAdd: First parameter must be a date object";
if("M"!=b&&"D"!=b&&"Y"!=b&&"h"!=b&&"m"!=b&&"uM"!=b&&"uD"!=b&&"uY"!=b&&"uh"!=b&&"um"!=b&&"us"!=b)throw"DateAdd: Second parameter must be M, D, Y, h, m, uM, uD, uY, uh, um or us";if("number"!=typeof c)throw"DateAdd: Third parameter must be a number";switch(b){case "M":a.setMonth(parseInt(a.getMonth())+parseInt(c));break;case "D":a.setDate(parseInt(a.getDate())+parseInt(c));break;case "Y":a.setYear(parseInt(a.getYear())+parseInt(c));break;case "h":a.setHours(parseInt(a.getHours())+parseInt(c));break;
case "m":a.setMinutes(parseInt(a.getMinutes())+parseInt(c));break;case "s":a.setSeconds(parseInt(a.getSeconds())+parseInt(c));break;case "uM":a.setUTCMonth(parseInt(a.getUTCMonth())+parseInt(c));break;case "uD":a.setUTCDate(parseInt(a.getUTCDate())+parseInt(c));break;case "uY":a.setUTCFullYear(parseInt(a.getUTCFullYear())+parseInt(c));break;case "uh":a.setUTCHours(parseInt(a.getUTCHours())+parseInt(c));break;case "um":a.setUTCMinutes(parseInt(a.getUTCMinutes())+parseInt(c));break;case "us":a.setUTCSeconds(parseInt(a.getUTCSeconds())+
parseInt(c))}return a},isNumeric:function(a){var b=!0,c;if(""==a)return!1;for(var d=0;d<a.length&&!0==b;d++)c=a.charAt(d),-1=="0123456789".indexOf(c)&&(b=!1);return b},trim:function(a,b){return null==a||"string"!=typeof a?a:this.ltrim(this.rtrim(a,b),b)},ltrim:function(a,b){return null==a||"string"!=typeof a?a:a.replace(RegExp("^["+(b||"\\s")+"]+","g"),"")},rtrim:function(a,b){return null==a||"string"!=typeof a?a:a.replace(RegExp("["+(b||"\\s")+"]+$","g"),"")},urldecode:function(a){return decodeURIComponent((a+
"").replace(/\+/g,"%20"))},urlencode:function(a){return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},JSON2string:function(a){var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a='"'+a+'"'),String(a);var c,d,f=[],g=a&&a.constructor==Array;for(c in a)d=a[c],b=typeof d,"string"==b?d='"'+d+'"':"object"==b&&null!==d&&(d=idev.utils.JSON2string(d)),f.push((g?"":'"'+c+'":')+String(d));return(g?"[":
"{")+String(f)+(g?"]":"}")},mousePos:function(a){return{x:a.clientX+document.body.scrollLeft,y:a.clientY+document.body.scrollTop-(idev.app.toolbar?idev.app.toolbar.height:0)}},mousePosition:function(a){return idev.isTouch()?{x:idev._endX+document.body.scrollLeft-document.body.clientLeft,y:idev._endY+document.body.scrollTop-document.body.clientTop}:{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},clone:function(a){try{return $().extend(!0,
{},a)}catch(b){return idev.errorHandler(b.message),null}},generatePassword:function(a,b){a=a||9;b=b||0;vowels="aeuy";constants="bdghjmnpqrstvz";b&1&&(constants+="BDGHJLMNPQRSTVWXZ");b&2&&(vowels+="AEUY");b&4&&(constants+="23456789");b&8&&(constants+="@#$!");password="";alt=(new Date).getTime()%2;for(var c=0;c<a;c++)1==alt?(p=parseInt(327678*Math.random()%constants.length),password+=constants[p],alt=0):(p=parseInt(327678*Math.random()%vowels.length),password+=vowels[p],alt=1);return password},findID:function(a){for(;a;){if(null!=
a.id&&""!=a.id)return a.id;a=a.parentNode}return""},extractIndex:function(a){for(;a;){if(null!=a.id&&""!=a.id){var b=a.id.lastIndexOf("_");if(-1==b)break;return parseInt(a.id.substr(b+1))}a=a.parentNode}return-1},scrypt:function(a,b,c){var d="";if(!c){for(var f="",g=0;g<a.length;g++)var i=idev.rAlphabet.indexOf(a.substr(g,1))+32,f=f+String.fromCharCode(i);a=f}for(g=0;g<a.length;g++)f=a.charCodeAt(g),f=65<=f&&90>=f?String.fromCharCode((f-65+b)%26+65):97<=f&&127>=f?String.fromCharCode((f-97+b)%26+97):
a.charAt(g),c&&(f=idev.rAlphabet.substr(f.charCodeAt(0)-32,1)),d+=f;return d},updateJSONObject:function(a,b){for(var c in a){var d=b[c];if("string"===typeof d||"number"===typeof d||"boolean"===typeof d)a[c]=d}},css2JSON:function(a){if(""==a||null==a)return{};a=(a+";").replace(";;",";");a='{"'+a;a=idev.utils.replaceAll(a,":","~");a=idev.utils.replaceAll(a,"~",'":"');a=idev.utils.replaceAll(a,";","~");a=idev.utils.replaceAll(a,"~",'","');a=a.substr(0,a.length-2)+"}";return idev.utils.json(a)},form:{getFieldWidget:function(a,
b){if(null==a||!(a instanceof baseWidget)&&(a=$get(a.id),null==a))return null;var c={action:3,field:b,widget:null};idev.utils.form.action(a,c);return c.widget},getFieldConfig:function(a,b,c){if("object"!==typeof a||null==b||""==b)return null;for(var d=0;d<a.widgets.length;d++){if(a.widgets[d].field==b){c=a.widgets[d];break}if(a.widgets[d].widgets&&(c=idev.utils.form.getFieldConfig(a.widgets[d],b,c),null!=c))break}return c},getData:function(a){return null==a||!(a instanceof baseWidget)&&(a=$get(a.id),
null==a)?null:idev.utils.form.action(a,{action:0})},clearData:function(a){return null==a||!(a instanceof baseWidget)&&(a=$get(a.id),null==a)?null:idev.utils.form.action(a,{action:1})},setData:function(a,b){return null==a||!(a instanceof baseWidget)&&(a=$get(a.id),null==a)?null:idev.utils.form.action(a,{action:2,rec:b})},action:function(a,b){null==b.data&&(b.data=[]);for(var c=0;c<a.children.length;c++){var d=a.children[c].wtype;if("button"!=d&&"icon"!=d&&"image"!=d&&"label"!=d&&"spacer"!=d&&"dataview"!=
d&&"tabpanel"!=d&&"grid"!=d)if("composite"==d)idev.utils.form.action(a.children[c],b);else if("panel"==d)idev.utils.form.action(a.children[c],b);else switch(b.action){case 0:b.data.push(a.children[c].getValue());"string"==typeof a.children[c].field&&""!=a.children[c].field&&(b.data[a.children[c].field]=a.children[c].getValue());break;case 1:a.children[c].setValue("");break;case 2:a.children[c].setValue(b.rec.get(a.children[c].field));break;case 3:if(a.children[c].field==b.field){b.widget=a.children[c];
return}}else if(3==b.action&&a.children[c].field==b.field){b.widget=a.children[c];return}}return b.data}}},ui:{addMask:function(a){var b=$(document).width(),c=$(document).height();$("body").append("<div id='"+a+"' class='ui-mask' style='left:0px;top:0px;width:"+(b-1)+"px;height:"+(c-1)+"px;z-index:100'>&nbsp;</div>")},removeMask:function(a){$("#"+a).remove()},addEvent:function(a,b,c){$("#"+a).bind(b,c)},removeEvent:function(a,b,c){$("#"+a).unbind(b,c)},message:function(a){var b=!1;"string"==typeof a?
a={text:a,type:"OK"}:(null==a.type&&(a.type="OK"),a.type=a.type.toUpperCase());if(null!=a.text&&("object"==typeof a.text&&(a=a.text),null!=a.text)){null==a.iconsize&&(a.iconsize=idev.defaultMIconSize);null==a.width&&(a.width=idev.defaultMWidth);null==a.height&&(a.height=idev.defaultMHeight);null==a.bbarHeight&&(a.bbarHeight=idev.defaultMBBarHeight);null==a.padding&&(a.padding=idev.defaultMPadding);null==a.cls&&(a.cls=idev.defaultMCls);null==a.title&&(a.title=" ");a.btnWidth=a.btnWidth||idev.defaultMBtnWidth;
a.btnHeight=a.btnHeight||idev.defaultMBtnHeight;a.closable=!0;a.titleHeight=22;a.bodyCls="";null==a.shadow&&(a.shadow=idev.defaultMShadow);null==a.shadowSize&&(a.shadowSize=idev.defaultMShadowSize);null==a.shadowColor&&(a.shadowColor=idev.defaultMShadowColor);null==a.titleCls&&(a.titleCls=idev.defaultMTitleCls);null==a.tbarCls&&(a.tbarCls=idev.defaultMTbarCls);null==a.bbarCls&&(a.bbarCls=idev.defaultMBbarCls);null==a.backgroundCls&&(a.backgroundCls=idev.defaultMBGCls);null==a.fontSize&&(a.fontSize=
idev.defaultMFontSize);null==a.buttonYESColor&&(a.buttonYESColor=a.buttonColor);null==a.buttonNOColor&&(a.buttonNOColor=a.buttonColor);null==a.buttonCANCELColor&&(a.buttonCANCELColor=a.buttonColor);""!==a.backgroundCls&&(a.backgroundCls+=" ie9gradient");a.padding=0;null!=a.icon?(a.icon=a.icon.toLowerCase(),"warning"==a.icon?a.tpl=new idev.wTemplate("<table width={width} cellpadding=5 cellspacing=0 style='width:{width}px;table-layout:fixed;'><tr><td width='{iconsize}px' valign=top><img src='{iconpath}warning.png' style='width:{iconsize}px;height:{iconsize}px;;'></td><td width='{textwidth}px' style='width:{textwidth}px;max-width:{textwidth}px;word-wrap: break-word;'>{text}</td></tr></table>"):
"info"==a.icon||"information"==a.icon?a.tpl=new idev.wTemplate("<table width={width} cellpadding=5 cellspacing=0 style='width:{width}px;table-layout:fixed;'><tr><td width='{iconsize}px' valign=top><img src='{iconpath}information.png' style='width:{iconsize}px;height:{iconsize}px;'></td><td width='{textwidth}px' style='width:{textwidth}px;max-width:{textwidth}px;word-wrap: break-word;'>{text}</td></tr></table>"):"error"==a.icon?a.tpl=new idev.wTemplate("<table width={width} cellpadding=5 cellspacing=0 style='width:{width}px;table-layout:fixed;'><tr><td width='{iconsize}px' valign=top><img src='{iconpath}error.png' style='width:{iconsize}px;height:{iconsize}px;'></td><td width='{textwidth}px;word-wrap: break-word;'>{text}</td></tr></table>"):
"question"==a.icon?a.tpl=new idev.wTemplate("<table width={width} cellpadding=5 cellspacing=0 style='width:{width}px;table-layout:fixed;'><tr><td width='{iconsize}px' valign=top><img src='{iconpath}question.png' style='width:{iconsize}px;height:{iconsize}px;'></td><td width='{textwidth}px' style='width:{textwidth}px;max-width:{textwidth}px;word-wrap: break-word;'>{text}</td></tr></table>"):null==a.tpl&&(a.tpl=new idev.wTemplate("<table width={width} cellpadding=5 cellspacing=0 style='width:{width}px;table-layout:fixed;'><tr><td width='{iconsize}px' valign=top><img src='{iconpath}question.png' style='width:{iconsize}px;height:{iconsize}px;'></td><td width='{textwidth}px' style='width:{textwidth}px;max-width:{textwidth}px;word-wrap: break-word;'>{text}</td></tr></table>"))):
null==a.tpl&&(a.tpl=new idev.wTemplate("<table width={width} cellpadding=5 cellspacing=0 style='width:{width}px;table-layout:fixed;'><tr><td><span style='word-wrap: break-word;'>{text}</span></td></tr></table>"));null==a.data&&(a.data=[]);a.data.iconpath=_preferences.libpath+"images/";a.data.iconsize=a.iconsize;a.data.width=a.width-(10+2*a.padding);a.data.textwidth=a.width-(a.iconsize+20+2*a.padding);a.data.text=a.text;var c;"YESNO"==a.type?c=[">>",{wtype:"button",width:a.btnWidth,height:a.btnHeight,
radius:4,text:"YES",cls:"ui-button-yes",events:{click:function(){d.callback&&d.callback("YES");d.close()}}},{wtype:"spacer",width:4},{wtype:"button",width:a.btnWidth,height:a.btnHeight,radius:4,text:"NO",cls:"ui-button-no",events:{click:function(){d.callback&&d.callback("NO");d.close()},afterRender:function(a){$delay(100,function(a){$("#"+a.id).focus()},a)}}},{wtype:"spacer",width:15}]:"OKCANCEL"==a.type?c=[">>",{wtype:"button",width:a.btnWidth,height:a.btnHeight,radius:4,text:"OK",cls:"ui-button-ok",
events:{click:function(){d.callback&&d.callback("OK");d.close()}}},{wtype:"spacer",width:4},{wtype:"button",width:a.btnWidth,height:a.btnHeight,radius:4,text:"CANCEL",cls:"ui-button-cancel",events:{click:function(){d.callback&&d.callback("CANCEL");d.close()},afterRender:function(a){$delay(100,function(a){$("#"+a.id).focus()},a)}}},{wtype:"spacer",width:15}]:"OK"==a.type?(b=!0,c=[">>",{wtype:"button",width:a.btnWidth,height:a.btnHeight,radius:4,text:"OK",cls:"ui-button-ok",events:{click:function(){d.callback&&
d.callback("OK");d.close()},afterRender:function(a){$delay(100,function(a){$("#"+a.id).focus()},a)}}},{wtype:"spacer",width:20}]):(b=!0,c=[]);var d=new idev.ui.widgetWindow({title:a.title,x:a.x,y:a.y,width:a.width,height:a.height,titleHeight:a.titleHeight,titleStyle:a.titleStyle,tbarCls:a.tbarCls,bbarCls:a.bbarCls,titleCls:a.titleCls,bodyCls:a.bodyCls,backgroundCls:a.backgroundCls,shadow:a.shadow,shadowSize:a.shadowSize,shadowColor:a.shadowColor,panelCls:"ui-message",padding:a.padding,closable:!1,
cls:a.cls,autoClose:b,style:a.style,radius:a.radius,modal:!0,hidden:!0,html:a.tpl.render(a.data),bbar:c,bbarHeight:a.bbarHeight});d.callback=a.callback;a.popup&&!a.animate&&(a.animate="moveto");a.animate?(null==a.animSpeed&&(a.animSpeed=500),"fadein"==a.animate?(d.fadeIn(a.animSpeed),a.delay&&$delay(a.delay,function(){d.fadeOut(a.animSpeed,null,function(){d.close()})},a)):"moveto"==a.animate&&null!=a.ax&&null!=a.ay?(d.show(),d.moveTo(a.ax,a.ay,a.animSpeed),a.delay&&$delay(a.delay,function(){d.moveTo(a.x,
a.y,a.animSpeed,null,function(){d.close()})},a)):d.show()):d.show();return d}},widgetPanel:baseWidget.extend({init:function(a){a.panelCls=a.panelCls||"";this._super(a);this.wtype="panel";this.labelWidth=null==this.config.labelWidth?70:this.config.labelWidth;this.columns=null==this.config.columns?1:this.config.columns;this.columnAlign=null==this.config.columnAlign?"top":this.config.columnAlign;this.rowHeight=null==this.config.rowHeight?0:this.config.rowHeight;this.padding=null==this.config.padding?
0:this.config.padding;this.hScroll=this.config.hScroll;this.title=this.config.title;this.frame=null==this.config.frame?!1:this.config.frame;this.modal=null==this.config.modal?!1:this.config.modal;this.draggable=null==this.config.draggable?!1:this.config.draggable;this.resizable=null==this.config.resizable?!1:this.config.resizable;this.closable=null==this.config.closable?!1:this.config.closable;this.minisable=null==this.config.minisable?!1:this.config.minisable;this.maxisable=null==this.config.maxisable?
!1:this.config.maxisable;this.expandable=null==this.config.expandable?!1:this.config.expandable;this.collapsed=null==this.config.collapsed?!1:this.config.collapsed;this.bodyStyle=null==this.config.bodyStyle?"":this.config.bodyStyle;this.titleHeight=this.config.titleHeight||idev.defaultTitleHeight;this.titleStyle=this.config.titleStyle||"";this.titleCls=idev.convertNulls(this.config.titleCls,"");this.titleTextCls=idev.convertNulls(this.config.titleTextCls,"");this.tbar=this.config.tbar;this.tbarHeight=
this.config.tbarHeight||34;this.tbarCls=this.config.tbarCls||"";this.tbarStyle=this.config.tbarStyle||"";this.tbarConfig=this.config.tbarConfig||{};this.tbCreated=!1;this.bbar=this.config.bbar;this.bbarHeight=this.config.bbarHeight||34;this.bbarCls=this.config.bbarCls||"";this.bbarStyle=this.config.bbarStyle||"";this.bbarConfig=this.config.bbarConfig||{};this.bbCreated=!1;this.shadow=this.config.shadow;this.shadowSize=this.config.shadowSize||3;this.shadowColor=this.config.shadowColor||"";this.autoFocus=
this.config.autoFocus;this.focusID=this.config.focusID||"";this.bodyCls=this.config.bodyCls||"";this.panelCls=this.config.panelCls||"";this.icon=this.config.icon||"";this.area=this.config.area||"";this.collapsed=this.config.collapsed||!1;this.layoutManager=new idevLayoutManager(this);this.backgroundStyle=this.config.backgroundStyle||"";this.backgroundCls=this.config.backgroundCls||"";this.contentStyle=this.config.contentStyle||"";if("accordion"==this.layout||"frame"==this.layout)this.autoScroll=!1;
this.expandable&&!this.title&&"center"!=this.area?this.title="   ":this.title||(this.expandable=!1);null==this.title&&(this.titleHeight=0);null==this.tbar&&(this.tbarHeight=0);null==this.bbar&&(this.bbarHeight=0);"center"==this.area&&(this.expandable=!1);null!=this.tbar&&(this.tbar instanceof baseWidget?this.tbCreated=!1:(null==this.tbarConfig.cls&&(this.tbarConfig.cls=this.tbarCls),null==this.tbarConfig.height&&(this.tbarConfig.height=this.tbarHeight),this.tbarConfig.width=this.width,a=new idev.ui.widgetToolbar(this.tbarConfig),
a.widgets=this.tbar,this.tbar=a,this.tbCreated=!0));null!=this.bbar&&(this.bbar instanceof baseWidget?this.bbCreated=!1:(null==this.bbarConfig.cls&&(this.bbarConfig.cls=this.bbarCls),null==this.bbarConfig.height&&(this.bbarConfig.height=this.bbarHeight),this.bbarConfig.width=this.width,a=new idev.ui.widgetStatusbar(this.bbarConfig),a.widgets=this.bbar,this.bbar=a,this.bbCreated=!0));var b=a="",c="",d="";this.title&&(this.title=this.title,a=this.parent?"frame"==this.parent.layout?"<div id='{id}-title' class='ui-panel-titlebar ui-panel-layout {titlecls}' style='max-width:{titlewidth}px;width:{titlewidth}px;height:{titleheight}px;max-height:{titleheight}px;{titlestyle}'>":
"<div id='{id}-title' class='ui-panel-titlebar {titlecls}' style='max-width:{titlewidth}px;width:{titlewidth}px;height:{titleheight}px;max-height:{titleheight}px;{titlestyle}'>":"<div id='{id}-title' class='ui-panel-titlebar {titlecls}' style='max-width:{titlewidth}px;width:{titlewidth}px;height:{titleheight}px;max-height:{titleheight}px;{titlestyle}'>",a+="<table width='100%' class='ui-panel-title  {titletextcls}'><tr height={titletextheight}><td width='{iconwidth}px' align='right' valign=top id='{id}-icon'>{icon}</td><td id='{id}-titletext' valign=center>{title}</td><td width='{buttonwidth}px' align='right' valign=top id='{id}-buttons'>{buttons}</td></tr></table></div>",
this.roundCorners&&(this.titleStyle+=";border-top-left-radius:"+(this.radius-1)+"px;",this.titleStyle+="border-top-right-radius:"+(this.radius-1)+"px;",this.titleStyle+="-webkit-border-top-left-radius:"+(this.radius-1)+"px;",this.titleStyle+="-webkit-border-top-right-radius:"+(this.radius-1)+"px;",this.titleStyle+="-moz-border-top-left-radius:"+(this.radius-1)+"px;",this.titleStyle+="-moz-border-top-right-radius:"+(this.radius-1)+"px;"));this.tbar&&(b="<div id='{id}-tbar' class='ui-panel-tbar {tbarcls}' style='max-width:{tbarwidth}px;width:{tbarwidth}px;height:{tbarheight}px;{tbarstyle};'></div>",
this.roundCorners&&null==this.title&&(this.tbarStyle+=";border-top-left-radius:"+(this.radius-1)+"px;",this.tbarStyle+="border-top-right-radius:"+(this.radius-1)+"px;",this.tbarStyle+="-webkit-border-top-left-radius:"+(this.radius-1)+"px;",this.tbarStyle+="-webkit-border-top-right-radius:"+(this.radius-1)+"px;",this.tbarStyle+="-moz-border-top-left-radius:"+(this.radius-1)+"px;",this.tbarStyle+="-moz-border-top-right-radius:"+(this.radius-1)+"px;"));this.bbar&&(c="<div id='{id}-bbar' class='ui-panel-bbar {bbarcls}' style='max-width:{bbarwidth}px;width:{bbarwidth}px;height:{bbarheight}px;{bbarstyle};'></div>",
this.roundCorners&&(this.bbarStyle+=";border-bottom-left-radius:"+(this.radius-1)+"px;",this.bbarStyle+="border-bottom-right-radius:"+(this.radius-1)+"px;",this.bbarStyle+="-webkit-border-bottom-left-radius:"+(this.radius-1)+"px;",this.bbarStyle+="-webkit-border-bottom-right-radius:"+(this.radius-1)+"px;",this.bbarStyle+="-moz-border-bottom-left-radius:"+(this.radius-1)+"px;",this.bbarStyle+="-moz-border-bottom-right-radius:"+(this.radius-1)+"px;"));this.roundCorners&&(this.backgroundStyle+=";border-radius:"+
(this.radius-1)+"px;",this.backgroundStyle+="-webkit-border-radius:"+(this.radius-1)+"px;",this.backgroundStyle+="-moz-border-radius:"+(this.radius-1)+"px;",this.style+=";border-radius:"+this.radius+"px;",this.style+="-webkit-border-radius:"+this.radius+"px;",this.style+="-moz-border-radius:"+this.radius+"px;");if(this.expandable&&("west"==this.area||"east"==this.area))d="<div id='{id}-filler' class='ui-panel-filler' style='visibility:hidden;position:absolute;left:{fillerleft}px;top:{titleheight}px;width:24px;height:{fillerheight}px;'></div>";
this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element ui-panel {panelcls}' style='overflow:hidden;background:transparent;{elementstyle}{style}'>","<div id='{id}-background' class='ui-panel-background {backgroundcls}' style='position:absolute;left:0px;top:0px;width:100%;height:100%;{backgroundstyle}'>","</div>","<div id='{id}-container' style='position:relative;left:0px;top:px;background:transparent;'>",a,b,"<div id='{id}-body' class='{bodycls}' style='width:100%;{bodystyle};height:{bodyheight}px;'>",
"<div id='{id}-content' class='ui-panel-content {cls}' style='position:relative;{contentstyle}'>","{html}","</div>","</div>",c,d,"</div>","</div>");idev.internal.add(this)},render:function(){var a=this.style,b=this.bodyStyle,c=this.panelCls,d="background:transparent;",f="",g=10,i=1,m=""==this.icon?"":"<img src='"+this.icon+"' style='width:16px;height:16px;'/>",k=100,j="west"==this.area?this.width-19:0,h=!0;if(null==this.renderTo||"undefined"==typeof this.renderTo)idev.errorHandler("No Render To property set on panel. ID:"+
this.id);else{this.draggable&&(idev.isIE8()&&this.shadow)&&(h=!1);this.border&&(a=-1==this.borderStyle.indexOf("border")?a+("border:"+this.borderStyle+";"):a+(this.borderStyle+";"));this.modal&&(k=9999+10*idev.modals,a+="z-index:"+(k+1)+";");0<this.padding&&(d+="padding:"+this.padding+"px;");this.autoScroll&&!1==idev.isTouch()&&(b+="overflow:auto;");"window"==this.wtype&&(this.expandable=!1);this.closable&&this.title&&(f+="<div id='"+this.id+"-close' class='ui-panel-btn-close'>&nbsp;</div>",g+=18);
this.maxisable&&this.title&&(f+="<div id='"+this.id+"-min' class='ui-panel-btn-max'>&nbsp;</div>",g+=18);this.minisable&&this.title&&(f+="<div id='"+this.id+"-min' class='ui-panel-btn-min'>&nbsp;</div>",g+=18);if(this.expandable)if("west"==this.area)f+="<div id='"+this.id+"-expand' class='ui-panel-btn-collapse-w'>&nbsp;</div>",g+=16;else if("east"==this.area)m+="<div id='"+this.id+"-expand' class='ui-panel-btn-expand-e'></div>",i=16;else{if("south"==this.area)f+="<div id='"+this.id+"-expand' class='ui-panel-btn-expand'>&nbsp;</div>";
else{var q=!1;this.parent&&"accordion"==this.parent.layout&&(q=!0);f=q?f+("<div id='"+this.id+"-expand' class='ui-panel-btn-minus'>&nbsp;</div>"):this.collapsed?f+("<div id='"+this.id+"-expand' class='ui-panel-btn-expand'>&nbsp;</div>"):f+("<div id='"+this.id+"-expand' class='ui-panel-btn-collapse'>&nbsp;</div>")}g+=16}this.bodyheight=this.height;this.title&&(this.bodyheight-=parseInt(this.titleHeight));this.tbar&&(this.bodyheight-=parseInt(this.tbarHeight));this.bbar&&(this.bodyheight-=parseInt(this.bbarHeight));
this.autoScroll||(d+="overflow:hidden;width:"+this.width+"px;height:"+this.bodyheight+"px;");this.shadow&&(""==this.shadowColor?c+=" ui-panel-shadow":a+="box-shadow: "+this.shadowSize+"px "+this.shadowSize+"px "+2*this.shadowSize+"px "+this.shadowColor+";");idev.isFF()&&"window"==this.wtype&&(d+="display: inline;");q="";if((""==this.title||null==this.title)&&null==this.tbar)q=" ui-panel-fit";var l=[];l.id=this.id;l.cls=this.cssQuirks(this.cls+q);l.width=this.width;l.height=this.height;l.title=null==
this.title?"":this.title;l.bodyheight=this.bodyheight;l.elementstyle=this.elementStyle;l.style=a;l.icon=m;l.iconwidth=i;l.fillerleft=j;l.fillerheight=this.height-this.titleHeight;l.buttons=f;l.buttonwidth=g;l.bodystyle=b;l.backgroundstyle=this.backgroundStyle;l.backgroundcls=this.cssQuirks(this.backgroundCls,h);l.contentstyle=d+this.contentStyle;l.tbarwidth=this.width;l.titlewidth=this.width;l.titleheight=this.titleHeight;l.titletextheight=this.titleHeight-4;l.titlestyle=this.titleStyle;l.tbarcls=
this.cssQuirks(this.tbarCls,h);l.tbarheight=this.tbarHeight;l.tbarstyle=this.tbarStyle;l.bbarwidth=this.width;l.bbarcls=this.cssQuirks(this.bbarCls,h);l.bbarheight=this.bbarHeight;l.bbarstyle=this.bbarStyle;l.panelcls=this.frame?this.cssQuirks(c,h)+" ui-panel-frame":this.cssQuirks(c,h);l.bodycls=this.cssQuirks(this.bodyCls,h);l.titlecls=this.cssQuirks(this.titleCls,h);l.titletextcls=this.titleTextCls;l.html=this.html;idev.internal.beforeRender(this);a=this.tpl.render(l);this.modal?(b=$(document).width(),
c=$(document).height(),this.maskID=idev.internal.nextUIID(),this.maskCls=this.config.maskCls||"ui-mask",$("body").append("<div id='"+this.maskID+"' class='"+this.maskCls+"' style='left:0px;top:0px;width:"+(b-1)+"px;height:"+(c-1)+"px;z-index:"+k+";display:none;'>&nbsp;</div>"),$("#"+this.renderTo).append(a),idev.modals++):$("#"+this.renderTo).append(a);this.autoScroll&&idev.isTouch()&&idev.utils.delay(500,function(a){a.iScroll=a.hScroll?new iScroll(a.id+"-content",{hScroll:!0,bounce:!0,momentum:!0}):
new iScroll(a.id+"-content")},this);if(this.widgets){if("accordion"==this.layout)for(k=0;k<this.widgets.length;k++)this.widgets[k].border=!1;idev.internal.renderWidgets(this.page,this.id+"-content",this.widgets,this.layout,this.labelWidth,this)}this.tbar&&(this.tbar.page=this.page,this.tbar.parent=this,this.tbar.rowHeight=this.tbarHeight-2,this.tbar.renderTo=this.id+"-tbar",this.tbar.render());this.bbar&&(this.bbar.page=this.page,this.bbar.parent=this,this.bbar.rowHeight=this.bbarHeight-2,this.bbar.renderTo=
this.id+"-bbar",this.bbar.render());this.draggable&&this.setDraggable(!0);this.minisable&&this.title&&$("#"+this.id+"-min").click(function(){var a=idev.get(this.id.replace("-min",""));a.events.minimise&&a.events.minimise(this)});this.maxisable&&this.title&&$("#"+this.id+"-max").click(function(){var a=idev.get(this.id.replace("-close",""));a.events.maximise&&a.events.maximise(this)});this.expandable&&(this.expandable&&this.collapsed&&($("#"+this.id).css({height:this.titleHeight+"px"}),this.expanded=
!1),$("#"+this.id+"-expand").click(function(){var a=idev.get(this.id.replace("-expand",""));if(a.expanded)a.oncollapse();else a.onexpand()}));this.closable&&this.title&&$("#"+this.id+"-close").click(function(){var a=idev.get(this.id.replace("-close",""));a.events.close?!1!==a.events.close(this)&&a.close():a.close()});idev.internal.afterRender(this);this.rendered=!0;this.config.collaped&&$delay(100,function(a){a.oncollapse()},this);(this.events.contextMenu||this.events.contextmenu)&&this.addEvent("contextmenu",
idev.internal.onContextMenu);this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.events.dblclick&&$("#"+this.id).dblclick(idev.internal.onDblClick);if((this.autoFocus||""!==this.focusID)&&this.widgets)for(k=0;k<this.widgets.length;k++)if("input"==this.widgets[k].wtype||"textarea"==this.widgets[k].wtype)if(this.focusID==this.widgets[k].id){$get(this.widgets[k].id).focus();break}else if(this.autoFocus){$get(this.widgets[k].id).focus();break}}},onexpand:function(){this.layoutManager.expand()},
oncollapse:function(){this.layoutManager.collapse()},innerHTML:function(a){$("#"+this.id+"-content").empty();$("#"+this.id+"-content").append(a)},close:function(){if(this.events.beforeClose&&!1===this.events.beforeClose(this))return!1;this.autoDestroy?(this.hide(),this.destroy()):this.hide();this.modal&&($("#"+this.maskID).remove(),idev.modals--);this.events.afterClose&&this.events.afterClose(this);return!0},onhide:function(){this._super();this.maskID&&$("#"+this.maskID).hide()},onshow:function(){this._super();
this.maskID&&$("#"+this.maskID).show();if(idev.isIE8())for(var a=0;a<this.widgets.length;a++){var b=idev.get(this.widgets[a].id);try{if(b)b.onshow()}catch(c){}}},doLayout:function(){this.layoutManager.doLayout();this._super()},ondestroy:function(){this.tbCreated&&this.tbar.destroy();this.bbCreated&&this.bbar.destroy()},removeWidget:function(a,b){var c=this.id+"-content-body",d=0;if(0!=this.widgets.length){if("string"==typeof a)for(var f=0;f<this.widgets.length;f++){if(this.widgets[f].id==a){d=f;break}}else d=
a,a=this.widgets[a].id,c=this.id+"-content-body";f=$get(a);if(null!=f){f.destroy(b);if("row"==this.layout){$("#"+c+"-row"+d).remove();for(f=d+1;f<=this.widgets.length;f++){var g=c+"-row"+f,i=c+"-row"+(f-1);$("#"+g).attr("id",i);g=c+"-cell"+f;i=c+"-cell"+(f-1);$("#"+g).attr("id",i)}}if("column"==this.layout){$("#"+c+"-cell"+d).remove();for(f=d+1;f<=this.widgets.length;f++)g=c+"-cell"+f,i=c+"-cell"+(f-1),$("#"+g).attr("id",i)}if("form"==this.layout){$("#"+c+"-cell"+d).parent().remove();for(f=d+1;f<=
this.widgets.length;f++)g=c+"-cell"+f,i=c+"-cell"+(f-1),$("#"+g).attr("id",i)}}}},addWidget:function(a){var b=this.id;if("frame"==this.layout||"accordion"==this.layout||null==a.wtype)return!1;this.widgets||(this.widgets=[]);if("column"==this.layout){var c=this.id+"-content-row",d=this.id+"-content-body",f="",g="",i=this.widgets.length;a.cellStyle&&(f=a.cellStyle);b=d+"-cell"+i;g="center"==this.columnAlign?g+("<td valign='center' id='"+b+"' style='"+f+"'></td>"):"bottom"==parent.columnAlign?g+("<td valign='bottom' id='"+
b+"' style='"+f+"'></td>"):g+("<td valign='top' id='"+b+"' style='"+f+"'></td>");$("#"+c).append(g)}else if("row"==this.layout)f="",d=this.id+"-content-body",i=this.widgets.length,a.cellStyle&&(f=a.cellStyle),b=d+"-cell"+i,g=""!=this.rowHeight?"<tr id='"+d+"-row"+i+"' style='height:"+this.rowHeight+"px'>":"<tr id='"+d+"-row"+i+"'>",g=this.center?g+("<td style='"+f+"'><center><div id='"+b+"'></div></center></td>"):g+("<td id='"+b+"' style='"+f+"'></td>"),$("#"+d).append(g+"</tr>");else if("form"==
this.layout)f="",d=this.id+"-content-body",i=this.widgets.length,a.cellStyle&&(f=a.cellStyle),b=d+"-cell"+i,g="<tr><td valign='top' width:'"+this.labelWidth+"px' style='width:"+this.labelWidth+"px;"+f+"'><span  id='"+b+"-label' class='ui-labeltext' style='"+a.labelStyle+"'>"+a.label+"</span></td><td id='"+b+"'></td></tr>",null==a.label&&(g="<tr><td id='"+b+"' colspan=2></td><td></td></tr>"),$("#"+d).append(g);else if("table"==this.layout){d=this.id+"-content-body";i=this.widgets.length;if(0==this.widgets.length%
this.columns){g="<tr>";0<parent.rowHeight&&(g="<tr height="+parent.rowHeight+" >");for(c=0;c<this.columns;c++)a.cellStyle&&(f=a.cellStyle),b=d+"-cell"+(i+c),g+="<td valign='top' id='"+b+"' style='"+f+"'></td>";g+="</tr>";$("#"+d).append(g)}b=d+"-cell"+i}else"fit"==this.layout&&(0<this.widgets.length&&(a.hidden=!0),a.width=this.width-2*this.padding,a.height=this.bodyheight,idev.isIE()&&(a.height=this.bodyheight-2*this.padding),a.hideType="visibility"),b=this.id+"-content";a.parent=this;a.page=this.page;
this.widgets.push(a);idev.isClass(a)?(a.renderTo=b,a.render()):(a.renderTo=b,idev.internal.renderWidget(this.page,a));return!0},setTitle:function(a){this.title&&$("#"+this.id+"-titletext").html(a)},getTitle:function(){return this.title?$("#"+this.id+"-titletext").html():""}}),widgetTextField:baseWidget.extend({init:function(a){22>a.height&&(a.height=22);this._super(a);this.wtype="input";this.inputType=a.inputType||"text";this.inputStyle=a.inputStyle||"";this.inputCls=a.inputCls||"";this.editable=
null==a.editable?!0:a.editable;this.watermark=a.watermark||"";this.watermarkColor=a.watermarkColor||"#aaa";this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element ui-textfield ui-frame {cls}' style='{elementstyle};{style};'>","<input id='{id}-input' type='{inputtype}' class='ui-input {inputcls}' style='width:{width}px;height:{height}px;max-width:{width}px;max-height:{height}px;{inputstyle}'  value='{value}'/>","</div>");idev.internal.add(this);""!=this.inputCls&&(this.inputCls+="  ie9gradient")},
setValue:function(a){var b=$("#"+this.id+"-input").val();this.watermark==b&&($("#"+this.id+"-input").val(""),$("#"+this.id+"-input").css("color",""));""==a&&""!=this.watermark?($("#"+this.id+"-input").val(this.watermark),$("#"+this.id+"-input").css("color",this.watermarkColor)):$("#"+this.id+"-input").val(a)},getValue:function(){var a=$("#"+this.id+"-input").val();this.watermark==a&&""!=this.watermark&&(a="");return"number"==this.inputType?""==a?0:parseInt(a):a},setEditable:function(a){this.editable=
a},getEditable:function(){return this.editable},render:function(){if(null!=this.renderTo){var a=this.value,b=this.inputStyle,c=this.style;""!=this.watermark&&""==a&&(a=this.watermark,b+="color:"+this.watermarkColor+";");""!=this.borderStyle&&(c+=";border:"+this.borderStyle);var d=[];d.id=this.id;d.cls=this.cssQuirks(this.cls);d.elementstyle=this.elementStyle;d.style=c;d.value=a;d.width=this.width-4;d.height=this.height-4;d.inputcls=this.inputCls;d.inputstyle=b;this.autoScroll&&(d.inputstyle=this.style+
";overflow:auto;");d.inputtype="number"==this.inputType?"text":this.inputType;a=this.tpl.render(d);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",this.radius+"px"));if(this.hidden)this.onhide();idev.internal.afterRender(this);this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.events.dblclick&&
$("#"+this.id).dblclick(idev.internal.onDblClick);$("#"+this.id+"-input").blur(idev.internal.onLostFocus);$("#"+this.id+"-input").focus(idev.internal.onFocus);this.events.change&&$("#"+this.id).change(idev.internal.onChange);$("#"+this.id).keydown({widget:this},function(a){var b=a.data.widget;if(!b.editable)return a.preventDefault(),!1;""!=b.watermark&&$("#"+b.id+"-input").val()==b.watermark&&($("#"+b.id+"-input").val(""),$("#"+b.id+"-input").css("color",""));if("number"==b.inputType&&!(46==a.keyCode||
13==a.keyCode||8==a.keyCode||9==a.keyCode||37==a.keyCode||39==a.keyCode||190==a.keyCode))if((48>a.keyCode||57<a.keyCode)&&(96>a.keyCode||105<a.keyCode))return a.preventDefault(),!1});$("#"+this.id).keyup({widget:this},function(a){var b=a.data.widget;if("input"==b.wtype&&13==a.keyCode&&b.events.onenter)return b.events.onenter(b),a.preventDefault(),!1;b.events.keyup&&b.events.keyup(b,a)});this.events.keypress&&$("#"+this.id).keypress(idev.internal.onKeypress);this.rendered=!0}},doLayout:function(){var a=
$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-input").width(a-4);$("#"+this.id+"-input").height(b-4);this._super()}}),widgetTextArea:baseWidget.extend({init:function(a){this._super(a);this.wtype="textarea";this.editable=null==a.editable?!0:a.editable;this.watermark=a.watermark||"";this.inputCls=a.inputCls||"";this.inputStyle=a.inputStyle||"";this.watermarkColor=a.watermarkColor||"#aaa";this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element ui-textfield ui-frame {cls}' style='{elementstyle};{style}'>",
"<textarea id='{id}-input' class='ui-textarea {inputcls}'  style='width:{width}px;height:{height}px;{inputstyle};'>{value}</textarea>","</div>");idev.internal.add(this);""!=this.inputCls&&(this.inputCls+="  ie9gradient")},setValue:function(a){var b=$("#"+this.id+"-input").val();this.watermark==b&&($("#"+this.id+"-input").val(""),$("#"+this.id+"-input").css("color",""));""==a&&this.watermark?($("#"+this.id+"-input").val(this.watermark),$("#"+this.id+"-input").css("color",this.watermarkColor)):$("#"+
this.id+"-input").val(a)},getValue:function(){var a=$("#"+this.id+"-input").val();this.watermark==a&&(a="");return a},setEditable:function(a){this.editable=a},getEditable:function(){return this.editable},render:function(){if(null!=this.renderTo){var a=this.value,b=this.inputStyle,c=this.style;""!=this.watermark&&""==a&&(a=this.watermark,b+="color:"+this.watermarkColor+";");this.autoScroll&&(b+=";overflow:auto;");""!=this.borderStyle&&(c+=";border:"+this.borderStyle);var d=[];d.id=this.id;d.cls=this.cssQuirks(this.cls);
d.elementstyle=this.elementStyle;d.style=c;d.inputstyle=b;d.inputcls=this.inputCls;d.width=this.width-10;d.height=this.height-10;d.value=a;a=this.tpl.render(d);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",this.radius+"px"),$("#"+this.id).css("-o-border-radius",this.radius+"px"));idev.internal.afterRender(this);
$("#"+this.id+"-input").blur(idev.internal.onLostFocus);$("#"+this.id+"-input").focus(idev.internal.onFocus);this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.events.change&&$("#"+this.id).change(idev.internal.onChange);$("#"+this.id).keydown({widget:this},function(a){var b=a.data.widget;if(!b.editable)return a.preventDefault(),!1;""!=b.watermark&&$("#"+b.id+"-input").val()==b.watermark&&($("#"+b.id+"-input").val(""),$("#"+b.id+"-input").css("color",""))});$("#"+this.id).keyup({widget:this},
function(a){var b=a.data.widget;if("textarea"==b.wtype&&13==a.keyCode&&b.events.onenter)return b.events.onenter(b),a.preventDefault(),!1});this.events.keypress&&$("#"+this.id).keypress(idev.internal.onKeypress);this.rendered=!0}},doLayout:function(){var a=$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-input").width(a-10);$("#"+this.id+"-input").height(b-10);this._super()}}),widgetComboBox:baseWidget.extend({init:function(a){this._super(a);this.wtype="combo";this.inputType=a.inputType;
this.editable=null==a.editable?!0:a.editable;this.height=null==a.height?22:a.height;this.width=null==a.width?150:a.width;null==this.inputType&&(this.inputType="text");null==this.inputStyle&&(this.inputStyle="");this.watermark=a.watermark||"";this.watermarkColor=a.watermarkColor||"#aaa";this.buttonCls=a.buttonCls||"ui-combo-button";this.ds=a.ds;this.listTpl=a.listTpl;this.displayField=a.displayField||"";this.inputStyle=a.inputStyle||"";this.valueField=a.valueField||"";this.listEntryHeight=a.listEntryHeight||
18;this.visibleEntrys=a.visibleEntrys||4;this.listHeight=(this.listEntryHeight+4)*this.visibleEntrys;this.iconColor=a.iconColor;this.selectColor=a.selectColor||"";this.selectCls=a.selectCls||"ui-list-select";var b=this.roundCorners;idev.isIE8()&&(b=!1);this.dropWidth=null==a.dropWidth?this.width-(b?6:0):a.dropWidth;this.autoSelect=null==a.autoSelect?!0:a.autoSelect;null!=this.ds&&(this.visibleEntrys>this.ds.getCount()&&(a=this.ds.getCount()||1,this.listHeight=(this.listEntryHeight+4)*a),this.ds.bind(this));
this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element ui-combo {cls}' style='{elementstyle};{style};overflow:hidden;'>","<input id='{id}-input' type='{inputtype}' class='ui-combo-input' style='float:left;width:{width}px;height:{inputheight}px;{inputstyle}'  value='{value}'/>","<div id='{id}-button' style='float:right;max-width:{buttonwidth}px;'></div>","<div id='{id}-list' style='z-index:9999;'></div>","</div>");""!=this.displayField&&""==this.valueField&&(this.valueField=this.displayField);
""==this.displayField&&(this.displayField=this.ds.getFieldName(0));""==this.valueField&&(this.valueField=this.ds.getFieldName(0));null==this.listTpl&&(this.listTpl=new idev.wTemplate("<div style='max-height:{entryheight}px;height:{entryheight}px;padding:2px;font-size:10pt;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;'>{"+this.displayField+"}</div>"));this.inpStyle={};""!=this.inputStyle&&(this.inpStyle=idev.utils.css2JSON(this.inputStyle));idev.internal.add(this)},setInputValue:function(a){var b=
$("#"+this.id+"-input").val();this.watermark==b&&($("#"+this.id+"-input").val(""),null==this.inpStyle.color?$("#"+this.id+"-input").css("color",""):$("#"+this.id+"-input").css(this.inpStyle));""==a&&""!=this.watermark?($("#"+this.id+"-input").val(this.watermark),$("#"+this.id+"-input").css("color",this.watermarkColor)):$("#"+this.id+"-input").val(a)},setValue:function(a){if(""==a)this.setInputValue(a),this.list&&(this.list.selected=-1);else if(null!=this.ds){this.editable&&this.setInputValue(a);var b=
this.ds.find(this.valueField,a,0,!1,!1);-1!=b&&(a=this.ds.getAt(b).get(this.displayField),this.setInputValue(a),a=this.list,null!=this.list&&(a.autoSelect&&(-1!=a.selected&&($("#"+a.id+"_"+a.selected).addClass(a.entryCls),$("#"+a.id+"_"+a.selected).removeClass(a.selectCls),""!=this.selectColor&&a.updateItem(a.selected,"background-color","")),""!=a.selectCls&&($("#"+a.id+"_"+a.selected).removeClass(a.entryCls),$("#"+a.id+"_"+a.selected).addClass(a.selectCls)),""!=this.selectColor&&a.updateItem(b,"background-color",
this.selectColor)),this.list.selected=b))}},getInputValue:function(){var a=$("#"+this.id+"-input").val();this.watermark==a&&(a="");return a},getValue:function(){if(this.editable){var a=this.getInputValue();if(-1==this.list.getSelected()||this.ds&&-1==this.ds.find(this.displayField,a))return a}if(null==this.ds)return this.editable?this.getInputValue():"";a=this.ds.getAt(this.list.getSelected());return null==a?"":a.get(this.valueField)},render:function(){if(null!=this.renderTo)if(null==this.ds)idev.errorHandler("No Combo DS");
else{var a="",b=this.inputStyle,c=this.style;this.btnWidth=this.height+3;idev.isIPad()&&(btnWidth+=12);""!=this.watermark&&(a=this.watermark,b+="color:"+this.watermarkColor+";");""!=this.borderStyle&&(c+=";border:"+this.borderStyle);var d=[];d.id=this.id;d.cls=this.cssQuirks(this.cls);d.elementstyle=this.elementStyle;d.style=c;d.value=a;d.width=this.width-this.btnWidth-3;d.height=this.height;d.inputheight=this.height-4;d.buttonwidth=this.height;d.inputstyle=b;this.autoScroll&&(d.inputstyle=this.style+
";overflow:auto;");d.inputtype="number"==this.inputType?"text":this.inputType;a=this.tpl.render(d);$("#"+this.renderTo).append(a);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",this.radius+"px"));$delay(100,function(a){cls=a.buttonCls;a.btn=new idev.ui.widgetButton({parent:a,renderTo:a.id+"-button",width:a.height,height:a.height+2,icon:{src:"_arrow"},cls:a.cssQuirks(cls),
border:!1,events:{click:function(a){if(a.parent.visible)a.parent.list.hide();else{idev.hideWidget&&(idev.hideWidget.parent.visible=!1,idev.hideWidget.hide());var b=$("#"+a.parent.id).height(),c=$("#"+a.parent.id).offset(),d=c.left,b=c.top+b+1;a.parent.roundCorners&&!idev.isIE8()&&(d+=4);c=a.parent.list.getScrollPos();$("#"+a.parent.list.id).css("left",d);$("#"+a.parent.list.id).css("top",b);a.parent.list.show();a.parent.list.setScrollPos(c);idev.hideWidget=a.parent.list}a.parent.visible=a.parent.visible?
!1:!0}}});var b=[];b.entryheight=a.listEntryHeight;a.btn.render();var c=$("#"+a.id).height(),d=$("#"+a.id).offset(),k=d.left,c=d.top+c+1,d=a.roundCorners;idev.isIE8()&&(d=!1,a.dropWidth+=1);a.list=new idev.ui.widgetList({parent:a,renderTo:"container",x:k+(d?4:0),y:c,width:a.dropWidth,height:a.listHeight,listEntryHeight:a.listEntryHeight,hidden:!0,visible:!1,cls:"ui-combo-droplist",autoScroll:!0,autoSelect:!0,selectCls:a.selectCls,selectColors:a.selectCls,ds:a.ds,border:!0,tpl:a.listTpl,itemStyle:"border:0px;",
metaData:b,events:{click:function(a,b,c){var d=a.getStore().getAt(b).get(a.parent.valueField);a.parent.visible=!1;a.hide();a.parent.setValue(d);idev.hideWidget=null;a.parent.events.selected&&a.parent.events.selected(a.parent);a.parent.events.change&&b!=c&&a.parent.events.change(a.parent)},hover:function(a,b,c){b.parent.events.hover&&b.parent.events.hover(a,this,c.selected)}}});a.list.render();idev.internal.afterRender(a);a.events.click&&$("#"+a.id).click(idev.internal.onClick);a.events.dblclick&&
$("#"+a.id).dblclick(idev.internal.onDblClick);$("#"+a.id+"-input").blur(idev.internal.onLostFocus);$("#"+a.id+"-input").focus(idev.internal.onFocus);a.events.change&&$("#"+a.id).change(idev.internal.onChange);$("#"+a.id).keydown(function(b){var c=idev.get(a.id);if(!c.editable)return b.preventDefault(),!1;""!=c.watermark&&$("#"+c.id+"-input").val()==c.watermark&&($("#"+c.id+"-input").val(""),null==c.inpStyle.color?$("#"+c.id+"-input").css("color",""):$("#"+c.id+"-input").css(c.inpStyle))});$("#"+
a.id).keyup(function(b){var c=idev.get(a.id);if("combo"==c.wtype){if(""!=c.watermark&&""==$("#"+c.id+"-input").val()){var d=document.getElementById(c.id+"-input");$("#"+c.id+"-input").val(c.watermark);$("#"+c.id+"-input").css("color",c.watermarkColor);d.createTextRange?(d=d.createTextRange(),d.move("character",0),d.select()):d.selectionStart?(d.focus(),d.setSelectionRange(0,0)):d.focus()}if(13==b.keyCode&&c.events.onenter)return c.events.onenter(c),b.preventDefault(),!1}});$("#"+a.id).keypress(idev.internal.onKeypress);
a.setValue(a.value);a.rendered=!0},this)}},refresh:function(){if(this.visibleEntrys>this.ds.getCount()){var a=this.ds.getCount()||1;this.listHeight=(this.listEntryHeight+4)*a;$("#"+this.list.id).height(this.listHeight);$("#"+this.list.id).css("max-height",this.listHeight+"px");$get(this.list.id).doLayout()}else 1<this.ds.getCount()&&(this.listHeight=(this.listEntryHeight+4)*this.visibleEntrys,$("#"+this.list.id).height(this.listHeight),$("#"+this.list.id).css("max-height",this.listHeight+"px"),$("#"+
this.list.id+"-wrapper").height(this.listHeight),$("#"+this.list.id+"-wrapper").css("max-height",this.listHeight+"px"),$get(this.list.id).doLayout())},onshow:function(){this._super();if(idev.isIE8())this.btn.onshow()},ondestroy:function(){this.btn.destroy();this.list.destroy()},doLayout:function(){var a=$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-input").width(a-this.btnWidth-4);$("#"+this.id+"-input").height(b-4);this._super()}}),widgetCheckbox:baseWidget.extend({init:function(a){22>
a.width&&(a.width=22);22>a.height&&(a.height=22);this._super(a);this.wtype="checkbox";this.checked=null==a.checked?!1:a.checked;this.text=a.text||"";this.textStyle=a.textStyle||"";this.align=a.align||"left";this.resizer.handlers="n,s,w,e,";this.nvalue=null===a.nvalue?"":a.nvalue;this.lock=null===a.lock?!1:a.lock;this.resizer.resizeColor="#fff";this.tpl="right"==this.align?new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle}'>","<table width=100% style='{style}'>","<tr>","<td width='20px'>",
"<div id='{id}-input' class='ui-checkbox {cls}' style='width:20px;height:20px' >&nbsp;&nbsp;&nbsp;&nbsp;","</div>","</td>","<td id='{id}-text'>","<span style='{textStyle}'>{text}</span>","</td>","</tr>","</table>","</div>"):new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle}'>","<table width=100% style='{style}'>","<tr>",""==this.text?"":"<td id='{id}-text'><span style='{textStyle}'>{text}</span></td>","<td width='22px'>","<div id='{id}-input' style='width:20px;height:20px' class='ui-checkbox {cls}'>&nbsp;&nbsp;&nbsp;&nbsp;",
"</div>","</td>","</tr>","</table>","</div>");idev.internal.add(this)},lock:function(){this.lock=!0},unlock:function(){this.lock=!1},isChecked:function(){return $("#"+this.id+"-input").hasClass("ui-checkbox-on")},setValue:function(a){a==this.value?this.check(!0):this.check(!1)},getValue:function(){return this.isChecked()?this.value:this.nvalue},check:function(a){var b=$("#"+this.id+"-input").hasClass("ui-checkbox-on");a&&!b&&$("#"+this.id+"-input").toggleClass("ui-checkbox-on");!a&&b&&$("#"+this.id+
"-input").toggleClass("ui-checkbox-on")},render:function(){if(null!=this.renderTo){var a=[];a.id=this.id;a.cls=this.checked?"ui-checkbox-on":"";a.elementstyle=this.elementStyle;a.textStyle=this.textStyle;a.text=this.text;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);$("#"+this.id+"-input").click(function(){var a=idev.get(this.id.replace("-input",""));!a.resizer.isResizing()&&!a.lock&&($(this).toggleClass("ui-checkbox-on"),a.events.change&&
a.events.change(a))});this.rendered=!0}}}),widgetSwitch:baseWidget.extend({init:function(a){"undefined"==typeof a.width&&(a.width=94);"undefined"==typeof a.height&&(a.height=27);this._super(a);this.wtype="switch";this.on=null==a.on?!1:a.on;this.resizer.resizable=!1;this.nvalue=a.nvalue||"";this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle}'>","<div id='{id}-input' class='-ui-switch {cls}'>","<img id='{id}-img' src='"+_preferences.libpath+"/images/off.png' style='width:{width}px;height:{height}px'/>",
"</div>","</div>");idev.internal.add(this)},isOn:function(){return this.on},setOn:function(a){a?($("#"+this.id+"-img").attr("src",_preferences.libpath+"/images/on.png"),this.on=!0):($("#"+this.id+"-img").attr("src",_preferences.libpath+"/images/off.png"),this.on=!1)},getValue:function(){return this.isOn()?this.value:this.nvalue},render:function(){if(null!=this.renderTo){var a=[];a.id=this.id;a.width=this.width;a.height=this.height;a.elementstyle=this.elementStyle;a.style=this.style;a=this.tpl.render(a);
idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);this.on&&this.setOn(!0);$("#"+this.id+"-input").click(function(){var a=idev.get(this.id.replace("-input",""));a.resizer.isResizing()||a.setOn(!a.on)});this.events.change&&$("#"+this.id).click(idev.internal.onChange);this.rendered=!0}}}),widgetRadio:baseWidget.extend({init:function(a){this._super(a);this.wtype="radio";this.checked=null==a.checked?!1:a.checked;this.group=null==a.group?"":a.group;this.text=
a.text||"";this.textStyle=a.textStyle||"";this.align=a.align||"left";this.resizer.handlers="n,s,w,e,";this.tpl="right"==this.align?new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle}'>","<table width=100% style='{style}'>","<tr>","<td width='20px'>","<div id='{id}-input' style='width:20px;height:20;px' group='{group}' class='ui-radio-off {cls}'>&nbsp;&nbsp;&nbsp;&nbsp;","</div>","</td>","<td id='{id}-text'>","<span class='ui-radio-text' style='{textStyle}'>{text}</span>","</td>",
"</tr>","</table>","</div>"):new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle}'>","<table width=100% style='{style}'>","<tr>","<td id='{id}-text'>","<span class='ui-radio-text' style='{textStyle}'>{text}</span>","</td>","<td width='20px'>","<div id='{id}-input' style='width:20px;height:20;px' group='{group}' class='ui-radio-off {cls}'>&nbsp;&nbsp;&nbsp;&nbsp;","</div>","</td>","</tr>","</table>","</div>");idev.internal.add(this)},isChecked:function(){return $("#"+this.id+
"-input").hasClass("ui-radio-on")},getValue:function(){for(var a=0;a<idev.widgets.length;a++){var b=idev.widgets[a];if("radio"==b.wtype&&b.group==this.group&&b.isChecked())return b.value}},check:function(a){var b=$("#"+this.id+"-input").hasClass("ui-radio-on");a&&!b&&$("#"+this.id+"-input").toggleClass("ui-radio-on");!a&&b&&$("#"+this.id+"-input").toggleClass("ui-radio-on")},handleRadio:function(){if(!this.isChecked()){this.check(!0);for(var a=0;a<idev.widgets.length;a++){var b=idev.widgets[a];b.id!=
this.id&&"radio"==b.wtype&&b.group==this.group&&b.check(!1)}this.events.click&&this.events.click(this)}},render:function(){if(null!=this.renderTo){var a=[];a.id=this.id;a.cls=this.checked?"ui-radio-on":"";a.elementstyle=this.elementStyle;a.style=this.style;a.textStyle=this.textStyle;a.text=this.text;a.group=this.group;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);$("#"+this.id).click(function(){idev.get(this.id).handleRadio()});
this.rendered=!0}}}),widgetSVGButton:baseWidget.extend({init:function(a){_preferences.useCSS3||(a.hideType="visibility");a.height=null==a.height?38:a.height;this._super(a);var b="",c="",d="#222",f="black",g=12,i="normal",m=6,k,j=!1;this.wtype="svgbutton";this.width=null==this.width?80:this.width;this.icon=null==a.icon?"":a.icon;this.iconAlign=null==a.iconAlign?"left":a.iconAlign.toLowerCase();this.text=null==this.config.text?"":this.config.text;this.color=null==this.config.color?"":this.config.color;
this.transparent=null==this.config.transparent?!1:this.config.transparent;""==this.color&&!this.transparent&&(_preferences?(_preferences.button.startcolor&&(b=_preferences.button.startcolor),_preferences.button.endcolor&&(c=_preferences.button.endcolor),_preferences.button.fontcolor&&(d=_preferences.button.fontcolor),_preferences.button.iconcolor&&(f=_preferences.button.iconcolor),_preferences.button.fontsize&&(g=_preferences.button.fontsize),_preferences.button.fontweight&&(i=_preferences.button.fontweight),
_preferences.button.radius&&(m=_preferences.button.radius),_preferences.button.bordercolor&&(k=_preferences.button.bordercolor),_preferences.button.border&&(j=_preferences.button.border)):this.color="blue");_preferences.useCSS3&&(d="inherit");null==this.width&&null!=this.height&&(this.width=this.height);null==this.height&&null!=this.width&&(this.height=this.width);this.isshown=!1;this.radius=null==this.config.radius?m:this.config.radius;this.startColor=null==this.config.startColor?b:this.config.startColor;
this.endColor=null==this.config.endColor?c:this.config.endColor;this.fontColor=null==this.config.fontColor?d:a.fontColor;this.fontDisableColor=null==this.config.fontDisableColor?d:a.fontDisableColor;this.fontSize=null==this.config.fontSize?g:this.config.fontSize;this.fontWeight=null==this.config.fontWeight?i:this.config.fontWeight;this.fontFamily=null==this.config.fontFamily?"Arial":this.config.fontFamily;this.iconColor=null==this.config.iconColor?f:this.config.iconColor;this.iconRotation=null==this.config.iconRotation?
0:this.config.iconRotation;this.iconScale=null==this.config.iconScale?0.6:this.config.iconScale;this.toggle=null==this.config.toggle?!1:this.config.toggle;this.down=null==this.config.down?!1:this.config.down;this.ix=this.config.ix;this.iy=this.config.iy;this.svg=!0==this.config.svg?!0:!1;""!=this.color&&(idev.colors.gradientColors(this),null!=this.config.fontColor&&(this.fontColor=this.config.fontColor),null!=this.config.fontSize&&(this.fontSize=this.config.fontSize),null!=this.config.fontWeight&&
(this.fontSize=this.config.fontWeight));k||(k=b);this.borderColor=this.config.borderColor||k;this.path=this.config.path;this.shape=null==this.config.shape?null:this.config.shape.toLowerCase();this.gradient=null==a.gradient?null:this.config.gradient.toLowerCase();this.rx=null==this.config.rx?0.5:this.config.rx;this.ry=null==this.config.ry?0.5:this.config.ry;this.textXOffset=null==this.config.textXOffset?0:this.config.textXOffset;this.textYOffset=null==this.config.textYOffset?0:this.config.textYOffset;
this.border=null==this.config.border?j:this.config.border;this.image=this.config.image;this.imageFill=this.config.imageFill;this.title=this.config.title||"";this.startTColor=null==this.config.startTColor?this.endColor:this.config.startTColor;this.endTColor=null==this.config.endTColor?this.startColor:this.config.endTColor;null!=this.image&&(null==this.image.x&&(this.image.x=0),null==this.image.y&&(this.image.y=0),null==this.image.width&&(this.image.width=20),null==this.image.height&&(this.image.height=
20));this.icon=this.icon.replace("ui-icon-","");this.icon=this.icon.replace("-white","");this.icon=this.icon.replace("-black","");this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element {buttoncls}' style='{elementstyle}{style}' title='{title}'></div>");""!=this.startColor&&""!=this.endColor&&(this.color="");idev.internal.add(this)},drawButton:function(){null==this.ix&&(this.ix=0);null==this.iy&&(this.iy=0);this.paper=Raphael(this.id,this.width,this.height);this.paper.safari();if(this.transparent)this.border&&
(this.object=this.paper.rect(1.5,1.5,this.width-2,this.height-2,this.radius),this.object.attr({stroke:this.borderColor,"stroke-width":"0.25",cursor:"pointer"}));else{var a=this.border?3:2;this.object=null!=this.path?this.paper.path(this.path):"circle"==this.shape?this.paper.circle(this.width/2,this.height/2,this.radius-2):"ellipse"==this.shape?this.paper.ellipse(this.width/2,this.height/2,this.width/2-2,this.height/2-2):this.paper.rect(1.5,1.5,this.width-a,this.height-a,this.radius);this.border?this.object.attr({stroke:this.borderColor,
"stroke-width":"0.3",cursor:"pointer"}):this.object.attr({"stroke-width":"0.05",cursor:"pointer"});null!=this.imageFill?this.object.attr({fill:"url("+this.imageFill+")"}):"radial"==this.gradient?this.object.attr({fill:"r("+this.rx+","+this.ry+")"+this.endColor.toLowerCase()+"-"+this.startColor.toLowerCase()}):this.object.attr({fill:"90-"+this.startColor.toLowerCase()+"-"+this.endColor.toLowerCase()})}""!=this.text&&(this.transparent&&null!=this.image?(4>this.textXOffset&&(this.textXOffset=4),this.tx=
this.paper.text(this.image.width+this.textXOffset,this.height/2+this.textYOffset,this.text).attr({"text-anchor":"start"})):this.tx=this.paper.text(this.width/2+this.textXOffset,this.height/2+this.textYOffset,this.text),this.enabled?this.tx.attr({fill:this.fontColor,stoke:this.fontColor,"stroke-width":"0.1","font-size":this.fontSize,"font-weight":this.fontWeight,cursor:"pointer"}):this.tx.attr({fill:"#888",stoke:"#222","stroke-width":"0.1","font-size":this.fontSize,"font-weight":this.fontWeight,cursor:"pointer"}));
null!=this.image&&null!=this.image.src&&(this.graphic=this.paper.image(this.image.src,this.image.x,this.image.y,this.image.width,this.image.height),"function"==typeof this.events.click&&this.graphic.attr("cursor","pointer"));a="";""!=this.icon&&(a=eval("icon."+this.icon));if(""!=a)if(this.ic=this.paper.path(a).attr({fill:this.iconColor,stroke:"none"}),"center"==this.iconAlign){this.ic.scale(this.iconScale,this.iconScale);bbox=this.ic.getBBox();var a=this.width/2-(bbox.x+bbox.width/2),b=this.height/
2-(bbox.y+bbox.height/2),a=idev.isIE8()?a*(2.8-this.iconScale):a*(2.05-this.iconScale),b=b*(2-this.iconScale);this.ic.translate(a+this.ix,b+this.iy);0!=this.iconRotation&&this.ic.rotate(this.iconRotation)}else this.ic.scale(this.iconScale,this.iconScale),"left"==this.iconAlign?this.ic.translate(-4+this.ix,-4+this.iy):this.ic.translate(this.width+8+this.ix,-4+this.iy),0!=this.iconRotation&&this.ic.rotate(this.iconRotation,16,18);this.down&&this.toggleButton(!0);this.hidden&&this.hide();idev.isIE8()||
(this.isshown=!0)},render:function(){if(null!=this.renderTo){var a="",a="",b=this.btnBodyCls;if((-1!=idev.agent.indexOf("android 2.")||_preferences.useCSS3||null==Raphael)&&!this.svg)a="ui-button ",""==b&&(b="ui-button-body"),this.color&&!this.transparent&&(b+="-"+this.color.toLowerCase()),this.enabled||(b+=" "+this.btnDisabledCls);var c=[];c.id=this.id;c.width=this.width;c.bodywidth=this.width;c.height=this.height;c.bodyheight=this.height;c.elementstyle=this.elementStyle;c.title=this.title;c.style=
this.style;c.buttoncls=this.cssQuirks(a);c.buttonbodycls=this.transparent?"":this.cssQuirks(b);c.buttonBodyStyle=this.buttonBodyStyle;a=this.tpl.render(c);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.utils.delay(100,function(a){a.drawButton();idev.internal.afterRender(a)},this);"function"==typeof this.events.click&&$("#"+this.id).click(function(a){var b=idev.get(this.id);if(b.toggle){var c=!0;b.events.canToggle&&(c=b.events.canToggle(b));c&&(b.toggleButton(b.down?!1:!0),idev.internal.onClick.call(this,
a))}else idev.internal.onClick.call(this,a)});this.rendered=!0}},setBorderColor:function(a,b){if(!_preferences.useCSS3||this.svg)this.object.attr({stroke:a,"stroke-width":b||0.3})},textColor:function(a){(!_preferences.useCSS3||this.svg)&&this.tx.attr({fill:a,stoke:a})},setText:function(a){this.text=a;_preferences.useCSS3?$("#"+this.id+"-text").html(a):this.tx.attr({text:a})},getText:function(){return this.text},isDown:function(){return this.down},enableButton:function(a){(this.enabled=a)?this.textColor(this.fontColor):
this.textColor(this.fontDisableColor)},toggleButton:function(a){if(this.toggle&&((this.down=a)?this.object.attr({fill:"90-"+this.startTColor.toLowerCase()+"-"+this.endTColor.toLowerCase()}):this.object.attr({fill:"90-"+this.startColor.toLowerCase()+"-"+this.endColor.toLowerCase()}),"function"==typeof this.events.ontoggle))this.events.ontoggle(this,a)},reColor:function(a,b){this.object.attr({fill:"90-"+a.toLowerCase()+"-"+b.toLowerCase()})},onshow:function(){this._super();idev.isIE8()&&!this.isshown&&
(this.paper&&(this.paper.remove(),this.drawButton()),this.isshown=!0)},onhide:function(){idev.isIE8()&&this.paper&&this.paper.hide()},ondestroy:function(){this.paper&&this.paper.remove()},doLayout:function(){this._super();$("#"+this.id).width();$("#"+this.id).height()}}),widgetButton:baseWidget.extend({init:function(a){a.cls=a.cls||"ui-button";this._super(a);this.wtype="button";this.textCls=this.config.textCls||"ui-button-text";this.textStyle=this.config.textStyle||"";this.icon=this.config.icon||
{cls:"",src:null,align:"left",color:"black"};"string"==typeof this.icon&&(this.icon={cls:"",src:this.icon,align:"left",color:"black"});this.toggle=this.config.toggle||!1;this.down=this.config.down||!1;this.toggleCls=this.config.toggleCls||"ui-button-toggle";this.enabled=null==this.config.enabled?!0:this.config.enabled;this.disabledCls=this.config.disabledCls||"ui-button-disabled";this.transparent=null==this.config.transparent?!1:this.config.transparent;this.tpl=new idev.wTemplate("<button type='button' id='{id}' class='ui-element {cls} {togglecls}' style='{elementstyle}{style}'>",
"{image1}<span class='{textcls}' id='{id}-text' style='{textstyle}'>{text}</span>{image2}","</button>");idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=[],b="";if(null!=this.icon.src){this.icon.cls=this.icon.cls||"";this.icon.color=this.icon.color||"black";this.icon.style=this.icon.style||"";"_arrow"==this.icon.src?b="<img id='"+this.id+"-icon' class='"+this.icon.cls+"' src='"+_preferences.libpath+"images/arrow.png' style='":"_calendar"==this.icon.src?b="<img id='"+this.id+
"-icon' class='"+this.icon.cls+"' src='"+_preferences.libpath+"images/calendar.png' style='":-1==this.icon.src.indexOf(".")?(b=this.icon.color.toLowerCase(),b="white"==b||"#fff"==b||"#ffffff"==b?"<img id='"+this.id+"-icon' class='"+this.icon.cls+"' src='"+_preferences.libpath+"images/icons/white/"+this.icon.src+".png' style='":"<img id='"+this.id+"-icon' class='"+this.icon.cls+"' src='"+_preferences.libpath+"images/icons/black/"+this.icon.src+".png' style='"):b="<img id='"+this.id+"-icon' class='"+
this.icon.cls+"' src='"+this.icon.src+"' style='";if(null!=this.icon.x||null!=this.icon.right||null!=this.icon.y||null!=this.icon.bottom)b+="position:absolute;";null!=this.icon.x&&(b+="left:"+this.icon.x+"px;");null!=this.icon.right&&(b+="right:"+this.icon.right+"px;");null!=this.icon.y&&(b+="top:"+this.icon.y+"px;");null!=this.icon.bottom&&(b+="bottom:"+this.icon.bottom+"px;");null!=this.icon.width&&(b+="width:"+this.icon.width+"px;");null!=this.icon.height&&(b+="height:"+this.icon.height+"px;");
b+=this.icon.style+"'/>"}a.id=this.id;a.width=this.width;a.height=this.height;a.elementstyle=this.elementStyle;a.style=this.style;a.cls=this.cssQuirks(this.transparent?"ui-button-transparent":this.cls);a.togglecls=!this.toggle?"":this.down?this.toggleCls:"";"right"==this.icon.align?(a.image1="",a.image2=b):(a.image1=b,a.image2="");a.text=this.text;a.textcls=this.textCls;a.textstyle=this.textStyle;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);
"function"==typeof this.events.click&&$("#"+this.id).click(function(a){var b=idev.get(this.id);if(b.enabled)if(b.toggle&&!b.transparent){var f=!0;b.events.canToggle&&(f=b.events.canToggle(b));f&&(b.toggleButton(b.down?!1:!0),idev.internal.onClick.call(this,a))}else idev.internal.onClick.call(this,a)});this.enabled||this.enable(!1);this.rendered=!0}},getText:function(){return this.text},setText:function(a){this.text=a;$("#"+this.id+"-text").html(a)},enableButton:function(a){(this.enabled=a)?$("#"+
this.id+"-text").removeClass(this.disabledCls):$("#"+this.id+"-text").addClass(this.disabledCls)},isEnabled:function(){return this.enabled},isDown:function(){return this.down},toggleButton:function(a){if(this.toggle&&((this.down=a)?$("#"+this.id).addClass(this.toggleCls):$("#"+this.id).removeClass(this.toggleCls),"function"==typeof this.events.ontoggle))this.events.ontoggle(this,a)}}),widgetLabel:baseWidget.extend({init:function(a){a.height=a.height||30;this._super(a);this.wtype="label";this.text=
null==a.text?"":a.text;this.title=null==a.title?!1:a.title;""==this.text&&(this.text="");!0==this.title&&$("#"+this.id).attr("title",this.text);this.tpl=new idev.wTemplate("<div id='{id}' title='' class='ui-element ui-label {cls}' style='{elementstyle};{style}'>","{text}","</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=this.style,b=[];if(this.events.click||this.events.dblclick)a+="cursor:pointer";b.id=this.id;b.cls=this.cssQuirks(this.cls);b.elementstyle=this.elementStyle;
b.style=a;b.text=this.text;a=this.tpl.render(b);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.events.dblclick&&$("#"+this.id).dblclick(idev.internal.onDblClick);this.rendered=!0}},setText:function(a){this.text=a.replace(/^\s+|\s+$/g,"");$("#"+this.id).empty();$("#"+this.id).html(this.text);!0==this.title&&$("#"+this.id).attr("title",this.text)},getText:function(){return this.text},
setValue:function(a){this.setText(a)},getValue:function(){return this.getText()}}),widgetImage:baseWidget.extend({init:function(a){this._super(a);this.wtype="image";this.src=a.src;this.title=a.title||"";this.html=a.html||"";this.prehtml=a.prehtml||"";this.imageWidth=null==a.imageWidth?this.width:a.imageWidth;this.imageHeight=null==a.imageHeight?this.height:a.imageHeight;this.tpl=new idev.wTemplate("<div class='ui-element' id='{id}' style='{style}'>","{prehtml}<img id='{id}-image' class='{cls}' src='{src}' style='width:{width}px;height:{height}px;' title='{title}'/>{html}",
"</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo&&""!=this.src&&"undefined"!=this.src&&null!=this.src){var a="",a=this.style+this.elementStyle;this.events.click&&(a+="cursor:pointer;");var b=[];b.id=this.id;b.cls=this.cssQuirks(this.cls);b.width=null==this.imageWidth?"":this.imageWidth;b.height=null==this.imageHeight?"":this.imageHeight;b.src="BLANK"==this.src.toUpperCase()||""==this.src?_preferences.blankimage:this.src;b.style=a;b.title=this.title;b.prehtml=this.prehtml;
b.html=this.html;a=this.tpl.render(b);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.events.dblclick&&$("#"+this.id).dblclick(idev.internal.onDblClick);this.rendered=!0}},setSrc:function(a,b,c){b=b||"";c=c||"";if(""==b&&""==c)$("#"+this.id+"-image").attr({src:"BLANK"==a.toUpperCase()||""==a?_preferences.blankimage:a});else{var d=new idev.wTemplate("{prehtml}<img id='{id}-image' class='{cls}' src='{src}' style='width:{width}px;height:{height}px;' title='{title}'/>{html}"),
f=[];f.id=this.id;f.cls=this.cssQuirks(this.cls);f.width=b;f.height=c;f.src="BLANK"==a.toUpperCase()||""==a?_preferences.blankimage:a;f.title=this.title;f.prehtml=this.prehtml;f.html=this.html;a=d.render(f);$("#"+this.id).html(a)}},doLayout:function(){this._super();var a=$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-image").width(a);$("#"+this.id+"-image").height(b)}}),widgetChart:baseWidget.extend({init:function(a){this._super(a);this.wtype="chart";this.attr=a.attr;this.series=
a.series;this.options=a.options;this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle}{style};padding:10px;'>","<div id='{id}-chart' style='width:{width}px;height:{height}px;'></div>","</div>");idev.internal.add(this)},setSeries:function(a){this.series=a;idev.utils.delay(500,function(b){b.chart.setData(a);b.chart.draw()},this)},render:function(){if(null!=this.renderTo&&null!=this.series&&null!=this.options){var a="",a=[];a.id=this.id;a.width=this.width;a.height=this.height;
a.elementstyle=this.elementStyle;a.style="font-size: 16px;font-family: sans-serif;"+this.style;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.utils.delay(500,function(a){a.chart=$.plot($("#"+a.id+"-chart"),a.series,a.options)},this);idev.internal.afterRender(this);this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.events.dblclick&&$("#"+this.id).dblclick(idev.internal.onDblClick);this.rendered=!0}},doLayout:function(){this._super();var a=
$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-chart").width(a);$("#"+this.id+"-chart").height(b);this.chart.resize();this.chart.setupGrid();this.chart.draw()}}),widgetSlider:baseWidget.extend({init:function(a){this._super(a);this.wtype="slider";this.height=null==a.height?20:a.height;this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle};height:{height}px;'>","<div id='{id}-bar' class='ui-sliderbar ie9gradient' style='position:absolute;left:0px;top:{top}px;width:{width}px;height:{barheight}px;'>",
"</div>","<div id='{id}-slider' class='ui-slider ie9gradient' style='position:absolute;left:0px;top:0px;width:{sliderwidth}px;height:{sliderheight}px;'>","</div>","</div>");this.resizer.handlers="n,s,w,e,";idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=[];a.id=this.id;a.width=this.width-2;a.height=this.height;a.barheight=this.height/2;a.sliderheight=this.height-2;a.sliderwidth=this.height/2;a.top=this.height/4;a.elementstyle=this.elementStyle;a=this.tpl.render(a);idev.internal.beforeRender(this);
$("#"+this.renderTo).append(a);idev.internal.afterRender(this);this.events.click&&$("#"+this.id).click(idev.internal.onClick);$("#"+this.id).mousedown(function(a){var c=parseInt($("#"+this.id).css("width").replace("px",""));-1!=a.target.id.indexOf("-slider")&&(idev._sliderWidget=idev.get(this.id),mpos=idev.utils.mousePosition(a),idev._slider=a.target,idev._sliderpos=parseInt(mpos.x),idev._sliding=!0,idev._sliderstart=$(a.target).css("left").replace("px",""),idev._sliderwidth=c-(parseInt($(a.target).css("width").replace("px",
""))+2),a.preventDefault())});$("#"+this.id).mousemove(function(a){if(idev._sliding){mpos=idev.utils.mousePosition(a);var c=parseInt(mpos.x)-idev._sliderpos,c=parseInt(idev._sliderstart)+parseInt(c);0<=c&&c<idev._sliderwidth&&$(idev._slider).css("left",c+"px");a.preventDefault();if(idev._sliderWidget.events.onchange)idev._sliderWidget.events.onchange(idev._sliderWidget,idev._sliderWidget.getValue())}});$("#"+this.id).mouseup(function(){idev._sliding=!1});idev.isTouch()&&(a=document.getElementById(this.id),
a.addEventListener("touchstart",function(a){var c=parseInt($("#"+this.id).css("width").replace("px",""));if(-1!=a.target.id.indexOf("-slider")){var d=a.touches[0];idev._sliderWidget=idev.get(this.id);idev._slider=a.target;idev._sliderpos=d.pageX;idev._sliding=!0;idev._sliderstart=$(a.target).css("left").replace("px","");idev._sliderwidth=c-parseInt($(a.target).css("width").replace("px",""))}}),a.addEventListener("touchmove",function(a){if(idev._sliding){var c=a.touches[0].pageX-idev._sliderpos,c=
parseInt(idev._sliderstart)+parseInt(c);0<=c&&c<idev._sliderwidth&&$(idev._slider).css("left",c+"px");a.preventDefault();if(idev._sliderWidget.events.onchange)idev._sliderWidget.events.onchange(idev._sliderWidget,idev._sliderWidget.getValue())}}),a.addEventListener("touchend",function(){idev._sliding=!1}));this.rendered=!0;this.setValue(this.value)}},getValue:function(){var a=parseInt($("#"+this.id+"-slider").css("left").replace("px","")),b=$("#"+this.id).width(),c=$("#"+this.id).height();return idev.utils.round(a/
(b-c/2-2),2)},setValue:function(a){if(!(0>a||1<a)){parseInt($("#"+this.id+"-slider").css("left").replace("px",""));var b=$("#"+this.id).width(),c=$("#"+this.id).height();$("#"+this.id+"-slider").css("left",(b-c/2-2)*a);if(this.events.onchange)this.events.onchange(this,a)}},doLayout:function(){this._super();var a=$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-bar").width(a-2);$("#"+this.id+"-bar").css("top",b/4);$("#"+this.id+"-bar").height(b/2);$("#"+this.id+"-slider").width(b/2);
$("#"+this.id+"-slider").height(b-2);this.setValue(this.value)},beforeResize:function(){this.value=this.getValue()}}),widgetProgress:baseWidget.extend({init:function(a){this._super(a);this.wtype="progressbar";this.height=null==a.height?30:a.height;this.roundCorners=null==a.roundCorners?!1:a.roundCorners;this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle};height:{height}px;'>","<div id='{id}-bar' class='ui-progressbar ie9gradient' style='position:absolute;left:0px;top:0px;width:{width}px;height:{pheight}px;'>",
"</div>","<div id='{id}-progress' class='ui-progress ie9gradient' style='position:absolute;left:1px;top:1px;width:{progresswidth}px;height:{progressheight}px;'>","</div>","</div>");this.resizer.handlers="n,s,w,e,";idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=[];a.id=this.id;a.width=this.width-2;a.height=this.height;a.pheight=this.height-2;a.progressheight=this.height-2;a.progresswidth=0;a.elementstyle=this.elementStyle;a=this.tpl.render(a);idev.internal.beforeRender(this);
$("#"+this.renderTo).append(a);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",this.radius+"px"),$("#"+this.id+"-bar").css("border-radius",this.radius+"px"),$("#"+this.id+"-bar").css("-moz-border-radius",this.radius+"px"),$("#"+this.id+"-bar").css("-webkit-border-radius",this.radius+"px"),$("#"+this.id+"-progress").css("border-radius",this.radius+"px"),$("#"+this.id+"-progress").css("-moz-border-radius",
this.radius+"px"),$("#"+this.id+"-progress").css("-webkit-border-radius",this.radius+"px"));idev.internal.afterRender(this);this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.rendered=!0;this.setValue(this.value)}},getValue:function(){var a=parseInt($("#"+this.id+"-progress").css("width").replace("px",""));return idev.utils.round(a/(this.width-this.height/2-2),2)},setValue:function(a){if(!(0>a||1<a)){var b=$("#"+this.id).width();parseInt($("#"+this.id+"-progress").css("width").replace("px",
""));$("#"+this.id+"-progress").css("width",(b-2)*a)}},doLayout:function(){this._super();var a=$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-bar").width(a);$("#"+this.id+"-bar").height(b);$("#"+this.id+"-progress").height(b);this.setValue(this.value)},beforeResize:function(){this.value=this.getValue()}}),widgetIFrame:baseWidget.extend({init:function(a){this._super(a);this.wtype="iframe";this.src=this.config.src||"";this.noResize=null==this.config.noResize?!1:a.noResize;this.tpl=
new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle};{style};'>","<iframe id='{id}-frame' src='{src}' frameborder=0 style='height:{height}px;width:{width}px;overflow:auto;'>","</iframe>","</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=[],b=this;a.id=this.id;a.width=this.width;a.height=this.height;a.src=this.src;a.elementstyle=this.elementStyle;a.style=this.style;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);
idev.internal.afterRender(this);this.rendered=!0;$("#"+this.id+"-frame").load(function(){b.events.loaded&&b.events.loaded(b)})}},getSrc:function(){return this.src},setSrc:function(a){$("#"+this.id+"-frame").attr("src",a)},getFrame:function(){try{return window.frames[this.id+"-frame"]}catch(a){alert(a.message)}return null},getDocument:function(){try{return window.frames[this.id+"-frame"].contentDocument}catch(a){alert(a.message)}return null},getWindow:function(){try{return window.frames[this.id+"-frame"].contentWindow}catch(a){}return null},
doLayout:function(){this._super();var a=$("#"+this.id).width(),b=$("#"+this.id).height();this.noResize||($("#"+this.id+"-frame").width(a),$("#"+this.id+"-frame").height(b))}}),widgetObject:baseWidget.extend({init:function(a){this._super(a);this.wtype="object";this.src=a.src||"";this.type=a.type||"text/html";this.noResize=null==a.noResize?!1:a.noResize;this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle};{style};'>","<object id='{id}-object' type='{type}' data='{src}' style='height:{height}px;width:{width}px;overflow:auto;'></object>",
"</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=[],b=this;a.id=this.id;a.width=this.width;a.height=this.height;a.src=this.src;a.type=this.type;a.elementstyle=this.elementStyle;a.style=this.style;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);this.rendered=!0;$("#"+this.id+"-object").ready(function(){$delay(200,function(a){a.events.loaded&&a.events.loaded(a)},b)})}},getSrc:function(){return this.src},
setSrc:function(a){$("#"+this.id+"-object").attr("data",a)},doLayout:function(){this._super();var a=$("#"+this.id).width(),b=$("#"+this.id).height();this.noResize||($("#"+this.id+"-object").width(a),$("#"+this.id+"-object").height(b))}}),widgetGrid:baseWidget.extend({init:function(a){this._super(a);this.wtype="grid";this.ds=a.ds;this.cm=a.cm;this.headerHeight=26;this.offset=null==a.offset?0:a.offset;this.limit=a.limit||65535;this.rowHeight=null==a.rowHeight?25:a.rowHeight;this.selectedRow=-1;this.dsFilter=
a.dsFilter;this.editCol=null;this.tbar=this.config.tbar;this.tbarHeight=this.config.tbarHeight||34;this.tbarCls=this.config.tbarCls||"";this.tbarStyle=this.config.tbarStyle||"";this.tbarConfig=this.config.tbarConfig||{};this.tbCreated=!1;this.bbar=this.config.bbar;this.bbarHeight=this.config.bbarHeight||34;this.bbarCls=this.config.bbarCls||"";this.bbarStyle=this.config.bbarStyle||"";this.bbarConfig=this.config.bbarConfig||{};this.bbCreated=!1;this.showHeader=null==a.showHeader?!0:a.showHeader;this.editClicks=
a.editClicks||1;this.showHeader||(this.headerHeight=0);null!=this.tbar?this.tbar instanceof baseWidget?this.tbCreated=!1:(null==this.tbarConfig.cls&&(this.tbarConfig.cls=this.tbarCls),null==this.tbarConfig.height&&(this.tbarConfig.height=this.tbarHeight),this.tbarConfig.width=this.width,a=new idev.ui.widgetToolbar(this.tbarConfig),a.widgets=this.tbar,this.tbar=a,this.tbCreated=!0):this.tbarHeight=0;null!=this.bbar?this.bbar instanceof baseWidget?this.bbCreated=!1:(null==this.bbarConfig.cls&&(this.bbarConfig.cls=
this.bbarCls),null==this.bbarConfig.height&&(this.bbarConfig.height=this.bbarHeight),this.bbarConfig.width=this.width,a=new idev.ui.widgetStatusbar(this.bbarConfig),a.widgets=this.bbar,this.bbar=a,this.bbCreated=!0):this.bbarHeight=0;var b=a="";this.tbar&&(a="<div id='{id}-tbar' class='ui-panel-tbar {tbarcls}' style='max-width:{tbarwidth}px;width:{tbarwidth}px;height:{tbarheight}px;{tbarstyle};'></div>",this.roundCorners&&null==this.title&&(this.tbarStyle+=";border-top-left-radius:"+(this.radius-
2)+"px;",this.tbarStyle+="border-top-right-radius:"+(this.radius-2)+"px;",this.tbarStyle+="-webkit-border-top-left-radius:"+(this.radius-2)+"px;",this.tbarStyle+="-webkit-border-top-right-radius:"+(this.radius-2)+"px;",this.tbarStyle+="-moz-border-top-left-radius:"+(this.radius-2)+"px;",this.tbarStyle+="-moz-border-top-right-radius:"+(this.radius-2)+"px;"));this.bbar&&(b="<div id='{id}-bbar' class='ui-panel-bbar {bbarcls}' style='max-width:{bbarwidth}px;width:{bbarwidth}px;height:{bbarheight}px;{bbarstyle};'></div>",
this.roundCorners&&(this.bbarStyle+=";border-bottom-left-radius:"+(this.radius-2)+"px;",this.bbarStyle+="border-bottom-right-radius:"+(this.radius-2)+"px;",this.bbarStyle+="-webkit-border-bottom-left-radius:"+(this.radius-2)+"px;",this.bbarStyle+="-webkit-border-bottom-right-radius:"+(this.radius-2)+"px;",this.bbarStyle+="-moz-border-bottom-left-radius:"+(this.radius-2)+"px;",this.bbarStyle+="-moz-border-bottom-right-radius:"+(this.radius-2)+"px;"));this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element ui-grid' style='{elementstyle}{style}'>",
a,"<div id='{id}-body' style='height:{bodyheight}px;'>","</div>",b,"</div>");idev.internal.add(this);null!=this.ds&&this.ds.bind(this)},build:function(){for(var a="",b=this.totalwidth=0;b<this.cm.getCount();b++)this.totalwidth+=this.cm.getAt(b).width;if(this.showHeader){a="<table  id='"+this.id+"-grid-header' cellpadding=0 cellspacing=0 width='"+(this.totalwidth+20)+"px'>";a+="<tr>";for(b=0;b<this.cm.getCount();b++){var c=this.cm.getAt(b),d=c.width,f=c.header,g=this.id+"-header-"+b;c.headerRenderer&&
(c.parent=this,f=c.headerRenderer.call(c,b));0==b?a+="<td id='"+g+"' width="+d+" height="+this.headerHeight+" class='ui-grid-header'><div style='float:left;padding-top:4px;width:"+(d-1)+"px;'><center>"+f+"</center></div></td>":(b==this.cm.getCount()-1&&(d+=25),a+="<td id='"+g+"' width="+d+" height="+this.headerHeight+" class='ui-grid-header'><div class='ui-grid-separator' style='float:left;width:1px;height:"+this.headerHeight+"px;'></div><div style='float:none;padding-top:4px;width:"+c.width+"px;'><center>"+
f+"</center></div></td>")}this.htmlHeader=a+="</tr></table>"}else this.htmlHeader="";a="<table id='"+this.id+"-grid' cellpadding=0 cellspacing=0 class='ui-grid-data' width='"+(this.totalwidth+0)+"px' style:'table-layout:fixed;' >";d=0;for(f=this.offset;f<this.ds.getCount()&&f<this.offset+this.limit;f++)if(g=this.ds.getAt(f),b=!0,this.dsFilter&&(b=this.dsFilter.call(this,g)),b){a+="<tr height='"+this.rowHeight+"'>";for(b=0;b<this.cm.getCount();b++){var c=this.cm.getAt(b),i=[],m="";0==b&&(m+="border-left:none;");
i.value=null!=c.renderer?c.renderer(g.get(c.field),g,d,b,c):g.get(c.field);null!=c.style&&(m+=c.style);i.id=this.id;i.style=m+(c.style||"");f%2&&(i.cls="ui-grid-cell-alt");c.noselect&&(i.cls=null);i.row=f;i.col=b;i.width=c.width-5;i.height=this.rowHeight;i=c.render(i,g,f,b);a+="<td id='"+this.id+"_"+f+"_"+b+"' style='width:"+c.width+"px;max-width:"+c.width+"px;'>"+i+"</td>"}a+="</tr>";d++}this.htmlData=a+="</table>"},render:function(){if(null!=this.renderTo&&null!=this.ds&&null!=this.cm){this.border&&
(this.style+="border:"+this.borderStyle);this.bodyheight=this.height;this.tbar&&(this.bodyheight-=parseInt(this.tbarHeight));this.bbar&&(this.bodyheight-=parseInt(this.bbarHeight));var a=[];a.id=this.id;a.cls=this.cssQuirks(this.cls);a.width=this.width;a.height=this.bodyheight-this.headerHeight-this.tbarHeight-this.bbarHeight;a.bodyheight=this.bodyheight;a.tbarheight=this.tbarHeight;a.tbarcls=this.cssQuirks(this.tbarCls,!0);a.tbarstyle=this.tbarStyle;a.bbarheight=this.bbarHeight;a.bbarcls=this.cssQuirks(this.bbarCls,
!0);a.bbarstyle=this.bbarStyle;a.elementstyle=this.elementStyle;a.style=this.style;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);this.tbar&&(this.tbar.page=this.page,this.tbar.parent=this,this.tbar.rowHeight=this.tbarHeight-2,this.tbar.renderTo=this.id+"-tbar",this.tbar.render());this.bbar&&(this.bbar.page=this.page,this.bbar.parent=this,this.bbar.rowHeight=this.bbarHeight-2,this.bbar.renderTo=this.id+"-bbar",this.bbar.render());idev.utils.delay(100,function(a){a.refresh(!0)},
this);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",this.radius+"px"),$("#"+this.id+"-body").css("border-radius",this.radius+"px"),$("#"+this.id+"-body").css("-moz-border-radius",this.radius+"px"),$("#"+this.id+"-body").css("-webkit-border-radius",this.radius+"px"),a=this.radius-1,this.tbar?($("#"+this.id+"-tbar").css("-moz-border-radius-topleft",a+"px"),$("#"+this.id+"-tbar").css("-moz-border-radius-topright",
a+"px"),$("#"+this.id+"-tbar").css("-webkit-border-radius-topleft",a+"px"),$("#"+this.id+"-tbar").css("-webkit-border-radius-topright",a+"px")):($("#"+this.id+"-header").css("-moz-border-radius-topleft",a+"px"),$("#"+this.id+"-header").css("-moz-border-radius-topright",a+"px"),$("#"+this.id+"-header").css("-webkit-border-radius-topleft",a+"px"),$("#"+this.id+"-header").css("-webkit-border-radius-topright",a+"px")),this.bbar&&($("#"+this.id+"-bbar").css("-moz-border-radius-bottomleft",a+"px"),$("#"+
this.id+"-bbar").css("-moz-border-radius-bottomright",a+"px"),$("#"+this.id+"-bbar").css("-webkit-border-radius-bottomleft",a+"px"),$("#"+this.id+"-bbar").css("-webkit-border-radius-bottomright",a+"px")))}},refresh:function(a){var b;if(null!=this.ds&&null!=this.cm){this.events.beforeRefresh&&this.events.beforeRefresh(this);this.events.beforerefresh&&this.events.beforerefresh(this);b=this.showHeader?new idev.wTemplate("<div id='{id}-header' class='ui-grid-header' style='height:{headerheight}px;overflow:none;'>",
"{header}","</div>","<div id='{id}-data' class='ui-grid-data' style='width:{width}px;height:{height}px;overflow:auto;'>","{data}","</div>"):new idev.wTemplate("<div id='{id}-data' class='ui-grid-data' style='width:{width}px;height:{height}px;overflow:auto;'>","{data}","</div>");this.border&&(this.style+="border:"+this.borderStyle);this.build();var c=[];c.id=this.id;c.width=this.width;c.headerwidth=this.width+250;c.height=this.height-this.headerHeight-this.tbarHeight-this.bbarHeight;c.headerheight=
this.headerHeight;c.elementstyle=this.elementStyle;c.style=this.style;c.header=this.htmlHeader;c.data=this.htmlData;var d=0,f=0;a&&(this.selectedRow=-1);-1<this.selectedRow&&(d=$("#"+this.id+"-data").scrollTop(),f=$("#"+this.id+"-data").scrollLeft());a=b.render(c);$("#"+this.id+"-body").html(a);idev.internal.afterRender(this);if(-1<this.selectedRow){for(a=0;a<this.cm.getCount();a++)c=this.cm.getAt(a),c.noselect||(b=this.id+"-cell-"+this.selectedRow+"-"+a,$("#"+b).addClass("ui-grid-cell-select"));
if(0<d||0<f)$("#"+this.id+"-data").scrollTop(d),$("#"+this.id+"-data").scrollLeft(f)}(this.events.contextMenu||this.events.contextmenu)&&this.addEvent("contextmenu",idev.internal.onContextMenu);for(a=0;a<this.cm.getCount();a++)c=this.cm.getAt(a),"function"==typeof this.events.headerClick&&(b=this.id+"-header-"+a,$("#"+b).click({widget:this,column:c},function(a){a.data.widget.events.headerClick(a.data.widget,a.data.column,a)}));for(d=this.offset;d<this.ds.getCount()&&d<this.offset+this.limit;d++)for(a=
0;a<this.cm.getCount();a++)b=this.id+"-cell-"+d+"-"+a,$("#"+b).click(function(a){var b=this.id.indexOf("-");if(-1!=b){var c=this.id.substr(0,b),d=this.id.substr(b+6),b=d.indexOf("-"),f=d.substr(0,b),b=d.substr(b+1),c=idev.get(c),d=c.cm.getAt(b);if(c.editCol){if(f==c.editCol.editRow&&b==c.editCol.editCol)return;c.editCol.endEdit(f);c.editCol=null}c.selectRow(f);1==c.editClicks&&d.editor?(d.edit(f,b),c.editCol=d,$("#"+c.id).focus(),$delay(100,function(a){$get(a).focus()},c.editCol.editID)):(null!=d.events&&
d.events.click&&d.events.click(c,f,d,a),c.events.rowclick&&c.events.rowclick(c,f,a),c.events.cellclick&&c.events.cellclick(c,f,b,a))}}),$("#"+b).dblclick(function(a){var b=this.id.indexOf("-");if(-1!=b){var c=this.id.substr(0,b),d=this.id.substr(b+6),b=d.indexOf("-"),f=d.substr(0,b),b=d.substr(b+1),c=idev.get(c),d=c.cm.getAt(b);if(c.editCol){if(f==c.editCol.editRow&&b==c.editCol.editCol)return;c.editCol.endEdit();c.editCol=null}c.selectRow(f);if(2==c.editClicks&&d.editor){d.edit(f,b);c.editCol=d;
$("#"+c.id).focus();$delay(100,function(a){$get(a).focus()},c.editCol.editID);return}null!=d.events&&(d.events.click&&d.events.click(c,f,b,a),d.events.dblclick&&d.events.dblclick(c,f,b,a));c.events.dblclick&&c.events.dblclick(c,a)}a.preventDefault();a.stopPropagation();return!1});$("#"+this.id+"-data").scroll(function(){var a=this.id.indexOf("-"),a=this.id.substr(0,a);idev.get(a).showHeader&&(a=this.id.replace("-data","")+"-header",$("#"+this.id).width(),pos=this.scrollLeft,$("#"+a).scrollLeft(pos))});
for(a=0;a<this.cm.getCount();a++)c=this.cm.getAt(a),c.parent=this,null!=c.events&&c.events.afterender&&c.events.afterender(this,a);this.events.afterRefresh&&this.events.afterRefresh(this);this.events.afterrefresh&&this.events.afterrefresh(this);this.rendered=!0}},selectRow:function(a){if(-1!=this.selectedRow)for(var b=0;b<this.cm.getCount();b++){var c=this.id+"-cell-"+this.selectedRow+"-"+b;$("#"+c).removeClass("ui-grid-cell-select")}for(b=0;b<this.cm.getCount();b++)this.cm.getAt(b).noselect||(c=
this.id+"-cell-"+a+"-"+b,$("#"+c).addClass("ui-grid-cell-select"));this.selectedRow=a},getSelected:function(){return this.selectedRow},getStore:function(){return this.ds},ondestroy:function(){this.ds&&this.ds.autoDestroy&&delete this.ds;this.tbCreated&&this.tbar.destroy();this.bbCreated&&this.bbar.destroy()},doLayout:function(){this._super();var a=$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-data").height(b-this.headerHeight);$("#"+this.id+"-data").width(a)}}),widgetTabPanel:baseWidget.extend({init:function(a){this._super(a);
this.wtype="tabpanel";this.tabWidth=a.tabWidth||90;this.tabHeight=a.tabHeight||25;this.tabScrollWidth=a.tabScrollWidth||25;this.tabStyle=a.tabStyle||"";this.contentStyle=a.contentStyle||"";this.activeTab=a.activeTab||0;this.tabScroll=!1;this.startTab=0;this.radius=a.radius||6;var b=a="";this.tabWidth*this.widgets.length>this.width&&(a="<li id='{id}-tableft' style='width:"+this.tabScrollWidth+"px;height:{tabheight}px;'><div id='{id}-tableft-body' class='ui-tab-scroll'>&laquo;</div></li>",b="<li id='{id}-tabright' style='float:right;width:"+
this.tabScrollWidth+"px;height:{tabheight}px;'><div id='{id}-tabright-body' class='ui-tab-scroll ui-tab-scroll-active'>&raquo;</div></li>",this.tabScroll=!0);this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element ui-tabpanel' style='{elementstyle};{style}'>","<ul class='ui-tabs' style='height:"+(this.tabHeight-2)+"px;width:{contentwidth}px;'>",a,"{tabs}",b,"</ul>","<div id='{id}-panels' class='ui-tab-content' style='width:{contentwidth}px;height:{contentheight}px;{contentstyle}'>","{panels}",
"</div>","</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo&&null!=this.widgets){for(var a="",b="",c=0,d=this.visibleTabs=0;d<this.widgets.length;d++){null==this.widgets[d].tabTitle&&(this.widgets[d].tabTitle=this.widgets[d].title||"");var f=this.widgets[d].tabTitle,c=c+this.tabWidth,f="<div class='ui-tab' style='position:relative;height:"+(this.tabHeight-2)+"px;'><div class='ui-tab-text' style='position:absolute;left:1px;width:"+(this.tabWidth-2)+"px;'>"+f+"<div id='"+this.id+
"-tabclose"+d+"' class='ui-tab-btn-close' style='display:none;position:absolute;top:0px;right:2px;'></div></div>";c>this.width-2*this.tabScrollWidth?a+="<li class='ui-tab ie9gradient' style='display:none;width:"+this.tabWidth+"px;height:"+(this.tabHeight-2)+"px;"+this.tabStyle+";' id='"+this.id+"-tab"+d+"' >"+f+"</li>":(this.visibleTabs++,a+="<li class='ui-tab ie9gradient' style='width:"+this.tabWidth+"px;height:"+(this.tabHeight-2)+"px;"+this.tabStyle+";' id='"+this.id+"-tab"+d+"' >"+f+"</li>");
b+="<div class='ui-tab-content' style='display:none;width:{width}px;height:{height}px;' id='"+this.id+"-panel"+d+"'>";b+="</div>"}c=[];c.id=this.id;c.width=this.width-2;c.height=this.height-this.tabHeight;c.contentwidth=this.width-2;c.contentheight=this.height-this.tabHeight-2;c.elementstyle=this.elementStyle;c.style=this.style;c.contentstyle=this.contentStyle;c.tabheight=this.tabHeight;c.tabwidth=this.tabWidth;c.tabs=a;c.panels=b;a=this.tpl.render(c);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);
idev.utils.delay(100,function(a){for(var b=0;b<a.widgets.length;b++){var c=a.widgets[b];c.renderTo=a.id+"-panel"+b;c.width=a.width-2;c.deferredRender=!0;c.title=null;c.height=a.height-a.tabHeight-2;c.cls=c.cls||"";c.cls+=" ui-tab-panel"}a.showTab(a.activeTab);for(b=0;b<a.widgets.length;b++)$("#"+a.id+"-tab"+b).click(a,function(a){var b=this.id.replace(a.data.id+"-tab","");a.data.showTab(b);return!1}),$("#"+a.id+"-tabclose"+b).click(a,function(a){var b=this.id.replace(a.data.id+"-tabclose","");a.data.closeTab(b)});
$("#"+a.id+"-tableft").click(function(){a.showTab("left");return!1});$("#"+a.id+"-tabright").click(function(){a.showTab("right");return!1})},this);idev.internal.afterRender(this);this.roundCorners&&($("#"+this.id).css("border-bottom-left-radius",this.radius+"px"),$("#"+this.id).css("border-bottom-right-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-bottom-left-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-bottom-right-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-bottom-left-radius",
this.radius+"px"),$("#"+this.id).css("-webkit-border-bottom-right-radius",this.radius+"px"),a=this.radius,this.border&&a--,$("#"+this.id+"-panels").css("border-bottom-left-radius",a+"px"),$("#"+this.id+"-panels").css("border-bottom-right-radius",a+"px"),$("#"+this.id+"-panels").css("-moz-border-bottom-left-radius",a+"px"),$("#"+this.id+"-panels").css("-moz-border-bottom-right-radius",a+"px"),$("#"+this.id+"-panels").css("-webkit-border-bottom-left-radius",a+"px"),$("#"+this.id+"-panels").css("-webkit-border-bottom-right-radius",
a+"px"));this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.rendered=!0}},addTab:function(a){var a=idev.utils.clone(a),b=this,c=this.widgets.length,d="";null!=a.title&&(d=a.title);null!=a.tabTitle&&(d=a.tabTitle);a.tabTitle=d;d="";a.title="<div class='ui-tab' style='position:relative;height:"+(this.tabHeight-2)+"px;'><div style='position:absolute;left:1px;width:"+(this.tabWidth-2)+"px;'><center>"+a.tabTitle+"</center></div><div id='"+this.id+"-tabclose"+c+"' class='ui-tab-btn-close' style='display:none;position:absolute;top:0px;right:2px;'></div></div>";
var d=this.widgets.length+1>=this.startTab+this.visibleTabs?"<li style='display:none;width:"+this.tabWidth+"px;height:"+(this.tabHeight-2)+"px;"+this.tabStyle+";' id='"+this.id+"-tab"+c+"' >"+a.title+"</li>":"<li style='width:"+this.tabWidth+"px;"+this.tabStyle+";' id='"+this.id+"-tab"+this.widgets.length+"' >"+a.title+"</li>",f="<div class='ui-tab-content' style='display:none;' id='"+this.id+"-panel"+this.widgets.length+"'></div>";a.renderTo=this.id+"-panel"+c;a.title=null;a.width=this.width-2;a.deferredRender=
!0;a.height=this.height-this.tabHeight-2;$("#"+this.id+"-tabright").before(d);$("#"+this.id+"-panels").append(f);$("#"+this.id+"-tab"+c).click(this,function(a){var b=this.id.replace(a.data.id+"-tab","");a.data.showTab(b);return!1});$("#"+this.id+"-tabclose"+c).click(this,function(a){a=this.id.replace(a.data.id+"-tabclose","");b.closeTab(a);return!1});this.widgets.push(a);this.showTab(c)},closeTab:function(a){"string"==typeof a&&(a=parseInt(a));if(0>a||a>=this.widgets.length)return!1;if(!(this.events.beforeCloseTab&&
!1===this.events.beforeCloseTab(this,a))){var b=this.id+"-tab"+a;$("#"+b).remove();b=this.id+"-panel"+a;$("#"+b).remove();if(null!=this.widgets[a].id)try{$get(this.widgets[a].id).destroy()}catch(c){}for(var d=a+1;d<this.widgets.length;d++){var b=this.id+"-tab"+d,f=this.id+"-tab"+(d-1),g=this.widgets[d];$("#"+b).attr("id",f);b=this.id+"-panel"+d;f=this.id+"-panel"+(d-1);$("#"+b).attr("id",f);g.renderTo=f;b=this.id+"-tabclose"+d;f=this.id+"-tabclose"+(d-1);$("#"+b).attr("id",f)}this.widgets.splice(a,
1);b="";this.startTab+this.visibleTabs-1>=this.widgets.length?(this.startTab--,0<=this.startTab?(b=this.id+"-tab"+this.startTab,$("#"+b).css("display","block")):(this.startTab=0,$("#"+this.id+"-tableft").hide(),$("#"+this.id+"-tabright").hide())):(b=this.id+"-tab"+(this.startTab+this.visibleTabs-1),$("#"+b).css("display","block"));if(a==this.activeTab){a==this.widgets.length&&a--;if(0==this.widgets.length)return;this.showTab(a)}this.events.afterCloseTab&&this.events.afterCloseTab(this,a);return!0}},
showTab:function(a){var b="#"+this.id+"-tableft-body",c="#"+this.id+"-tabright-body";if(0!=this.widgets.length&&!("function"==typeof this.events.beforeShowTab&&!1===this.events.beforeShowTab(this,a)))if("left"==a){if(0!=this.startTab){this.startTab--;var d=this.id+"-tab"+this.startTab,f=this.id+"-tab"+(this.startTab+this.visibleTabs);$("#"+f).css("display","none");$("#"+d).css("display","block");$(c).addClass("ui-tab-scroll-active");0==this.startTab&&$(b).removeClass("ui-tab-scroll-active")}}else if("right"==
a)this.startTab+1+this.visibleTabs>this.widgets.length||(f=this.id+"-tab"+this.startTab,d=this.id+"-tab"+(this.startTab+this.visibleTabs),$("#"+f).css("display","none"),$("#"+d).css("display","block"),$(b).addClass("ui-tab-scroll-active"),this.startTab+1+this.visibleTabs==this.widgets.length&&$(c).removeClass("ui-tab-scroll-active"),this.startTab++);else if(!(a>this.widgets.length)&&!(0>a)){for(;a<this.startTab;)this.startTab--,d=this.id+"-tab"+this.startTab,f=this.id+"-tab"+(this.startTab+this.visibleTabs),
$("#"+f).css("display","none"),$("#"+d).css("display","block"),$(c).addClass("ui-tab-scroll-active"),0==this.startTab&&$(b).removeClass("ui-tab-scroll-active");for(;a>this.startTab+this.visibleTabs-1;)f=this.id+"-tab"+this.startTab,d=this.id+"-tab"+(this.startTab+this.visibleTabs),$("#"+f).css("display","none"),$("#"+d).css("display","block"),$(b).addClass("ui-tab-scroll-active"),this.startTab+1+this.visibleTabs==this.widgets.length&&$(c).removeClass("ui-tab-scroll-active"),this.startTab++;b=this.id+
"-panel"+this.activeTab;$("#"+this.id+"-tabclose"+this.activeTab).css("display","none");this.activeTab=a;for(c=0;c<this.widgets.length;c++)$("#"+this.id+"-tab"+c).removeClass("active");$("#"+b).css("display","none");$("#"+this.id+"-tab"+this.activeTab).addClass("active").show();this.widgets[a].closable&&$("#"+this.id+"-tabclose"+a).css("display","block");activeTab=this.id+"-panel"+this.activeTab;this.widgets[a].deferredRender?(a=this.widgets[a],a.deferredRender=!1,a.parent=this,idev.internal.renderWidget(this.page,
a),$("#"+activeTab).show(),a=$get(a.id)):($("#"+activeTab).show(),a=$get(this.widgets[a].id));a.events&&a.events.show&&a.events.show(a);this.events.showTab&&this.events.showTab(this,activeTab)}},onshow:function(){this._super();if(idev.isIE8())for(var a=0;a<this.widgets.length;a++){var b=idev.get(this.widgets[a].id);try{b.onshow()}catch(c){}}}}),widgetIcon:baseWidget.extend({init:function(a){a.hideType="visibility";null==a.width&&(a.width=24);null==a.height&&(a.height=24);this._super(a);this.wtype=
"icon";this.icon=null==a.icon?"":a.icon;this.background=null==a.background?!1:a.background;this.resizer.resizable=!1;this.color=a.color||"black";this.backgroundColor=a.backgroundColor||"#ddd";this.scale=a.scale||0.7;this.xoffset=null==a.xoffset?-5:a.xoffset;this.yoffset=null==a.yoffset?-5:a.yoffset;this.title=a.title||"";this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element {cls}' style='{elementstyle};{style}' title='{title}'>","</div>");idev.internal.add(this)},drawIcon:function(){this.paper=
Raphael(this.id,this.width,this.height);this.paper.safari();var a="";""!=this.icon&&(a=eval("icon."+this.icon));if(""!=a&&(this.background&&this.paper.circle(this.width/2,this.height/2,this.width/2-2).attr({fill:this.backgroundColor,stroke:"none"}),this.ic=this.paper.path(a).attr({fill:this.color,stroke:"none"})))this.ic.scale(this.scale,this.scale),this.ic.translate(this.xoffset,this.yoffset);"function"==typeof this.events.click&&$("#"+this.id).click(idev.internal.onClick);"function"==typeof this.events.dblclick&&
$("#"+this.id).dblclick(idev.internal.onDblClick)},render:function(){if(null!=this.renderTo&&""!=this.icon){var a=[];a.id=this.id;a.width=this.width;a.height=this.height;a.elementstyle=this.elementStyle;a.style=this.style+(this.events.click?"cursor:pointer;":"");a.cls="";a.title=this.title;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.utils.delay(100,function(a){a.drawIcon();idev.internal.afterRender(a)},this);this.rendered=!0}},refresh:function(){this.paper&&
this.paper.remove();this.drawIcon()}}),widgetElement:baseWidget.extend({init:function(a){this._super(a);this.wtype="element";this.data=a.data;this.tpl=a.tpl;"string"==typeof this.tpl&&(this.tpl=new idev.wTemplate(this.tpl));this.bodyStyle=this.config.bodyStyle||"";idev.internal.add(this)},render:function(){if(null!=this.renderTo&&null!=this.tpl){var a=[];a.id=this.id;a.bodystyle=this.bodyStyle;a.width=this.width;a.height=this.height;a.text=this.text;a.color=this.color;if(null!=this.data)for(var b=
0;b<this.data.length;b++)a.push(this.data[b]);b="<div id='{id}' class='ui-element'>";b="<div id='{id}' class='ui-element' style='"+this.elementStyle+";"+this.style+"'>";a=b+this.tpl.render(a)+"</div>";a=a.replace("{id}",this.id);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",this.radius+"px"));idev.internal.afterRender(this);
this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.events.dblclick&&$("#"+this.id).dblclick(idev.internal.onDblClick);this.rendered=!0}}}),widgetComposite:baseWidget.extend({init:function(a){this._super(a);this.wtype="composite";this.data=a.data;this.bodyStyle=this.config.bodyStyle||"";this.columnAlign=this.config.columnAlign||"CENTER";this.layout=null==a.layout?"column":a.layout;if("fit"==this.layout||"frame"==this.layout||"accordion"==this.layout)this.layout="column";this.labelwidth=
null==a.labelwidth?70:a.labelwidth;this.cls=a.cls||"";idev.internal.add(this)},render:function(){if(null!=this.renderTo&&null!=this.tpl){this.parent.layoutConfig&&this.parent.layoutConfig.fit&&(this.width=this.parent.getWidth());var a=[];a.id=this.id;a.bodystyle=this.bodyStyle;a.width=this.width;a.height=this.height;a.text=this.text;a.color=this.color;if(null!=this.data)for(var b=0;b<this.data.length;b++)a.push(this.data[b]);sHTML="<div id='{id}' class='ui-element "+this.cssQuirks(this.cls)+"' style='"+
this.elementStyle+";"+this.style+"'></div>";sHTML=sHTML.replace("{id}",this.id);idev.internal.beforeRender(this);$("#"+this.renderTo).append(sHTML);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",this.radius+"px"));this.widgets&&idev.internal.renderWidgets(this.page,this.id,this.widgets,this.layout,this.labelwidth,this);idev.internal.afterRender(this);this.events.click&&$("#"+
this.id).click(idev.internal.onClick);this.events.dblclick&&$("#"+this.id).dblclick(idev.internal.onDblClick);this.rendered=!0}},onshow:function(){this._super();if(idev.isIE8())for(var a=0;a<this.widgets.length;a++){var b=idev.get(this.widgets[a].id);try{b.onshow()}catch(c){}}for(a=0;a<this.children.length;a++)try{this.children[a].show()}catch(d){}},doLayout:function(){this._super();var a=$("#"+this.parent.id).width(),b=a,c=!1,d="";$("#"+this.id).width(a);$("#"+this.id+"-table").width(a);for(a=0;a<
this.widgets.length;a++)">>"!=this.widgets[a]?this.widgets[a].variable?d=this.widgets[a].id:b-=$("#"+this.widgets[a].id).width():">>"===this.widgets[a]?c=!0:"string"==typeof this.widgets[a]&&(b-=this.widgets[a].length*idev.charWidth);c&&($("#"+this.id+"-spacer").width(b),$("#"+this.id+"-spacer").css("max-width",b));""!=d&&($("#"+d).width(b),$("#"+d).css("max-width",b))}}),widgetSpacer:baseWidget.extend({init:function(a){this._super(a);this.wtype="spacer";this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle}{style}'>",
"<img src='"+idev.blankimage+"' style='width:{width}px;height:{height}px;'/>","</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=[];a.id=this.id;a.elementstyle=this.elementStyle;a.style=this.style;a.width=this.width||1;a.height=this.height||1;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);this.rendered=!0}}}),widgetHTML:baseWidget.extend({init:function(a){this._super(a);this.wtype="html";this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle}'>",
"{html}","</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo&&null!=this.html){var a=[];a.id=this.id;a.elementstyle=this.elementStyle;a.html=this.html;a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);this.rendered=!0}}}),widgetCanvas:baseWidget.extend({init:function(a){this._super(a);this.wtype="canvas";this.paper=null;this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element{cls}' style='width:{width}px;height:{height}px;{style}'>",
"{text}","</div>");idev.internal.add(this)},render:function(){var a=this.style+this.elementStyle;if(null!=this.renderTo){var b=[];b.id=this.id;b.cls=this.cssQuirks(this.cls);b.style=a;b.width=this.width;b.height=this.height;a=this.tpl.render(b);$("#"+this.renderTo).append(a);idev.internal.beforeRender(this);this.paper=new Raphael(document.getElementById(this.id),this.width,this.height);idev.internal.afterRender(this);this.events.click&&$("#"+this.id).click(idev.internal.onClick);this.events.dblclick&&
$("#"+this.id).dblclick(idev.internal.onDblClick);this.rendered=!0}},getPaper:function(){return this.paper}}),widgetListItem:baseWidget.extend({init:function(a){this._super(a);this.wtype="listitem";this.icon=null==a.icon?"":a.icon;this.image=null==a.image?"":a.image;this.text=null==a.text?"":a.text;this.textStyle=null==a.textStyle?"":a.textStyle;this.widgetWidth=null==a.widgetWidth?30:a.widgetWidth;this.widget=a.widget;this.index=a.index;this.itemHeight=null==a.itemHeight?40:a.itemHeight;this.background=
a.background;this.selectable=null==a.selectable?!0:a.selectable;this.width=(idev.isWebkit()||idev.isFF())&&!idev.isPalm()?this.width-2:this.width-4;this.html+=this.text;this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element {cls}' style='width:{width}px;padding:2px;{style}'>","<table cellspacing=0 cellpadding=0 height={itemheight}><tr>","<tr>","{item}","</tr>","</table>","</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a="",b,c=this.style;b="ui-listbox-item ie9gradient";
this.parent&&this.index==this.parent.items.length-1&&(b="ui-listbox-item-last");""!=this.image&&(a="<td width='50px'><img src='"+this.image+"' style=''></td>");this.widget?a="icon"!=this.widget.wtype?"<td d='"+this.id+"-text'align='left' valign=center width='"+(this.width-this.widgetWidth)+"'' ><div class='ui-listbox-text' style='"+this.textStyle+"'>"+this.html+"</div></td><td id='"+this.id+"-widget' width="+this.widgetWidth+" valign=top style='padding-top:5;'></td>":"<td d='"+this.id+"-text'align='left' valign=center width='"+
(this.width-this.widgetWidth)+"'><div class='ui-listbox-text' style='"+this.textStyle+"'>"+this.html+"</div></td><td id='"+this.id+"-widget' width="+this.widgetWidth+"></td>":(this.widget={wtype:"icon",icon:this.icon,background:this.background},a="<td id='"+this.id+"-text' align='left' valign=center width='"+(this.width-this.widgetWidth)+"'><div class='ui-listbox-text' style='"+this.textStyle+"'>"+this.html+"</div></td><td id='"+this.id+"-widget' width="+this.widgetWidth+"></td>");var d=[];d.id=this.id;
d.cls=b;d.width=this.width;d.itemheight=this.itemHeight;d.style=c+"background-position:bottom;background-repeat: repeat-x;";d.item=a;a=this.tpl.render(d);$("#"+this.renderTo+"-body").append(a);this.widget&&null!=this.widget.wtype&&("icon"==this.widget.wtype?""!=this.widget.icon&&(this.widget.renderTo=this.id+"-widget",this.widget.id=idev.internal.renderWidget(this.page,this.widget)):(this.widget.renderTo=this.id+"-widget",this.widget.id=idev.internal.renderWidget(this.page,this.widget)));$("#"+this.id).click(function(a){var b=
idev.get(this.id);b.enabled&&(b.select(),b.events&&b.events.click&&b.events.click(b,b.index,a))});$("#"+this.id).dblclick(function(){var a=idev.get(this.id);a.enabled&&(a.select(),a.events&&a.events.dblclick&&a.events.dblclick(a,a.index,e))});this.rendered=!0}},select:function(){if(!this.selectable)return!1;null!=this.parent.selected&&$("#"+this.parent.selected).removeClass("ui-listbox-select");$("#"+this.id).addClass("ui-listbox-select");this.parent.selected=this.id;return!0},syncWidth:function(){var a=
$("#"+this.parent.id).width();$("#"+this.id).width(a);$("#"+this.id+"-text").width(a-this.widgetWidth)}}),widgetListbox:baseWidget.extend({init:function(a){this._super(a);this.wtype="listbox";this.title=null==a.title?"":a.title;this.titleHeight=null==a.titleHeight?30:a.titleHeight;this.titleStyle=null==a.titleStyle?"":a.titleStyle;this.items=a.items;this.background=null==a.background?!0:a.background;this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element ui-listbox {extracls} {cls}' style='overflow:hidden;{elementstyle};{style}'>",
"<div id='{id}-header' class='{headercls}' style='max-width:{width}px;width:{width}px;height:{titleheight}px;{titlestyle}'>","<center>","{title}","</center>","</div>","<div id='{id}-body' class='{bodycls}' style='width:{width}px;'>","</div>","</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=[];a.id=this.id;a.width=this.width;a.height=this.height;a.titleheight=this.titleHeight;a.titlestyle=this.titleStyle;a.extracls="curved";a.cls=this.cssQuirks(this.cls);a.elementstyle=
this.elementStyle;a.style=this.style;a.headercls="ui-listbox-header ie9gradient";a.title=this.title;a.bodycls="ui-listbox-body";a=this.tpl.render(a);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);if(this.items)for(a=0;a<this.items.length;a++){var b=this.items[a];""!=b.text&&(b.index=a,b.background=this.background,b.wgt=this.add(b))}idev.internal.afterRender(this);this.rendered=!0}},add:function(a){a.renderTo=this.id;null==a.width&&(a.width=this.width);a.page=this.page;a.parent=this;
a=new idev.ui.widgetListItem(a);a.parent=this;a.render();return a},get:function(a){return 0>a||a>=this.items.length?null:this.items[a].wgt},doLayout:function(){var a=$("#"+this.id).width();$("#"+this.id).height();$("#"+this.id+"-header").width(a);$("#"+this.id+"-body").width(a);for(a=0;a<this.items.length;a++)this.items[a].wgt.syncWidth()}}),widgetList:baseWidget.extend({init:function(a){this._super(a);this.wtype="list";this.tpl=null==a.tpl?"":a.tpl;this.offset=a.offset||0;this.limit=a.limit||65535;
this.selected=-1;this.dsFilter=a.dsFilter;this.itemStyle=a.itemStyle||"";this.itemCls=a.itemCls||"";this.backgroundStyle=a.backgroundStyle||"";this.metaData=a.metaData;this.autoSelect=a.autoSelect;this.selectColor=a.selectColor;this.selectCls=a.selectCls||"";this.renderer=a.renderer;this.emptyText=null==a.emptyText?!1:a.emptyText;if(""!=this.selectColor||""!=this.selectCls)this.autoSelect=!0;this.template=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle};'>","<div id='{id}-background' style='position:absolute;left:0px;top:0px;width:{width}px;max-width:{width}px;height:{height}px;max-height:{height}px;{backgroundstyle}'>",
"</div>","<div id='{id}-wrapper' class='ui-list {cls}' style='position:absolute;left:0px;top:0px;width:{wwidth}px;max-width:{wwidth}px;height:{height}px;max-height:{height}px;{style};'>","<div id='{id}-scroller'>","{items}","</div>","</div>","</div>");this.itemtpl=new idev.wTemplate("<div id='{id}' class='ui-listentry {itemcls}' style='width:{width}px;max-width:{width}px;{itemstyle}'>","{entry}","</div>");idev.internal.add(this);null!=this.ds&&this.ds.bind(this);""!=this.itemCls&&(this.itemCls+="  ie9gradient");
""!=this.selectCls&&(this.selectCls+="  ie9gradient")},buildList:function(){for(var a="",b=[],c=this.offset;c<this.ds.getCount()&&c<this.offset+this.limit;c++){var d="",f="",g=this.ds.getAt(c),d=!0;this.dsFilter&&(d=this.dsFilter.call(this,g));if(d){for(var d="object"==typeof this.tpl?this.tpl.render(this.data):this.tpl,i=0;i<this.ds.fieldCount();i++)for(var m=this.ds.getFieldName(i),k=20;-1!=d.indexOf("{"+m+"}")&&0<k;)d=d.replace("{"+m+"}",""==g.get(m)?"&nbsp;":g.get(m)),k--;if(this.data)for(var j in this.data)if(i=
this.data[j],"string"==typeof i||"number"==typeof i)d=idev.utils.replaceAll(d,"{"+j+"}",this.data[j]);this.renderer&&(d=this.renderer(this,d,g,c));b.id=this.id+"_"+c;b.width=this.width;b.entry=d;b.itemstyle=this.itemStyle;b.itemcls=this.itemCls;this.events.click&&(f="cursor:pointer;");b.style=f;a+=this.itemtpl.render(b)}}0==this.ds.getCount()&&this.emptyText&&(b.id=this.id+"_emptyText",b.width=this.width,b.entry=this.emptyText,b.itemstyle=this.itemStyle+"font-style:italic;",b.itemcls=this.itemCls,
this.events.click&&(f="cursor:pointer;"),b.style=f,a+=this.itemtpl.render(b));return a},refresh:function(){var a=this.id;this.events.beforeRefresh&&this.events.beforeRefresh(this);this.events.beforerefresh&&this.events.beforerefresh(this);var b=this.buildList();$("#"+a+"-scroller").html(b);for(a=0;a<this.ds.getCount();a++)$("#"+this.id+"_"+a).click(idev.internal.onClick);if(this.events.dblClick)for(a=0;a<this.ds.getCount();a++)$("#"+this.id+"_"+a).dblClick(idev.internal.onDblClick);if(this.autoScroll&&
idev.isTouch()){var c=this;setTimeout(function(){c.iScroll&&c.iScroll.refresh()},500)}this.selected=-1;this.scrollPos=0;this.events.afterRefresh&&this.events.afterRefresh(this);this.events.afterrefresh&&this.events.afterrefresh(this)},render:function(){if(null!=this.renderTo&&null!=this.ds){var a=this.style;this.autoScroll&&!idev.isTouch()&&(a+="overflow:auto;overflow-x:hidden; overflow-y:auto;");var b=[];b.id=this.id;b.style=a;b.cls=this.cssQuirks(this.cls);b.elementstyle=this.elementStyle;b.backgroundstyle=
this.backgroundStyle;b.width=this.width;b.wwidth=this.width-(this.border?2:0);b.height=this.height-(this.border?2:0)-2;b.items="";a=this.template.render(b);idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);this.autoScroll&&idev.isTouch()&&$delay(400,function(a){a.iScroll=new iScroll(document.getElementById(a.id+"-scroller"),{bounce:!1})},this);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",
this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",this.radius+"px"),a=this.radius,this.border&&a--,$("#"+this.id+"-background").css("border-radius",a+"px"),$("#"+this.id+"-background").css("-moz-border-radius",a+"px"),$("#"+this.id+"-background").css("-webkit-border-radius",a+"px"));this.rendered=!0;this.refresh()}},getStore:function(){return this.ds},getSelected:function(){return this.selected},getItemId:function(a){return this.id+a},updateItem:function(a,b,c){$("#"+this.id+"_"+a).css(b,
c)},setScrollPos:function(a){$("#"+this.id+"-wrapper").scrollTop(a);this.scrollPos=$("#"+this.id+"-wrapper").scrollTop()},getScrollPos:function(){return this.scrollPos},onhide:function(){this.scrollPos=$("#"+this.id+"-wrapper").scrollTop()},ondestroy:function(){this.ds&&this.ds.autoDestroy&&delete this.ds},doLayout:function(){this._super();var a=$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-wrapper").css("width",a);$("#"+this.id+"-wrapper").css("max-width",a);$("#"+this.id+"-wrapper").css("height",
b);$("#"+this.id+"-wrapper").css("max-height",b);this.refresh();this._super()},clearSelection:function(){this.selected=-1}}),widgetDataView:baseWidget.extend({init:function(a){this._super(a);this.wtype="dataview";this.tpl=null!=a.template?a.template:null==a.tpl?"<div class='ui-listentry'></div>":a.tpl;this.columns=null==a.columns?2:a.columns;this.roundCorners=null==a.roundCorners?!1:a.roundCorners;this.radius=idev.convertNulls(this.config.radius,4);this.autoSelect=a.autoSelect;this.selectColor=a.selectColor||
"";this.selectCls=a.selectCls||"ui-dataview-select";this.entryCls=a.entryCls||"";if(""!=this.selectColor||""!=this.selectCls)this.autoSelect=!0;this.offset=a.offset||0;this.limit=a.limit||65535;this.entryWidth=a.entryWidth;this.entryHeight=a.entryHeight;this.swipeDelay=null==a.swipeDelay?3E3:a.swipeDelay;this.selected=-1;this.renderer=a.renderer;this.dsFilter=a.dsFilter;this.basetpl=new idev.wTemplate("<div id='{id}' class='ui-element {cls}' style='{elementstyle};{style}'>","<div id='{id}-wrapper' class='ui-dataview' style='position:relative;left:0px;top:0px;width:{width}px;max-width:{width}px;height:{height}px;max-height:{height}px;{bodystyle}'>",
"<div id='{id}-scroller'  class='ui-scroller' style=''>","{items}","</div>","</div>","</div>");"string"==typeof this.tpl&&(this.entryWidth&&(this.tpl=this.tpl.replace("{entrywidth}",this.entryWidth)),this.entryHeight&&(this.tpl=this.tpl.replace("{entryheight}",this.entryHeight)));a.autoHeight&&(this.height=null);idev.internal.add(this);null!=this.ds&&this.ds.bind(this);""!=this.selectCls&&(this.selectCls+="  ie9gradient");""!=this.entryCls&&(this.entryCls+="  ie9gradient")},buildList:function(){var a=
"<table>",b=0,c="";if(this.events.click||this.events.dblclick)c+="cursor:pointer;";if("auto"==this.columns){for(var a="",d=this.offset;d<this.ds.getCount()&&d<this.offset+this.limit;d++){var f="",g=this.ds.getAt(d),f=!0;this.dsFilter&&(f=this.dsFilter.call(this,g));if(f){"string"==typeof this.tpl?f=this.tpl:(f=this.tpl.get(),this.entryWidth&&(f=f.replace("{entrywidth}",this.entryWidth)),this.entryHeight&&(f=f.replace("{entryheight}",this.entryHeight)));for(var i=0;i<this.ds.fieldCount();i++)var m=
this.ds.getFieldName(i),f=idev.utils.replaceAll(f,"{"+m+"}",g.get(m));if(this.data)for(var k in this.data)if(i=this.data[k],"string"==typeof i||"number"==typeof i)f=idev.utils.replaceAll(f,"{"+k+"}",this.data[k]);this.renderer&&(f=this.renderer(this,f,g,d));a+="<div id='"+this.id+"_"+d+"' class='ui-dataview-wrapper "+this.entryCls+"' style='float:left;"+c+"'>"+f+"</div>"}}return a}a+="<tr>";for(d=this.offset;d<this.ds.getCount()&&d<this.offset+this.limit;d++)if(g=this.ds.getAt(d),f=!0,this.dsFilter&&
(f=this.dsFilter.call(this,g)),f){"string"==typeof this.tpl?f=this.tpl:(f=this.tpl.get(),this.entryWidth&&(f=f.replace("{entrywidth}",this.entryWidth)),this.entryHeight&&(f=f.replace("{entryheight}",this.entryHeight)));for(i=0;i<this.ds.fieldCount();i++)m=this.ds.getFieldName(i),f=idev.utils.replaceAll(f,"{"+m+"}",g.get(m));if(this.data)for(k in this.data)if(i=this.data[k],"string"==typeof i||"number"==typeof i)f=idev.utils.replaceAll(f,"{"+k+"}",this.data[k]);a+="<td valign=top><div id='"+this.id+
"_"+d+"' class='ui-dataview-wrapper ui-dataview-element "+this.entryCls+"' style='"+c+"'>"+f+"</div></td>";b++;b==this.columns&&(a+="</tr>",a+="<tr>",b=0)}return a+="</tr></table>"},refresh:function(){var a=this.id;this.events.beforeRefresh&&this.events.beforeRefresh(this);this.events.beforerefresh&&this.events.beforerefresh(this);var b=this.buildList();$("#"+a+"-scroller").html(b);this.autoScroll&&idev.isTouch()&&(a=this.id+"-scroller",$delay(500,function(a){a.iScroll.refresh()},this));for(a=0;a<
this.ds.getCount();a++)$("#"+this.id+"_"+a).click(idev.internal.onClick);if(this.events.dblclick)for(a=0;a<this.ds.getCount();a++)$("#"+this.id+"_"+a).dblclick(idev.internal.onDblClick);if(this.events.hover)for(a=0;a<this.ds.getCount();a++)$("#"+this.id+"_"+a).hover(idev.internal.onHoverIn,idev.internal.onHoverOut);this.selected=-1;this.events.afterRefresh&&this.events.afterRefresh(this);this.events.afterrefresh&&this.events.afterrefresh(this)},render:function(){if(null!=this.renderTo&&null!=this.ds){var a=
this.style,b="";this.border&&(a+="border: 1px solid "+this.borderColor+";");this.autoScroll&&!idev.isTouch()&&(b+=";overflow:auto;");var c=[],d=this.width-(this.border?1:0),f=this.height-(this.border?1:0);this.roundCorners&&(d-=this.radius,f-=this.radius,b+="margin:2px;");c.id=this.id;c.cls=this.cssQuirks(this.cls);c.style=a;c.bodystyle=b;c.width=d;c.height=f;c.elementstyle=this.elementStyle;c.items=this.buildList();a=this.basetpl.render(c);delete c;idev.internal.beforeRender(this);$("#"+this.renderTo).append(a);
idev.internal.afterRender(this);for(c=0;c<this.ds.getCount();c++)$("#"+this.id+"_"+c).click(idev.internal.onClick);if(this.events.dblclick)for(c=0;c<this.ds.getCount();c++)$("#"+this.id+"_"+c).dblclick(idev.internal.onDblClick);if(this.events.hover)for(c=0;c<this.ds.getCount();c++)$("#"+this.id+"_"+c).hover(idev.internal.onHoverIn,idev.internal.onHoverOut);this.roundCorners&&($("#"+this.id).css("border-radius",this.radius+"px"),$("#"+this.id).css("-moz-border-radius",this.radius+"px"),$("#"+this.id).css("-webkit-border-radius",
this.radius+"px"),c=this.radius,this.border&&c--,$("#"+this.id+"-wrapper").css("border-radius",c+"px"),$("#"+this.id+"-wrapper").css("-moz-border-radius",c+"px"),$("#"+this.id+"-wrapper").css("-webkit-border-radius",c+"px"));this.autoScroll&&idev.isTouch()&&idev.utils.delay(1E3,function(a){a.iScroll=new iScroll(document.getElementById(a.id+"-scroller"))},this);this.rendered=!0}},updateItem:function(a,b,c){$("#"+this.id+"_"+a).css(b,c)},getSelected:function(){return this.selected},select:function(a){-1!=
this.selected&&($("#"+this.id+"_"+this.selected).addClass(this.entryCls),$("#"+this.id+"_"+this.selected).removeClass(this.selectCls));-1!=a&&($("#"+this.id+"_"+a).removeClass(this.entryCls),$("#"+this.id+"_"+a).addClass(this.selectCls));this.selected=a},getStore:function(){return this.ds},ondestroy:function(){this.ds&&this.ds.autoDestroy&&delete this.ds},doLayout:function(){this._super();var a=$("#"+this.id).width(),b=$("#"+this.id).height();$("#"+this.id+"-wrapper").css("width",a);$("#"+this.id+
"-wrapper").css("max-width",a);$("#"+this.id+"-wrapper").css("height",b);$("#"+this.id+"-wrapper").css("max-height",b);this.refresh()}}),widgetSound:baseWidget.extend({init:function(a){a.width=0;a.height=0;this._super(a);this.wtype="sound";this.src=a.src;this.tpl=new idev.wTemplate("<div id='{id}' class='ui-element' style='{elementstyle};'>","<audio id='{id}-player' src='{src}'></audio>","</div>");idev.internal.add(this)},render:function(){if(null!=this.renderTo){var a=[];a.id=this.id;a.elementstyle=
this.elementStyle;a.style=this.style;a.src=this.src;a=this.tpl.render(a);$("#"+this.renderTo).append(a);idev.internal.afterRender(this);this.rendered=!0}},play:function(){var a=$("#"+this.id+"-player"),b=a.get(0);b.pause();a.currentTime-=30;b.play()}})},ux:{loadCSS:function(a,b){try{null==b&&(b=idev.internal.callback),idev.internal.addStyleSheet(_preferences.libpath+"ux/"+a,b)}catch(c){idev.errorHandler(c.message)}},loadScript:function(a,b,c){try{null==b&&(b=idev.internal.callback),-1!=a.indexOf("http://")||
-1!=a.indexOf("https://")?idev.internal.addScript(a,b,c):idev.internal.addScript(_preferences.libpath+"ux/"+a,b,c)}catch(d){idev.errorHandler(d.message)}}},extensions:function(){this.ui.widgetToolbar=this.ui.widgetComposite.extend({init:function(a){this._super(a);this.wtype="toolbar";this.layout="column";this.defaultType="button";this.padding=this.padding||2;idev.internal.add(this)}});this.register("toolbar",this.ui.widgetToolbar);this.ui.widgetStatusbar=this.ui.widgetComposite.extend({init:function(a){this._super(a);
this.wtype="statusbar";this.layout="column";this.defaultType="button";this.padding=this.padding||2;idev.internal.add(this)}});this.register("statusbar",this.ui.widgetStatusbar);this.ui.widgetWindow=this.ui.widgetPanel.extend({init:function(a){null==a.x&&(a.x=$("#container").width()/2-a.width/2);null==a.y&&(a.y=$("#container").height()/2-a.height/2);a.renderTo="container";a.frame=!0;a.closable=idev.convertNulls(a.closable,!0);a.panelCls=a.panelCls||"ui-window";a.backgroundCls=a.backgroundCls||"ui-window-background";
this._super(a);this.wtype="window";this.draggable=idev.convertNulls(a.draggable,!0);this.autoDestroy=!0;if(this.autoClose=idev.convertNulls(a.autoClose,!1))this.modal=!0;idev.internal.add(this)},render:function(){this._super();if(this.autoClose){var a=this;$("#"+this.maskID).click(function(){a.close()})}},show:function(){this.rendered||this.render();this._super()}});this.ui.widgetForm=this.ui.widgetPanel.extend({init:function(a){a.layout="form";this._super(a);this.wtype="formpanel";this.dataRec=a.dataRec;
idev.internal.add(this);null!=this.dataRec&&this.dataRec.bind(this)},render:function(){this._super();$delay(200,function(a){a.setValues()},this)},getFieldWidget:function(a){a={action:3,field:a,widget:null};idev.utils.form.action(this,a);return a.widget},getFieldConfig:function(a,b,c){null===b&&(b=this.config);if(null==a||""==a)return null;for(var d=0;d<b.widgets.length;d++){if(b.widgets[d].field==a){c=b.widgets[d];break}if(b.widgets[d].widgets&&(c=this.getFieldConfig(a,b.widgets[d],c),null!=c))break}return c},
getValues:function(){return this.action(this,{action:0})},clearValues:function(){return this.action(this,{action:1})},setValues:function(a){null==a&&(a=this.dataRec);this.action(this,{action:2,rec:a});if(this.events.onSetValues)this.events.onSetValues(this,a)},setDataRec:function(a){if(null==a)return!1;this.dataRec=a;this.dataRec.bind(this);this.setValues();return!0},commit:function(a){null==a&&(a=this.dataRec);if(null!=a){this.action(this,{action:4,rec:a});if(this.events.onCommit)this.events.onCommit(this);
return!0}},setEditable:function(a){return this.action(this,{action:5,editable:a})},action:function(a,b){null==b.data&&(b.data=[]);for(var c=0;c<a.children.length;c++){var d=a.children[c].wtype;if("button"!=d&&"icon"!=d&&"image"!=d&&"label"!=d&&"spacer"!=d&&"dataview"!=d&&"tabpanel"!=d&&"grid"!=d)if("composite"==d)this.action(a.children[c],b);else if("panel"==d)this.action(a.children[c],b);else switch(b.action){case 0:b.data.push(a.children[c].getValue());"string"==typeof a.children[c].field&&""!=
a.children[c].field&&(b.data[a.children[c].field]=a.children[c].getValue());break;case 1:a.children[c].setValue("");break;case 2:"string"==typeof a.children[c].field&&""!=a.children[c].field&&(b.rec?a.children[c].setValue(b.rec.get(a.children[c].field)):a.children[c].setValue(""));break;case 3:if(a.children[c].field==b.field){b.widget=a.children[c];return}break;case 4:"string"==typeof a.children[c].field&&""!=a.children[c].field&&b.rec.set(a.children[c].field,a.children[c].getValue(),!0);break;case 5:("input"==
a.children[c].wtype||"textarea"==a.children[c].wtype)&&a.children[c].setEditable(b.editable)}else if(3==b.action&&a.children[c].field==b.field){b.widget=a.children[c];return}}return b.data}});this.register("formpanel",this.ui.widgetForm);this.ui.widgetFormWindow=this.ui.widgetForm.extend({init:function(a){null==a.x&&(a.x=$("#container").width()/2-a.width/2);null==a.y&&(a.y=$("#container").height()/2-a.height/2);a.renderTo="container";a.frame=!0;a.closable=idev.convertNulls(a.closable,!0);a.panelCls=
a.panelCls||"ui-window";a.backgroundCls=a.backgroundCls||"ui-window-background";this._super(a);this.wtype="formwindow";this.draggable=idev.convertNulls(a.draggable,!0);this.autoDestroy=!0;if(this.autoClose=idev.convertNulls(a.autoClose,!1))this.modal=!0;idev.internal.add(this)},render:function(){this._super();if(this.autoClose){var a=this;$("#"+this.maskID).click(function(){a.close()})}},show:function(){this.rendered||this.render();this._super()}})},onReady:function(a){_preferences.config.fitDocument&&
(document.body.style.overflow="hidden");if(_preferences.config.noScale){var b=document.getElementsByTagName("meta");if(null==_preferences.config.noScaleTarget)for(var c=0;c<b.length;c++){if("viewport"==b[c].name){b[c].content="width=450, height=640, user-scalable=no";break}}else if(navigator.userAgent.match(_preferences.config.noScaleTarget))for(c=0;c<b.length;c++)if("viewport"==b[c].name){b[c].content="width=450, height=640, user-scalable=no";break}}idev.blankimage=_preferences.blankimage;idev.controlHeight=
idev.app.controlHeight;idev.callback=a}});$debug=function(a){try{console&&console.log(a)}catch(b){}};$msg=function(a){return idev.ui.message({text:a,type:"ok"})};$popup=function(a,b,c,d,f,g,i,m){return idev.ui.message({text:a,icon:b,x:c,y:d,animate:f,ax:g,ay:i,type:"",delay:m})};$error=function(a){return idev.ui.message({text:a,icon:"error"})};$warning=function(a){return idev.ui.message({text:a,icon:"warning"})};$info=function(a){return idev.ui.message({text:a,icon:"information"})};
$yesno=function(a,b){return idev.ui.message({text:a,icon:"question",type:"yesno",callback:b})};$okcancel=function(a,b){return idev.ui.message({text:a,icon:"question",type:"OKCANCEL",callback:b})};$tr=function(a){return _language.translate(a)};$delay=function(a,b,c){return idev.utils.delay(a,b,c)};$get=function(a){return idev.get(a)};$int=function(a){return idev.utils.round(a,0)};$round=function(a,b){return idev.utils.round(a,b)};$ec=function(a){return idev.utils.scrypt(a,idev.rkey,!0)};
$dc=function(a){return idev.utils.scrypt(a,idev.rkey,!1)};var idev=new idevCore;"object"===typeof idevLoader?idevLoader.render():idev.internal.loadDependants();